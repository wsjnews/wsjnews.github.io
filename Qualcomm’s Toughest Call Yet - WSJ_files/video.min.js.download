(function(){var a=function(b,a){this._self=this;this._version="3.8.64";this.createMark("playerLoadStart");this._container=b;this._height=this._container.offsetHeight;this._width=this._container.offsetWidth;this._isVertical=1>this._width/this._height;this._videoId=this._container.getAttribute("id");this._video;this._captionsShowing=!1;this._audio;this._audioThumb;this._vrWrapper;this._vrComponents;this._hlsPlayer;this._wrapper;this._controls;this._context;this._videodata;this._isAudio=this._isFullScreen=
this._hlsAvailable=!1;this._currentTime=0;this._sizeTimer;this._volume=1;this._hlsLoadAttempted=this._muted=!1;this.parseXml;this._availableCaptions=[];this._setMuted=!1;this._fields="fields=type,video174kMP4Url,video320kMP4Url,video664kMP4Url,video1264kMP4Url,video1864kMP4Url,video2564kMP4Url,hls,videoMP4List,adZone,thumbnailList,guid,state,secondsUntilStartTime,author,description,name,linkURL,videoStillURL,duration,videoURL,adCategory,catastrophic,linkShortURL,doctypeID,youtubeID,titletag,rssURL,wsj-section,wsj-subsection,allthingsd-section,allthingsd-subsection,sm-section,sm-subsection,provider,formattedCreationDate,keywords,keywordsOmni,column,editor,emailURL,emailPartnerID,showName,omniProgramName,omniVideoFormat,linkRelativeURL,touchCastID,omniPublishDate,audioURL,adTagParams,gptCustParams,format,forceClosedCaptions,captionsVTT,audioURLPanoply,hlsNoCaptions,episodeNumber,seriesName";
this._isIpad;this._isIphone;this._isAndroid;this._isIE;this._isMobile=!1;this._androidV;this._isTwitter;this._isOperaMini;this._isChrome;this._safariV=-1;this._safariInit=!1;this._safariHandler;var e=window.navigator.userAgent.toLowerCase(),c=navigator.userAgent.toLowerCase();this._isIpad=e.match(/(ipad)/i);this._isIpad=null==this._isIpad?!1:!0;this._isIphone=e.match(/(iphone)/i);this._isIphone=null==this._isIphone?!1:!0;this._isAndroid=e.match(/(android)/i);this._isAndroid=null===this._isAndroid||
void 0==typeof this._isAndroid?!1:!0;this._androidV=parseFloat(e.slice(e.indexOf("android")+8));this._isIE=-1!=c.indexOf("msie")?parseInt(c.split("msie")[1]):!1;this._isOperaMini=e.match(/(Android; Opera Mini)/i);this._isChrome=e.match(/(Chrome)/i);this._iOS=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||0;this._isIE||!navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/)||
(this._isIE=11);this._isSafariMac=-1!=navigator.userAgent.indexOf("Safari")&&-1!=navigator.userAgent.indexOf("Mac")&&-1==navigator.userAgent.indexOf("Chrome");try{this._isSafariMac&&(this._safariV=parseInt(e.match("version[ /]+[0-9]*")[0].split("/")[1]))}catch(g){this._safariV=-1}this._isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome");this._isMobile=Boolean(this._isAndroid||c.match(/webos/i)||this._isIphone||this._isIpad||c.match(/ipod/i)||c.match(/blackberry/i)||
c.match(/windows phone/i));if("mozilla/5.0 (x11; linux x86_64; rv:45.0) gecko/20100101 firefox/45.0"==e)this._container.innerHTML='<div class="videoErrorMsg"><strong>Playback on your browser is not currently supported.</strong></div>';else{this._bitrateList;this._selectedBitrate="video664kMP4Url";this._skipToTime=0;this._playBtn;this._playOverlay;this._buffering;this._timeDisplay;this._fullscreenBtn;this._volumeBtn;this._ccBtn;this._ccList;this._fbBtn;this._twitterBtn;this._langSelected="";this._currentTrack;
this._bitList;this._volumeBtnGraphics;this._volumeSlider;this._scrubBar;this._scrubProgress;this._adProgress;this._adsSkipButton;this._scrubLoaded;this._thumb;this._thumbContent;this._thumbHint;this._thumbDuration;this._startClick;this._shareScreen;this._clickForSoundScreen;this._ajax={};this._configLoaded=!("playerid"in a);this._futureTimer;this._startTime;this._videoMsg;this._isStalled=!1;this._adPaused=!0;this._adStarted=!1;this._adsManager;this._adsLoader;this._adsBlocked=!1;this._adContainer;
this._adDisplayContainer;this._adMode=!1;this._adDuration=0;this._adPlayNumber=1;this._adTimer;this._adTimeoutTimer;this._adTimeoutFail=!1;this._adResponseTimeout=5E3;this._currentAd;this._adInfo;this._adId;this._adTagUsed="none";this._captionsLangs={eng:"English",spa:"Spanish",jap:"Japanese",por:"Portuguese"};this.BUCKET_HASH_MAP="2qgQ1WCa3A ixi4E5ylqa 830nwKog3K K8ZnHJ5Uyn 91GjW1q7Zg rGgki1wrhs q85AaJVP78 1p6sdUNJWD 63L1D4y2F9 HY0f8Of9M1".split(" ");this._skipAvailable=!1;this._adCountdownText;
this._videoSkipIcon;this._account="djglobal";this._trackingMilestones=[!1,!1,!1,!1];this._mediaHeartbeat;this._mediaHeartbeatConfig;this._mediaHeartbeatDelegate;this._mediaObjectHeartbeat;this._pingMilestone=-1;this._contentStartTracked=this._isLive=this._isChained=!1;this._comscoreC3="13047035";this._comscoreMeta={ns_st_ci:"",c3:this._comscoreC3,c4:"*null",c6:"*null"};this._comscoreTag=new ns_.StreamingTag({customerC2:"6035148"});this._autoplayFailed=!1;this._adErrorTracked=!0;this._adErrorEvent=
!1;this._tObject={};this._pageEvents="";this._events={video:"event136 event40 event41 event42 event46 event67 event73 event74 event96 event97 event98 event99 event100 event113 event115 event116 event117".split(" "),audio:"event101 event102 event113 event104 event105 event67 event106 event107 event108 event109 event110 event111 event112 event113 event114 event118 event119".split(" ")};this._currentEvents=this._events.video;this._larsUrl="https://video-api.wsj.com/enf/wsjdn-video.asp";this._convivaTestCustomerKey=
"896e280ea92df939a292df56edeb57ab25ecaecf";this._convivaProdCustomerKey="445b2eba1211f043d37dc4994c50112384f41204";this._convivaServiceURL="https://wallstreetjournal-test.testonly.conviva.com";this._testingEnvironment=!0;this._convivaClient;this._convivaContentMetadata;this._convivaContentSessionKey=null;this._convivaPlayerStateManager;this._convivaClientInterfaceObject;this._convivaHtml5PlayerInterface;this._convivaTestMode=!1;this._convivaSystemFactory;this._clickForSoundEnabled=this._playRequested=
this._adsRequestPending=this._contentInitialized=!1;this._flash;this._flashContainer;this._flashInit=!1;this._flashEvents;this._fPlaying=!1;this._bucket="";e={autoplay:!1,loop:!1,adsEnabled:!0,vpaidEnabled:!0,shareEnabled:!0,allowPlayerPopup:!1,chainVideos:!1,disableHtmlControls:!1,shareDomain:null,api:"https://video-api.wsj.com/api-video/",clickForSound:!1,resetOnComplete:!1,type:"",query:"",contentType:"article",disableEndscreen:!1,noThumb:!1,larsId:"91",larsAdId:"1259",disableSeekBarThumbnails:!0,
allowFullScreen:!0,adTag:"",useHttps:!0,count:1,moduleId:"",adZone:"",lnid:"",plid:"",msrc:null,collapseable:!1,disableDVR:null,maxBitrateIndex:null,enableCaptions:!0,loaderThumb:!1,adSkipTime:15,playlist:null,suggestionsType:"column",suggestionsQuery:"",suggestionsGroupId:"",sAccount:!1,imaLibrary:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",site:"",directLinks:!1,playlistQuery:"",touchCastID:null,relativeLinks:!1,disableChainPlay:!1,thumb:null,callback:null,fireTv:!1,useHLS:!0,startFullScreen:!1,
playInline:!this._isVertical&&10<=this._iOS&&this._isIphone,suppressHeadline:!1,startLevel:!1};this.hlsConfig={autoStartLoad:!0,startPosition:-1,capLevelToPlayerSize:!1,debug:!1,enableWebVTT:!1};this._isIphone&&!e.playInline&&(e.disableHtmlControls=!0);0==a.clickForSound&&(a.clickForSound="disabled");this._settings=this.extend(e,a);-1!=navigator.userAgent.indexOf("amazon-fireos")?this._isMobile=this._settings.useHLS=!1:this._settings.fireTv=!1;this._isMobile&&("mobile"==this._settings.autoplay?(this._settings.autoplay=
!0,this._settings.adsEnabled=!1,this._settings.playInline=!0,"disabled"!==this._settings.clickForSound&&(this._settings.clickForSound=!0)):this._settings.autoplay=!1);this._isMobile||(this._settings.startFullScreen=!1);if(this._isMobile||this._isIE||this._isSafariMac)this._settings.useHLS=!1;this._isIE&&(this._settings.enableCaptions=!1);-1!==navigator.userAgent.indexOf("CriOS/")&&10<=this._iOS&&(this._settings.adsEnabled=!1);"https://video-api.wsj.com/api-video/"!==this._settings.api&&1<this._settings.api.split("/api-video/").length&&
(this._larsUrl=this._settings.api.split("/api-video/")[0]+"/enf/wsjdn-video.asp");!1!==this._settings.startLevel&&(this.hlsConfig.startLevel=this._settings.startLevel);this._graphics=[];this._graphics.pause='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><path transform="translate(15 16)" id="ytp-11_1_" fill="#FFFFFF" d="M-7.5-8h6V8h-6 M1.5-8h6V8h-6"></path></g></svg>';
this._graphics.play='<svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><polygon transform="translate(16 16)" fill="#FFFFFF" points="-7.5,-8 -7.5,8 7.5,0"></polygon></g></svg>';this._graphics.fullscreen='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path fill="#FFFFFF" d="M9,20H6v6h7v-3H9V20z M6,15h3v-4h4V8H6V15z M23,23h-4v3h7v-6h-3V23z M19,8v3h4v4h3V8H19z"/></svg>';
this._graphics["exit-fullscreen"]='<svg shape-rendering="optimizeSpeed" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path fill="#FFFFFF" d="M10,24h3v-6H6v3h4V24z M13,8h-3v4H6v3h7V8z M22,21h4v-3h-6.715v6H22V21z M26,15v-3h-4V8h-2.715v7H26z"/></svg>';this._graphics["volume-mute"]='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><g><path fill="#FFFFFF" d="M6,19h3.635l7.615,5l0,0V8l0,0l-7.615,5H6"/></g><polygon fill="#FFFFFF" points="26,13.434 25.066,12.5 22.5,15.066 19.934,12.5 19,13.434 21.566,16 19,18.566 19.934,19.5 22.5,16.934 25.066,19.5 26,18.566 23.433,16"/></g></svg>';
this._graphics["volume-full"]='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><g><path fill="#FFFFFF" d="M6,19h3.635l7.615,5l0,0V8l0,0l-7.615,5H6"/></g></g><path fill="#FFFFFF" d="M23.61,8.833c-0.083-0.083-0.219-0.083-0.302,0L21.9,10.241c-0.04,0.04-0.063,0.095-0.063,0.151s0.022,0.11,0.063,0.15c1.42,1.42,2.202,3.304,2.202,5.307c0,2.002-0.782,3.887-2.202,5.307c-0.04,0.04-0.063,0.094-0.063,0.151c0,0.056,0.022,0.11,0.063,0.149l1.408,1.409c0.04,0.04,0.094,0.063,0.151,0.063c0.057,0,0.11-0.022,0.15-0.063c1.877-1.877,2.911-4.369,2.911-7.017S25.487,10.71,23.61,8.833z"/><path fill="#FFFFFF" d="M20.037,11.853c-0.052,0-0.101,0.021-0.136,0.057l-1.269,1.269c-0.036,0.036-0.057,0.084-0.057,0.136c0,0.051,0.021,0.1,0.057,0.136c0.642,0.642,0.996,1.494,0.996,2.4c0,0.905-0.354,1.758-0.996,2.4c-0.036,0.036-0.057,0.085-0.057,0.136s0.021,0.1,0.057,0.136l1.269,1.269c0.074,0.074,0.196,0.074,0.271,0c1.054-1.055,1.635-2.453,1.635-3.94c0-1.486-0.581-2.886-1.635-3.94C20.137,11.873,20.087,11.854,20.037,11.853z"/></svg>';
this._graphics.loading='<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path opacity="0.4" fill="#000000" enable-background="new" d="M20.266,4.773c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.945,14.946,14.945c8.253,0,14.945-6.689,14.945-14.945C35.211,11.465,28.52,4.773,20.266,4.773z M20.266,31.354c-6.425,0-11.634-5.209-11.634-11.634S13.841,8.085,20.266,8.085s11.632,5.209,11.632,11.634S26.691,31.354,20.266,31.354z"/><path fill="#009EFF" d="M9.375,15.219l-3.031-1.313c-1.013,2.329-1.561,4.873-1.25,7.578l-0.101,0.01l3.366-0.354l-0.076-0.025C8.234,18.984,8.587,17.033,9.375,15.219z"></path></svg>';
this._graphics.share='<svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><path fill="#FFFFFF" d="M21,23.613H8V12.386h2.995c0,0,0.733-1.231,2.224-2.387H7c-0.552,0-1,0.531-1,1.193v13.614 C6,25.463,6.448,26,7,26h15c0.552,0,1-0.531,1-1.193v-6.811l-2,1.962V23.613z M19.334,13.998v3.992L26,12.023L19.334,6v3.73 C11.271,9.73,11,19.995,11,19.995C13.281,15.528,14.959,13.998,19.334,13.998z"/></g></svg>';
this._graphics.cc='<svg width="100%" height="100%" viewBox="-4 -8 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M1.5,0 L22.5,0 C23.327,0 24,0.673 24,1.5 L24,14.5 C24,15.327 23.327,16 22.5,16 L7.707,16 L3.854,19.854 C3.758,19.949 3.63,20 3.5,20 C3.435,20 3.371,19.987 3.309,19.962 C3.122,19.885 3,19.702 3,19.5 L3,16 L1.5,16 C0.673,16 0,15.327 0,14.5 L0,1.5 C0,0.673 0.673,0 1.5,0 Z M1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L3.5,15 C3.77614237,15 4,15.2238576 4,15.5 L4,18.1999969 L7.05355034,15.1464466 C7.14731853,15.0526784 7.27449548,15 7.40710373,15 L22.5,15 C22.7761424,15 23,14.7761424 23,14.5 L23,1.5 C23,1.22385763 22.7761424,1 22.5,1 L1.5,1 Z M11.2409939,11.2579878 C10.5919939,11.5549878 9.8549939,11.7199878 9.0849939,11.7199878 C6.8739939,11.7199878 5.3999939,10.2679878 5.3999939,7.77098779 C5.3999939,5.32898779 6.9289939,3.79998779 9.0739939,3.79998779 C9.8989939,3.79998779 10.5919939,3.96498779 11.2079939,4.21798779 L10.9219939,5.54898779 C10.4049939,5.31798779 9.8219939,5.15298779 9.1729939,5.15298779 C7.7979939,5.15298779 6.9069939,6.17598779 6.9069939,7.74898779 C6.9069939,9.37698779 7.7869939,10.3669878 9.2279939,10.3669878 C9.8109939,10.3669878 10.3829939,10.2239878 10.9439939,9.98198779 L11.2409939,11.2579878 Z M18.562,11.2579878 C17.913,11.5549878 17.176,11.7199878 16.406,11.7199878 C14.195,11.7199878 12.721,10.2679878 12.721,7.77098779 C12.721,5.32898779 14.25,3.79998779 16.395,3.79998779 C17.22,3.79998779 17.913,3.96498779 18.529,4.21798779 L18.243,5.54898779 C17.726,5.31798779 17.143,5.15298779 16.494,5.15298779 C15.119,5.15298779 14.228,6.17598779 14.228,7.74898779 C14.228,9.37698779 15.108,10.3669878 16.549,10.3669878 C17.132,10.3669878 17.704,10.2239878 18.265,9.98198779 L18.562,11.2579878 Z" id="CC_Icon" fill="#FFFFFF"></path></g></svg>';
this._graphics["cc-active"]='<svg width="100%" height="100%" viewBox="-4 -8 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M22.5,0 C23.327,0 24,0.673 24,1.5 L24,14.5 C24,15.327 23.327,16 22.5,16 L7.707,16 L3.854,19.854 C3.758,19.949 3.63,20 3.5,20 C3.435,20 3.371,19.987 3.309,19.962 C3.122,19.885 3,19.702 3,19.5 L3,16 L1.5,16 C0.673,16 0,15.327 0,14.5 L0,1.5 C0,0.673 0.673,0 1.5,0 L22.5,0 Z M11.2409939,11.2579878 L10.9439939,9.98198779 C10.3829939,10.2239878 9.8109939,10.3669878 9.2279939,10.3669878 C7.7869939,10.3669878 6.9069939,9.37698779 6.9069939,7.74898779 C6.9069939,6.17598779 7.7979939,5.15298779 9.1729939,5.15298779 C9.8219939,5.15298779 10.4049939,5.31798779 10.9219939,5.54898779 L11.2079939,4.21798779 C10.5919939,3.96498779 9.8989939,3.79998779 9.0739939,3.79998779 C6.9289939,3.79998779 5.3999939,5.32898779 5.3999939,7.77098779 C5.3999939,10.2679878 6.8739939,11.7199878 9.0849939,11.7199878 C9.8549939,11.7199878 10.5919939,11.5549878 11.2409939,11.2579878 Z M18.562,11.2579878 L18.265,9.98198779 C17.704,10.2239878 17.132,10.3669878 16.549,10.3669878 C15.108,10.3669878 14.228,9.37698779 14.228,7.74898779 C14.228,6.17598779 15.119,5.15298779 16.494,5.15298779 C17.143,5.15298779 17.726,5.31798779 18.243,5.54898779 L18.529,4.21798779 C17.913,3.96498779 17.22,3.79998779 16.395,3.79998779 C14.25,3.79998779 12.721,5.32898779 12.721,7.77098779 C12.721,10.2679878 14.195,11.7199878 16.406,11.7199878 C17.176,11.7199878 17.913,11.5549878 18.562,11.2579878 Z" id="CC_Icon_Active" fill="#FFFFFF"></path></g></svg>';
this._graphics.bitrate='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g id="Layer_1"></g><g id="Layer_2"><g><path id="ytp-svg-39_1_" fill="#FFFFFF" d="M26,17.5v-3h-2.655c-0.189-0.956-0.567-1.845-1.089-2.633L24.122,10L22,7.878 l-1.866,1.866c-0.789-0.521-1.678-0.899-2.634-1.1V6h-3v2.645c-0.967,0.2-1.855,0.578-2.645,1.1L9.988,7.878L7.866,10l1.867,1.867 c-0.522,0.788-0.9,1.677-1.089,2.633H6v3h2.645c0.2,0.956,0.578,1.845,1.1,2.633l-1.878,1.878l2.122,2.122l1.878-1.877 c0.789,0.521,1.678,0.899,2.634,1.089V26h3v-2.655c0.956-0.189,1.833-0.567,2.622-1.089L22,24.133l2.122-2.122l-1.878-1.878 c0.522-0.788,0.9-1.677,1.101-2.633H26z M16,20.5c-2.488,0-4.5-2.022-4.5-4.5c0-2.489,2.012-4.5,4.5-4.5 c2.478,0,4.5,2.011,4.5,4.5C20.5,18.478,18.478,20.5,16,20.5L16,20.5z"/></g></g></svg>';
this._graphics["click-for-sound"]='<svg height="36px" version="1.1" viewBox="0 0 36 36" width="36px"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-svg-13"></use><path class="ytp-svg-fill" d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 Z M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z" id="ytp-svg-13"></path><svg class="ytp-svg-sound-mute-group" style="opacity: 0;"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-svg-14"></use><path class="ytp-svg-fill" d="M 26.11,15.73 24.85,14.5 22.52,16.76 20.20,14.5 18.94,15.73 21.26,18 18.94,20.26 20.20,21.5 22.52,19.23 24.85,21.5 26.11,20.26 23.79,18 l 2.32,-2.26 0,0 z" id="ytp-svg-14"></path></svg></svg>';
this._graphics["share-fb"]='<a id="share-link-fb-'+this._videoId+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="-19.5 60.5 32 32" enable-background="new -19.5 60.5 32 32" xml:space="preserve"><g id="Page-1"><g id="facebook"><path id="Path" fill="#FFFFFF" d="M1.166,76.504h-2.714V86h-4.034v-9.496H-7.5v-3.349h1.918v-2.176c0-1.551,0.758-3.979,4.064-3.979h2.987v3.267h-2.183c-0.452-0.024-0.838,0.313-0.864,0.755c-0.003,0.055,0,0.107,0.008,0.158v1.976H1.5L1.166,76.504z"/></g></g></svg></a>';
this._graphics["share-twitter"]='<a id="share-link-twitter-'+this._videoId+'" target="_blank"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g id="Logo__x2014__FIXED"><g><path fill="#FFFFFF" d="M12.837,25.5c7.613,0,11.776-7.313,11.776-13.642c0-0.206,0-0.411-0.006-0.618c0.807-0.673,1.51-1.523,2.065-2.486c-0.742,0.384-1.542,0.635-2.382,0.757c0.855-0.59,1.511-1.533,1.824-2.655c-0.799,0.553-1.687,0.944-2.632,1.159C22.726,7.08,21.652,6.5,20.464,6.5c-2.284,0-4.141,2.15-4.141,4.796c0,0.375,0.042,0.739,0.106,1.095c-3.439-0.196-6.49-2.113-8.533-5.011C7.542,8.09,7.34,8.912,7.34,9.792c0,1.664,0.734,3.132,1.841,3.991c-0.679-0.027-1.315-0.243-1.874-0.598c0,0.019,0,0.038,0,0.065c0,2.318,1.429,4.264,3.318,4.703c-0.347,0.111-0.71,0.168-1.089,0.168c-0.266,0-0.525-0.025-0.775-0.084c0.525,1.908,2.059,3.292,3.867,3.33c-1.421,1.29-3.206,2.056-5.142,2.056c-0.331,0-0.663-0.021-0.985-0.065C8.324,24.705,10.504,25.5,12.837,25.5"/></g></g></svg></a>';
this._graphics.share2='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path fill="#FFFFFF" d="M21.667,26H6V8.5h15.667V26z M7.294,24.555h13.08V9.945H7.294V24.555z"/><path fill="#FFFFFF" d="M10.432,21.397c0,0,0.447-6.415,3.11-8.591c2.898-2.367,5.095-1.782,5.095-1.782s0.149,0.042-0.262-1.738c-0.425-1.842-0.798-2.441-0.336-2.253c0.462,0.188,7.691,5.727,7.691,5.727s0.546,0.751,0.084,1.127c-0.462,0.376-7.523,5.774-7.523,5.774s-0.672,0.281-0.336-0.845c0.336-1.127,0.631-2.488,0.589-2.911l-0.042-0.423c0,0-2.064-0.333-3.929,1C13.04,17.577,10.432,21.397,10.432,21.397"/></svg>';
this._graphics["play-overlay"]=this._iOS&&10>this._iOS||"undefined"==typeof SVGRect?'<img style="margin:0 auto;" height="50" width="50" src="'+this._settings.api+'player/v3/css/play-overlay.png" />':'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"><g id="XMLID_2_" opacity="1"><path fill="#FFFFFF" d="M26,51.5C11.9,51.5,0.5,40.1,0.5,26C0.5,11.9,11.9,0.5,26,0.5c14.1,0,25.5,11.4,25.5,25.5C51.5,40.1,40.1,51.5,26,51.5z"/><path fill="#FFFFFF" d="M26,1c13.8,0,25,11.2,25,25S39.8,51,26,51S1,39.8,1,26S12.2,1,26,1 M26,0C11.7,0,0,11.7,0,26s11.7,26,26,26 s26-11.7,26-26S40.3,0,26,0L26,0z"/></g><polygon id="XMLID_1_" fill="#333333" points="19.6,37.5 19.6,14.5 37.8,25.5 "/></svg>';
this._ajax.x=function(){if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;for(var b="MSXML2.XmlHttp.6.0 MSXML2.XmlHttp.5.0 MSXML2.XmlHttp.4.0 MSXML2.XmlHttp.3.0 MSXML2.XmlHttp.2.0 Microsoft.XmlHttp".split(" "),a,d=0;d<b.length;d++)try{a=new ActiveXObject(b[d]);break}catch(c){}return a};this._ajax.send=function(b,a,d,c,e,C){try{var t=this.x();t.open(c,b,C);t.data=e;t.onerror=function(){d();console.log("Error loading config.")};t.onreadystatechange=function(){200==t.status?4==t.readyState&&
a&&(a(t.responseText,t.data),t=t.onreadystatechange=null):0!=t.status&&d&&(t=t.onreadystatechange=null,d())};t.send(e)}catch(g){d&&(t&&(t.onreadystatechange=null),d())}};this._ajax.get=function(b,a,d,c){this.send(b,a,d,"GET",c,!0)};this.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var a,d,c,e,C,t,g="",J=0;for(b=this._utf8_encode(b);J<b.length;)a=b.charCodeAt(J++),d=b.charCodeAt(J++),c=b.charCodeAt(J++),e=a>>2,a=(3&a)<<4|d>>4,C=(15&d)<<2|c>>
6,t=63&c,isNaN(d)?C=t=64:isNaN(c)&&(t=64),g=g+this._keyStr.charAt(e)+this._keyStr.charAt(a)+this._keyStr.charAt(C)+this._keyStr.charAt(t);return g},decode:function(b){var a,d,c,e,C,t="",g=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");g<b.length;)a=this._keyStr.indexOf(b.charAt(g++)),d=this._keyStr.indexOf(b.charAt(g++)),e=this._keyStr.indexOf(b.charAt(g++)),C=this._keyStr.indexOf(b.charAt(g++)),a=a<<2|d>>4,d=(15&d)<<4|e>>2,c=(3&e)<<6|C,t+=String.fromCharCode(a),64!=e&&(t+=String.fromCharCode(d)),64!=
C&&(t+=String.fromCharCode(c));return this._utf8_decode(t)},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");for(var a="",d=0;d<b.length;d++){var c=b.charCodeAt(d);128>c?a+=String.fromCharCode(c):127<c&&2048>c?(a+=String.fromCharCode(c>>6|192),a+=String.fromCharCode(63&c|128)):(a+=String.fromCharCode(c>>12|224),a+=String.fromCharCode(c>>6&63|128),a+=String.fromCharCode(63&c|128))}return a},_utf8_decode:function(b){for(var a="",d=0,c=c1=c2=0;d<b.length;)c=b.charCodeAt(d),128>c?(a+=String.fromCharCode(c),
d++):191<c&&224>c?(c2=b.charCodeAt(d+1),a+=String.fromCharCode((31&c)<<6|63&c2),d+=2):(c2=b.charCodeAt(d+1),c3=b.charCodeAt(d+2),a+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),d+=3);return a}};if("undefined"!=typeof window.DOMParser)this.parseXml=function(b){return(new window.DOMParser).parseFromString(b,"text/xml")};else if("undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM"))this.parseXml=function(b){var a=new window.ActiveXObject("Microsoft.XMLDOM");a.async=
"false";a.loadXML(b);return a};else throw Error("No XML parser found");}};a.prototype={init:function(){function b(b){e._configLoaded=!0;b=JSON.parse(b);e._externalConfig=b.items[0];try{e._settings=e.extend(e._settings,e._externalConfig)}catch(a){}e.init()}function a(b){e._configLoaded=!0;e.init()}var e=this;if(this._configLoaded){var c=this.getCookie("djvideovol");""!=c&&(this._volume=c,0>this._volume&&(this._volume=0));c=this.getCookie("djvideolang");""!=c&&(this._langSelected=c);this._iOS&&(this._langSelected=
"");this._bucket="";console.log("v "+this._version+this._bucket);c=this.getCookie("djadplaynum");""!=c&&(this._adPlayNumber=parseInt(c),isNaN(this._adPlayNumber)&&(this._adPlayNumber=0));c=this.getCookie("djvideomute");""!=c&&1==c&&(this._muted=!0);1==this._settings.clickForSound&&(this._muted=!0);c=this.getCookie("djvideobit");""!=c&&(this._selectedBitrate=c);this._mediaHeartbeat||this.setupTracking();this.setupPlayer();"function"==typeof this._settings.callback&&this._settings.callback();this._flashEvents=
{ready:function(b){e._flash=getFlashMovieObject("flash"+e._videoId);e._fPlaying=!1;e._flashInit=!0;e.startVideo()},manifest:function(b,a,d){e._flash.playerPlay(-1);e._controls.style.display="block"},complete:function(b,a,d){},state:function(b,a,d){"PAUSED"==b?(e._fPlaying=!1,e.onPaused(b),e._buffering.style.display="none"):"PLAYING"==b?(e._fPlaying=!0,e.onPlaying(b),e._buffering.style.display="none"):"PAUSED_BUFFERING"==b?(e._fPlaying=!1,e.onPaused(b),e._buffering.style.display="block"):"PLAYING_BUFFERING"==
b&&(e._fPlaying=!0,e.onPlaying(b),e._buffering.style.display="block")},position:function(b,a,d){e.onProgress(b)},error:function(b,a,d){}};this.onHLSMediaAttached=this.onHLSMediaAttached.bind(this);this.onHlsError=this.onHlsError.bind(this);this.onHLSLevelLoaded=this.onHLSLevelLoaded.bind(this);this.onBitrateChange=this.onBitrateChange.bind(this);this.onHLSPlayerBitrateChange=this.onHLSPlayerBitrateChange.bind(this);window.onbeforeunload=this.onPageUnload.bind(this);window["flashlsCallback"+this._videoId]=
function(b,a){e._flashEvents[b].apply(null,a)};return this}try{this._ajax.get(this._settings.api+"player/config/v3/"+this._settings.playerid+".json?callback=cbfn",b,a,null)}catch(g){e._configLoaded=!0}},setupPlayer:function(){var b=this;this._container.className+=" video-player";var a="";this._settings.autoplay&&(this._isMobile||1==this._settings.clickForSound)&&(a=' autoplay="autoplay" muted="muted" ');var e="";this._settings.playInline&&(e=" playsinline");this._settings.loop&&(e+=" loop");this._container.innerHTML=
'<div class="video-wrapper" id="wrapper-'+this._videoId+'" ><div id="flashContainer-'+this._videoId+'" class="flashVideo"></div><video src="" id="videoplayer-'+this._videoId+'" width="100%" height="100%" preload="none" '+a+e+' controls crossorigin="anonymous">Your browser does not support HTML5 video.</video><div class="video-play-overlay" id="video-play-overlay-'+this._videoId+'"></div><div class="video-loading" id="video-loading-'+this._videoId+'"><div class="video-loading-inner"><div></div></div></div><div class="video-adContainer" id="adContainer-'+
this._videoId+'"></div><div class="video-controls" id="video-controls-'+this._videoId+'" >'+this.returnControls()+'</div><div id="video-ad-skip-'+this._videoId+'" class="adSkip"><div class="skipTxt">Skip Ad</div><div class="videoSkipCountdown" id="video-ad-countdown-'+this._videoId+'"> in 15</div><div class="videoSkipIcon" id="videoSkipIcon-'+this._videoId+'"></div></div><img class="wsjvideo_poster" id="poster-'+this._videoId+'" src="" style="position:absolute; top:0;" /><audio width="100%" height="100%" id="audioplayer_'+
this._videoId+'" controls>Your browser does not support the audio tag.</audio><div id="vrWrapper_'+this._videoId+'" class="vrWrapper"></div><div class="video-share" id="video-share-'+this._videoId+'"></div><div class="video-thumb" id="video-thumb-'+this._videoId+'"></div><div class="video-sound" id="video-sound-'+this._videoId+'">'+this._graphics["click-for-sound"]+' <span>Click For Sound</span></div><div class="video-thumb" id="video-thumb-'+this._videoId+'"></div></div>';this._video=document.getElementById("videoplayer-"+
this._videoId);this._video.scope=this;this._wrapper=document.getElementById("wrapper-"+this._videoId);this._wrapper.scope=this;this._buffering=document.getElementById("video-loading-"+this._videoId);this._thumb=document.getElementById("video-thumb-"+this._videoId);this._countdownTxt;this._adContainer=document.getElementById("adContainer-"+this._videoId);this._audio=document.getElementById("audioplayer_"+this._videoId);this._audio.scope=this;this._audioPoster=document.getElementById("poster-"+this._videoId);
this._vrWrapper=document.getElementById("vrWrapper_"+this._videoId);this._clickForSoundScreen=document.getElementById("video-sound-"+this._videoId);this._flashContainer=document.getElementById("flashContainer-"+this._videoId);this._audio.style.display="none";this.setupListeners(!0);if(this._settings.disableHtmlControls)document.getElementById("video-controls-"+this._videoId).style.display="none",this._video.controls=this._settings.fireTv?!1:!0;else{this._controls=document.getElementById("video-controls-"+
this._videoId);this._controls.hideTime=0;this._playOverlay=document.getElementById("video-play-overlay-"+this._videoId);this._playBtn=document.getElementById("video-play-pause-"+this._videoId);this._fullscreenBtn=document.getElementById("video-fullscreen-"+this._videoId);this._volumeBtn=document.getElementById("video-volume-"+this._videoId);this._volumeBtnGraphics=document.getElementById("video-volume-g-"+this._videoId);this._volumeSlider=document.getElementById("video-volume-slider-"+this._videoId);
this._volumeSetting=document.getElementById("video-volume-v-"+this._videoId);this._volumeBG=document.getElementById("video-volume-b-"+this._videoId);this._volumeHandle=document.getElementById("video-volume-h-"+this._videoId);this._timeDisplay=document.getElementById("video-time-"+this._videoId);this._scrubBar=document.getElementById("video-scrub-"+this._videoId);this._scrubProgress=document.getElementById("video-scrub-progress-"+this._videoId);this._adProgress=document.getElementById("video-ad-progress-"+
this._videoId);this._scrubLoaded=document.getElementById("video-scrub-loaded-"+this._videoId);this._shareScreen=document.getElementById("video-share-"+this._videoId);this._shareBtn=document.getElementById("video-share-b-"+this._videoId);this._ccBtn=document.getElementById("video-cc-"+this._videoId);this._bitBtn=document.getElementById("video-bit-"+this._videoId);this._ccList=document.getElementById("captionsList-"+this._videoId);this._bitList=document.getElementById("bitrateList-"+this._videoId);
this._adsSkipButton=document.getElementById("video-ad-skip-"+this._videoId);this._adCountdownText=document.getElementById("video-ad-countdown-"+this._videoId);this._videoSkipIcon=document.getElementById("videoSkipIcon-"+this._videoId);this._twitterBtn=document.getElementById("share-twitter-"+this._videoId);this._fbBtn=document.getElementById("share-fb-"+this._videoId);this._twitterBtn.addEventListener("click",function(){b._video.pause();window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent(b._videodata.linkURL)+
"&text="+encodeURIComponent(b._videodata.name),"targetWindow","toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250");b.trackShare({share:"Twitter"})});this._fbBtn.addEventListener("click",function(a){b._video.pause();window.open("https://www.facebook.com/sharer/sharer.php?u="+b._videodata.linkURL+"&t="+b._videodata.name,"targetWindow","toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250");b.trackShare({share:"Facebook"})});
this._ccBtn.style.display="none";if(this._isIpad||this._isAndroid)this._volumeBtn.style.display="none",this._bitBtn.style.display="none";this._settings.shareEnabled||(this._shareBtn.style.display="none",this._twitterBtn.style.display="none",this._fbBtn.style.display="none");this._adsSkipButton.display="none";this._bitBtn.style.display="none";this.addUserEventListeners();this._video.controls=!1}this._height=this._wrapper.offsetHeight;this._width=this._wrapper.offsetWidth;this._container._self=this;
this._container.resumeVideo=this.eResumeVideo;this._container.pauseVideo=this.ePauseVideo;this._container.playVideo=this.ePlayVideo;this._container.killVideo=this.eKillVideo;this._container.loadVideo=this.eLoadVideo;this._container.setMute=this.eMute;this._container.updatePlaylist=this.eUpdatePlaylist;this._container.isPlaying=this.eIsPlaying;this._container.getStatus=this.eGetStatus;this._container.vidoraShownList=this.eVidoraShownList;this._container.seek=this.eSeek;(this._settings.guid||""!==this._settings.type&&
""!==this._settings.query)&&this.loadVideo(!1);this._isMobile?this._settings.clickForSound?"disabled"===this._settings.clickForSound&&this.muteUnMute(!0,!1):(this.muteUnMute(!1,!0),this.setVolume(1,!0)):(this.muteUnMute(this._muted,!1),this.onMuteUnMute(this),this.setVolume(this._volume,!1));var c=function(a){b._clickForSoundScreen.style.display="none";b._clickForSoundEnabled=!1;b._video.muted=!1;b._controls&&(b._controls.style.display="block");b._settings.adsEnabled&&(b._adDisplayContainer.initialize(),
b.requestAds());b._wrapper.removeEventListener("click",c,!1)};this._settings.clickForSound&&"disabled"!==this._settings.clickForSound?(this._clickForSoundEnabled=!0,this._controls&&(this._controls.style.display="none"),this._wrapper.addEventListener("click",c)):this._clickForSoundScreen.style.display="none";0!=this._iOS?(this._video.addEventListener("webkitendfullscreen",function(a){b.onScreenChange(a)}),this._video.addEventListener("webkitbeginfullscreen",function(a){b.onScreenChange(a)})):this._wrapper.addEventListener(screenfull.raw.fullscreenchange,
function(a){b.onScreenChange(a)});this.onResize()},initVideo:function(){var b=this;this._contentInitialized=!1;if(this._settings.adsEnabled&&!this._adsBlocked){if("undefined"===typeof google){this.loadScript(this._settings.imaLibrary,function(){b.initVideo()},function(){b._adsBlocked=!0;b.initVideo()});return}}else this._adContainer.style.display="none";this._settings.useHLS&&"undefined"===typeof Hls?(this._hlsLoadAttempted=!0,this.loadScript(this._settings.api+"player/v3/js/hls.min.js",function(){b.initVideo()},
function(){b._settings.useHLS=!1;b.initVideo()})):("469"==this._videodata.doctypeID&&(this._settings.chainVideos=!1),"future"==this._videodata.state?(this._startTime=new Date,end=new Date((new Date).valueOf()+1E3*this._videodata.secondsUntilStartTime),this._videodata.videoStillURL&&(this._container.style.backgroundImage="url("+this._videodata.videoStillURL+")"),this._videoMsg=document.createElement("div"),this._videoMsg.innerHTML='<p class="videoMsg">This video will play automatically in: <span id="countdown_'+
this._videoId+'"></span></p>',this._container.appendChild(this._videoMsg),this._buffering.style.display="none",this._wrapper.style.display="none",this._countdownTxt=document.getElementById("countdown_"+this._videoId),this.showRemaining(),this._futureTimer=setInterval(function(){b.showRemaining()},1E3)):(this._settings.adsEnabled&&!this._adsBlocked&&(this._adDisplayContainer=new google.ima.AdDisplayContainer(this._adContainer,this._video),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),
this._settings.vpaidEnabled?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE):google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(a){b.onAdsManagerLoaded(a)},!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(a){b.onAdError(a)},!1),this._buffering.style.display="block"),this.trigger(this._wrapper,"onInitialize",
this._videodata),this.createMark("playerReady"),this._settings.autoplay?this.startVideo():b._settings.isAudio||this.setupThumbnail()))},addHLSEventListeners:function(){this._hlsPlayer.off(Hls.Events.MEDIA_ATTACHED,this.onHLSMediaAttached);this._hlsPlayer.off(Hls.Events.ERROR,this.onHlsError);this._hlsPlayer.off(Hls.Events.LEVEL_LOADED,this.onHLSLevelLoaded);this._hlsPlayer.off(Hls.Events.LEVEL_SWITCHED,this.onBitrateChange);this._hlsPlayer.on(Hls.Events.MEDIA_ATTACHED,this.onHLSMediaAttached);this._hlsPlayer.on(Hls.Events.ERROR,
this.onHlsError);this._hlsPlayer.on(Hls.Events.LEVEL_LOADED,this.onHLSLevelLoaded);this._hlsPlayer.on(Hls.Events.LEVEL_SWITCHED,this.onHLSPlayerBitrateChange)},onHLSMediaAttached:function(b,a,e,c){this._hlsPlayer.loadSource(this._videodata.hlsNoCaptions)},onHLSLevelLoaded:function(b,a){this._duration=a.details.totalduration},onHLSPlayerBitrateChange:function(b,a){this.onBitrateChange(b,a)},onHlsError:function(b,a){if(a.fatal||"bufferAppendingError"==a.details)switch(this.onVideoError(this._videodata.guid+
" Fatal: "+a.fatal+" - "+a.details),a.type){case Hls.ErrorTypes.MEDIA_ERROR:this._hlsPlayer.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:this._hlsPlayer.startLoad();break;default:this._hlsPlayer.destroy()}if(a.details==Hls.ErrorDetails.BUFFER_STALLED_ERROR)this.onBuffering(b)},setupTracking:function(){var b=this;svid=s_gi(this.getTrackingAccount());svid.linkTrackVars="pageName,events,channel,prop1,prop19,eVar3,eVar4,eVar5,eVar10,eVar11,eVar21,eVar26,eVar32,eVar38,eVar52,eVar53,eVar68";
svid.trackingServer="om.dowjoneson.com";svid.trackingServerSecure="oms.dowjoneson.com";svid.charSet="ISO-8859-1";svid.currencyCode="USD";svid.trackDownloadLinks=!0;svid.trackExternalLinks=!1;svid.trackInlineStats=!0;svid.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";svid.linkInternalFilters="javascript:,wsj.com,wallstreetjournal.com,bankrate.com,smartmoney.com,barrons.com,marketgauge.com,marketwatch.com,bigcharts.com,virtualstockexchange.com,hulbertinteractive.com,collegejournal.com,careercast.com,careerjournal.com,careerjournalasia.com,realestatejournal.com,loopnet.com,opinionjournal.com,politicaldiary.com,startupjournal.com,homefair.com,myplan.com,contacts.zoominfo.com,secure.theladders.com,selectrecruiters.com,kennedyinfo.com,allisontaylor.com,wsj.careerdev.org,wsj.resumeedge.com,newhomesource.com,blacksguide.com,rej.informars.com,wsj.miniplan.com,wsj.knowledgestorm.com,entrepreneur.com,toolkit.prnewswire.com,tsnn.com,allthingsd.com,traffic.outbrain.com,fins.com,wallstreetjournal.de";
svid.linkLeaveQueryString=!1;svid.visitor=f;svid.getPersistQueryParamID=new Function("param","var s=this;var id=s.Util.getQueryParam(param);if(id){var d=new Date;d.setFullYear(d.getFullYear()+2);s.Util.cookieWrite('app_'+param,id,d);}if(!id){id=s.Util.cookieRead('app_'+param);}return id;");svid.visitor&&(svid.visitor.setMarketingCloudVisitorID(svid.getPersistQueryParamID("mid")),svid.getPersistQueryParamID("aid")&&svid.visitor.setAnalyticsVisitorID(svid.getPersistQueryParamID("aid")));svid.visitorID=
svid.getPersistQueryParamID("vid");try{0==window.location.indexOf("https://")&&(svid.ssl=!0)}catch(a){}var e=ADB.va.MediaHeartbeat,c=ADB.va.MediaHeartbeatConfig,g=ADB.va.MediaHeartbeatDelegate,f=Visitor.getInstance("CB68E4BA55144CAA0A4C98A5@AdobeOrg",{trackingServer:"om.dowjoneson.com",trackingServerSecure:"oms.dowjoneson.com",marketingCloudServer:"om.dowjoneson.com",marketingCloudServerSecure:"oms.dowjoneson.com"});this._appMeasurement=new AppMeasurement;this._appMeasurement.visitor=f;this._appMeasurement.trackingServer=
"om.dowjoneson.com";this._appMeasurement.trackingServerSecure="oms.dowjoneson.com";this._appMeasurement.account=this._account;this._appMeasurement.charSet="UTF\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac \u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac\u00c3\u2026\u00c2\u00a1\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bf\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac\u00c3\u2026\u00c2\u00a1\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bd8";
this._mediaHeartbeatConfig=new c;this._mediaHeartbeatConfig.trackingServer="dowjones.hb.omtrdc.net";this._mediaHeartbeatConfig.playerName="Web";this._settings.fireTv&&(this._mediaHeartbeatConfig.playerName="Amazon Fire TV");this._mediaHeartbeatConfig.channel=this.getChannel();this._mediaHeartbeatConfig.debugLogging=!1;this._mediaHeartbeatConfig.appVersion="v "+this._version;this._mediaHeartbeatConfig.ssl=!0;this._mediaHeartbeatConfig.ovp="Custom Html Player";this._mediaHeartbeatDelegate=new g;this._mediaHeartbeatDelegate.getCurrentPlaybackTime=
function(){return b._currentTime};this._mediaHeartbeatDelegate.getQoSObject=function(){var a=b.getQOSData();return e.createQoSObject(a.bitrate,a.startuptime,a.fps,a.droppedframes)};this._mediaHeartbeat=new e(this._mediaHeartbeatDelegate,this._mediaHeartbeatConfig,this._appMeasurement);c=this._convivaTestMode?this.getTestingSystemSettings():this.getProductionSystemSettings();g=new Conviva.SystemInterface(new WSJVideoConviva.Html5Time,new WSJVideoConviva.Html5Timer,new WSJVideoConviva.Html5Http,new WSJVideoConviva.Html5Storage,
new WSJVideoConviva.Html5Metadata,new WSJVideoConviva.Html5Logging);this._convivaSystemFactory=new Conviva.SystemFactory(g,c);this._convivaTestMode?(c=new Conviva.ClientSettings(this._convivaTestCustomerKey),c.gatewayUrl=this._convivaServiceURL):c=new Conviva.ClientSettings(this._convivaProdCustomerKey);this._convivaClient=new Conviva.Client(c,this._convivaSystemFactory)},getTrackingAccount:function(){var b="djglobal,djwsj",a=!1;try{var e=location.search.split("oAccount=")[1];this._settings.oAccount&&
(this._settings.sAccount=this._settings.oAccount);this._settings.sAccount&&(e=this._settings.sAccount);e&&(b=e,a=!0)}catch(c){}if(!a){b="djglobal,djwsj";try{var g=window.location!=window.parent.location?document.referrer:document.location.href;-1!==g.indexOf("wsj.com")&&(b="djglobal,djwsj");-1!==g.indexOf("live.wsj.com")&&(b="djglobal,djwsjlive");-1!==g.indexOf("cwsj.com")&&(b="djglobal,djwsjchina");-1!==g.indexOf("cn.wsj.com")&&(b="djglobal,djwsjchina");-1!==g.indexOf("jwsj.com")&&(b="djglobal,djjapanwsj");
-1!==g.indexOf("kr.wsj.com")&&(b="djglobal,djwsjkorea");-1!==g.indexOf("indo.wsj.com")&&(b="djglobal,djwsjindonesia");-1!==g.indexOf("marketwatch.com")&&(b="djglobal,djmarketwatch");-1!==g.indexOf("barrons.com")&&(b="djglobal,djbarrons");-1!==g.indexOf("wsj.de")&&(b="djglobal,djwsjgermany");-1!==g.indexOf("allthingsd.com")&&(b="djglobal,djatd");-1!==g.indexOf("wsj.com.tr")&&(b="djglobal,djwsjturkey");-1!==g.indexOf("efinancialnews.com")&&(b="djglobal,djefinancialnews");-1!==g.indexOf("mansionglobal.com")&&
(b="djmansionglobal");-1!==g.indexOf("twitter.com/i/cards")&&(b="djglobal,djwsjlive");-1!==g.indexOf("heatst.com")&&(b="djheatstreetprod")}catch(f){b="djglobal,djwsjlive"}}return b},onCCSelected:function(b,a,e){var c=this;e&&(this._langSelected=b,document.cookie="djvideolang="+this._langSelected+"; path=/");if(this._videodata){e=s_gi(this._account);var g=""===b?"CC OFF":"CC ON "+b;e.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.video.closed.captioning,contextData.action,eVar15";
e.contextData["a.media.friendlyName"]=this._videodata.name;e.contextData["a.media.name"]=this._videodata.guid;e.contextData["video.closed.captioning"]=g;e.contextData.action="video.closed.captioned";e.eVar15=g;e.tl(!0,"o",""===b?"heartbeat_video closed captioned off":"heartbeat_video closed captioned on")}for(;this._video.firstChild;)this._video.removeChild(this._video.firstChild);b=document.createElement("track");b.kind="subtitles";b.label="English";b.srclang="en";b.mode="showing";this._video.appendChild(b);
this._video.tTrack=b;b.addEventListener("load",function(){this.mode="showing";try{c._video.textTracks[0].mode="showing"}catch(b){}try{var a=c._video.textTracks[0].cues;for(v in a)"auto"==a[v].line&&(a[v].line=-3)}catch(d){}});b.addEventListener("error",function(b,a){console.log("Captions failed to load.")});try{this._video.textTracks[0].mode="showing"}catch(f){}b.src=a;this.onCloseCC()},loadCaptions:function(){var b=this;for(this._availableCaptions=[];this._video.firstChild;)this._video.removeChild(this._video.firstChild);
this._ccBtn&&(this._ccBtn.style.display="none");this._videodata.forceClosedCaptions?""==this._langSelected&&(this._langSelected="English"):this._langSelected=this.getCookie("djvideolang");var a=function(a,d){b._ccBtn&&(b._ccBtn.style.display="block");var c={id:d.url,lang:d.label};b._availableCaptions.push(c);2>b._availableCaptions.length&&""!=b._langSelected&&(b._ccBtn.innerHTML=b._graphics["cc-active"]);if(c.lang==b._langSelected)b.onCCSelected(c.lang,c.id,!1)},e=function(b,a){console.log("Captions failed to load.")};
if(null!==this._videodata.captionsVTT)for(var c=this._videodata.captionsVTT,g=0;g<c.length;g++)this._ajax.get(c[g].url,a,e,c[g])},eVidoraShownList:function(b){for(gid in b)try{window.vidora.push(["send","shown",b[gid]])}catch(a){}},startVideo:function(b){var a=this;this._thumb.style.display="none";this._playRequested=!0;this.setTrackingVars();this.createNewConvivaSession();this._controls&&(this._controls.style.display="block");if(this._isIE&&("live"==this._videodata.state||"processing"==this._videodata.state)&&
(this._controls.style.display="none",!this._flashInit)){this._buffering.style.display="none";this._flashContainer.innerHTML='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="" id="flash'+this._videoId+'" width="100%" height="100%"><param name="movie"  value="'+this._settings.api+'player/v3/flashlsChromeless.swf?inline=1" /><param name="quality" value="autohigh" /><param name="swliveconnect" value="true" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#0" /><param name="allowFullScreen" value="false" /><param name="wmode" value="opaque" /><param name="FlashVars" value="callback=flashlsCallback'+
this._videoId+'" /><embed src="'+this._settings.api+'player/v3/flashlsChromeless.swf?inline=1" width="100%" height="100%" style="position:absolute; z-index:1;" name="flash'+this._videoId+'" quality="autohigh" bgcolor="#0" align="middle" allowFullScreen="false" allowScriptAccess="always" type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" FlashVars="callback=flashlsCallback'+this._videoId+'" pluginspage="https://www.macromedia.com/go/getflashplayer" ></embed></object><div class="getFlash"><strong>Live video is not supported on IE wihtout Flash enabled.</strong><p>Install and enable Flash or use Chrome / Firefox</p><p><a href="https://get.adobe.com/flashplayer/">Get Flash Player</a></p></div>';
this._flashContainer.style.display="block";return}this._adsManager&&this._adsManager.stop();"live"==this._videodata.state&&this._controls&&(this._shareBtn.style.display="none",this._twitterBtn.style.display="none",this._fbBtn.style.display="none",this._ccBtn.style.display="none",this._buffering.style.display="block",1==this._videodata.disableDVR||0==this._videodata.duration)&&(this._timeDisplay.innerHTML=" Loading.. ",this._scrubBar.style.display="none");this.setVideoSource();this._video.load();a._settings.adsEnabled&&
!this._adsBlocked&&a._adDisplayContainer.initialize();if("vr"==this._videodata.format)if(this._isIE||this._isSafariMac&&window==window.top)this.displayVrMsg();else{this.initVrPlayback(this._vrWrapper);console.log("Loading VR Libs..");return}else this._vrWrapper.style.display="none",this._video.style.display="block";this._sizeTimer||(this._sizeTimer=setInterval(function(){a.checkStatus()},500));if(this._adsBlocked)this.onAdError(null);else this._settings.adsEnabled||this.trackAdsDisabled("false");
a._video.autoplay="autoplay";a._thumb&&(a._thumb.style.display="none");if(a._isAudio){b=a._audio.play();var e=a.getThumbnail();a._audioPoster.src=e}else b=a._video.play();void 0!==b?b.then(function(b){a.onNewVideo();!a._settings.adsEnabled||a._adsBlocked||a._clickForSoundEnabled||"1"===a._videodata.catastrophic||"catastrophic"===a._videodata.adCategory||(a._settings.adsEnabled&&!this._adsBlocked&&a._adDisplayContainer.initialize(),a._video.pause(),a.requestAds())},function(b){a._autoplayFailed=!0;
if("AbortError"!=b.name)a._clickForSoundScreen.style.display="none",a.setupThumbnail();else a.onNewVideo()}):(a.onNewVideo(),!a._settings.adsEnabled||a._adsBlocked||a._clickForSoundEnabled||"1"===a._videodata.catastrophic||"catastrophic"===a._videodata.adCategory||(a._settings.adsEnabled&&!this._adsBlocked&&a._adDisplayContainer.initialize(),a._video.pause(),a.requestAds()));try{this._comscoreTag.stop(),this._comscoreTag.playContentPart(this._comscoreMeta)}catch(c){}},setVideoSource:function(){var b=
this;if(this._flash)this._video.setAttribute("src",""),this._flash.playerLoad(this._videodata.hlsNoCaptions);else{this._hlsAvailable=!1;if(this._isAudio)this._videodata.audioURLPanoply?this._audio.setAttribute("src",this._videodata.audioURLPanoply):this._audio.setAttribute("src",this._videodata.audioURL);else if(this._isSafariMac&&"vr"==this._videodata.format){var a=this._videodata.videoMP4List[3].url.replace(/^https?\:\/\//i,"");this._video.setAttribute("src","//"+window.location.hostname+"/"+a)}else if(0!=
this._iOS||this._settings.fireTv||this._isSafariMac||4.4<=this._androidV)this._video.setAttribute("src",this._videodata.hlsNoCaptions),this._video.setAttribute("src",this._videodata.hlsNoCaptions);else if(this._settings.useHLS)if(this._hlsPlayer){var e=function(){b._hlsPlayer.off(Hls.Events.MEDIA_DETACHED,e);b._video.src=b._videodata.hlsNoCaptions;b._hlsPlayer=new Hls(b.hlsConfig);b.addHLSEventListeners();b._hlsPlayer.attachMedia(b._video)};this._hlsPlayer.on(Hls.Events.MEDIA_DETACHED,e);this._hlsPlayer.destroy()}else this._hlsPlayer=
new Hls(this.hlsConfig),this.addHLSEventListeners(),this._hlsPlayer.attachMedia(this._video);else this._videodata.video664kMP4Url?this._video.setAttribute("src",this._videodata.video664kMP4Url):this._videodata.videoMP4List[2]?this._video.setAttribute("src",this._videodata.videoMP4List[2].url):this._video.setAttribute("src",this._videodata.videoMP4List[0].url);this.onResize()}},getQOSData:function(){var b={};this._hlsPlayer&&-1!=this._hlsPlayer.currentLevel&&(b={bitrate:this._hlsPlayer.levelController._levels[this._hlsPlayer.currentLevel].bitrate,
startuptime:this._startupTime,fps:30,droppedframes:this._hlsDroppedFrames});return b},convivaClientMeasureInterface:function(b){this.getPHT=function(){return parseInt(b._currentTime)};this.getBufferLength=function(){return b._isAudio?b._audio.buffered.length:b._video.buffered.length};this.getSignalStrength=function(){return 1E3};this.getRenderedFrameRate=function(){return 30}},showRemaining:function(){var b=(new Date).getTime()-this._startTime.getTime(),a=end-new Date(this._startTime.valueOf()+b);
if(0>a)clearInterval(this._futureTimer),this._countdownTxt.innerHtml="Loading...",this._videodata.state="flive",this._wrapper.style.display="block",this._settings.autoplay=!0,this._videoMsg.parentNode.removeChild(this._videoMsg),this.initVideo();else{var b=Math.floor(a/36E5),e=Math.floor(a%36E5/6E4),a=Math.floor(a%6E4/1E3),c="";0<b&&(c+=("0"+b).slice(-2)+":");0<e&&(c+=("0"+e).slice(-2)+":");c+=("0"+a).slice(-2);this._countdownTxt&&(this._countdownTxt.innerHTML=c)}},trackAdsDisabled:function(b,a){var e=
{start:"false",blocker:b,disabled:"true",podFriendlyName:"pre-roll"},c=ADB.va.MediaHeartbeat.createAdBreakObject("pre-roll",1,0);c.setValue(ADB.va.MediaHeartbeat.MediaObjectKey.StandardAdMetadata,{});this._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.AdStart,c,e)},checkStatus:function(){if(this._width!=this._wrapper.offsetWidth||this._height!=this._wrapper.offsetHeight)this.onResize();this._video.offsetHeight!=this._wrapper.offsetHeight&&(this._video.style.height=this._wrapper.offsetHeight+
"px");this._controls&&this._wrapper.parentElement.querySelector(":hover")!==this._wrapper&&(this.onCloseCC(),this.onCloseBit())},loadVideo:function(b){try{var a=this._self;this._video.pause();this._buffering.style.display="block";this._adsManager&&this._adsManager.stop();var e=function(c){c=JSON.parse(c);a._videodata=c.items[0];if("audio"==a._videodata.type||"podcast"==a._videodata.type)a._isAudio=!0;a._duration=a._videodata.duration;try{a._settings.guid=a._videodata.guid}catch(f){}a._settings.msrc&&
(a._videodata.msrc=a._settings.msrc);a._videodata.error?(a.showError(a._videodata.error),a.onVideoError(a._videodata.error)):b?a.startVideo():a.initVideo()},c=function(b){a.showError("");a.onVideoError("guid load error")},g="";this._settings.useHttps&&(g="&https=1");var f="";this._settings.guid?f=this._settings.api+"find_all_videos.asp?type=guid&count=1"+g+"&query="+this._settings.guid+"&"+this._fields:""!==this._settings.type&&""!==this._settings.query&&(f=this._settings.api+"find_all_videos.asp?type="+
this._settings.type+"&count=1"+g+"&query="+this._settings.query+"&"+this._fields,""!==this._settings.groupId&&(f+="&groupid="+this._settings.groupId))}catch(q){}this._ajax.get(f,e,c,null)},returnControls:function(b){b="";this._settings.disableHtmlControls||(b+='<button class="video-play-pause f-l" id="video-play-pause-'+this._videoId+'">'+this._graphics.play+"</button>",b+='<div class="video-volume f-l" id="video-volume-'+this._videoId+'"><div class="video-volume-slider" id="video-volume-slider-'+
this._videoId+'"><div id="video-volume-b-'+this._videoId+'" class="video-volume-b"></div><div id="video-volume-v-'+this._videoId+'" class="video-volume-v"></div><div id="video-volume-h-'+this._videoId+'" class="video-volume-h"></div></div><span class="video-volume-g-videoplayer" id="video-volume-g-'+this._videoId+'">'+this._graphics["volume-full"]+"</span></div>",b+='<div class="video-time f-l" id="video-time-'+this._videoId+'">0:00 / 0:00</div>',b+='<button class="video-fullscreen f-r" id="video-fullscreen-'+
this._videoId+'">'+this._graphics.fullscreen+"</button>",b+='<button class="video-share-b f-r" id="video-share-b-'+this._videoId+'">'+this._graphics.share+"</button>",b+='<button class="video-bit f-r" id="video-bit-'+this._videoId+'">'+this._graphics.bitrate+"</button>",b+='<button class="video-cc f-r" id="video-cc-'+this._videoId+'">'+this._graphics.cc+"</button>",b+='<button class="share-fb f-r" id="share-fb-'+this._videoId+'">'+this._graphics["share-fb"]+"</button>",b+='<button class="share-twitter f-r" id="share-twitter-'+
this._videoId+'">'+this._graphics["share-twitter"]+"</button>",b+='<div class="bitrateList" id="bitrateList-'+this._videoId+'"></div>',b+='<div class="captionsList" id="captionsList-'+this._videoId+'"></div>',b+='<div class="video-scrub video-scrub-hover" id="video-scrub-'+this._videoId+'"><div class="video-scrub-padding"></div><div class="video-scrub-loaded" id="video-scrub-loaded-'+this._videoId+'"></div><div class="video-scrub-background"></div><div class="video-ad-progress" id="video-ad-progress-'+
this._videoId+'"></div><div class="video-scrub-progress" id="video-scrub-progress-'+this._videoId+'"></div></div>');return b},getAdTag:function(){var b=new google.ima.AdsRequest;if(this._settings.adTag)b.adTagUrl=this._settings.adTag;else{var a=[];a.site=""!=this._settings.site&&"undefined"!=typeof this._settings.site?this._settings.site:"video.wsj.com";a.plid=this._settings.plid?this._settings.plid:this._videodata.plid?this._videodata.plid:"video_articleembed";a.gptParams=this._videodata.gptCustParams;
if(this._settings.lnid){var e=a.gptParams.split("%26lnid%3D");0<e.length&&(a.gptParams=e[0]+"%26lnid%3D"+this._settings.lnid)}e="%26sub%3Dno";try{this.getCookie("REMOTE_USER")&&(e="%26sub%3Dyes")}catch(c){}var g="";this._settings.msrc&&(g="%26msrc%3D"+this._settings.msrc);var f="Cheddar"==this._videodata.column?"/Cheddar":"";(new Date).getTime();b.adTagUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=4x4&gdfp_req=1&iu=/2/"+a.site+f+"&ciu_szs=300x50,300x600,300x250&url=[referrer_url]&correlator=[timestamp]&env=vp&unviewed_position_start=1&output=vast&impl=s&hl=en&cust_params="+
a.gptParams+g+"%26adview%3D"+this._adPlayNumber+e+"%26flash%3Dno%26plid%3D"+a.plid}b.adType="video";return b},getThumbnail:function(){try{if(this._settings.thumb)return this._settings.thumb;if(this._videodata.thumbnailList){var b=!1,a=this._videodata.thumbnailList,e=1<this._width/this._height?1:0;i=0;for(len=a.length;i<len;i+=1)if(a[i].width>this._width&&(b=a[i].url),!(1==e&&1>a[i].aspectRatio||0==e&&1<a[i].aspectRatio)&&a[i].width>this._width)return a[i].url;return b?b:this._videodata.thumbnailList[this._videodata.thumbnailList.length-
1].url}return this._videodata.thumbnailURL}catch(c){return this._videodata.thumbnailURL}},setupSafariThumbnail:function(b){this._safariInit=!0;var a=this;b=this.getThumbnail();try{this._isVertical&&Math.round(this._width/2)}catch(e){}b='<div class="vidThumb" style="background-image:url('+b+');">'+('<div class="video-thumb-content"><div id="video-thumb-hint-'+this._videoId+'" class="video-hint">'+this._graphics["play-overlay"]+"</div></div>");this._thumb.innerHTML=b;this.onResize();this._safariHandler=
function(b){a._safariInit=!0;a._thumb.style.display="none";a.playPause()};this._thumb.removeEventListener("click",this._safariHandler,!1);this._thumb.addEventListener("click",this._safariHandler,!1);this._thumb.style.display="block"},setupThumbnail:function(b){var a=this;b=this.getThumbnail();try{this._isVertical&&Math.round(this._width/2)}catch(e){}var c='<div class="vidThumb"><div class="video-thumb-content"><div id="video-thumb-hint-'+this._videoId+'" class="video-hint">'+this._graphics["play-overlay"]+
"</div>";this._settings.suppressHeadline||(c+='<div id="video-thumb-text-'+this._videoId+'" class="video-thumb-text"><span class="video-title">'+this._videodata.name+"</span></div>");c+='<img style="width: 100%; object-fit: cover;" id="video-thumb-img-'+this._videoId+'" />';this._thumb.innerHTML=c+"</div>";this._thumbImage=document.getElementById("video-thumb-img-"+this._videoId);this._thumbContent=document.getElementById("video-thumb-text-"+this._videoId);this._thumbHint=document.getElementById("video-thumb-hint-"+
this._videoId);this._thumbDuration=document.getElementById("video-duration-"+this._videoId);this._thumbImage.onload=function(){a.createMark("playerDisplayed")};this._thumbImage.src=b;this.onResize();var g=function(b){a.startVideo(b);a._isAndroid&&a._settings.startFullScreen&&!a._isFullScreen&&a.toggleFullScreen();a._thumb.removeEventListener(b.type,g,!1);a._thumb.onmouseover=null;a._thumb.onmouseout=null};this._thumb.addEventListener("click",g);this._isIpad||(this._thumb.onmouseover=function(b){a._thumbHint&&
(a._thumbHint.origHeight||(a._thumbHint.origHeight=a._thumbHint.offsetHeight),a._thumbHint.style.height=a._thumbHint.origHeight+5+"px")},this._thumb.onmouseout=function(b){a._thumbHint&&(a._thumbHint.style.height=a._thumbHint.origHeight+"px")});this._thumb.style.display="block";this._video.style.display="none";this._playOverlay&&(this._playOverlay.style.display="none")},showError:function(b){this._wrapper.innerHTML='<p class="videoMsg">We are sorry, we are unable to load this video.<br /><span>'+
b+"</span></p>"},requestAds:function(){var b=this.getAdTag();this._adTagUsed=b.adTagUrl;b.linearAdSlotWidth=this._width;b.linearAdSlotHeight=this._height-40;b.nonLinearAdSlotWidth=this._width;b.nonLinearAdSlotHeight=this._height-40;this._adsLoader.requestAds(b);this.startAdTimeoutTimer();this.trigger(this._wrapper,"adRequested")},onAdsManagerLoaded:function(b){if(this._adTimeoutTimer&&(clearInterval(this._adTimeoutTimer),1==this._adTimeoutFail)){this._adTimeoutFail=!1;return}var a=new google.ima.AdsRenderingSettings;
a.loadVideoTimeout=3E3;a.mimeTypes=["video/mp4"];a.restoreCustomPlaybackStateOnAdBreakComplete=!0;a.uiElements=[google.ima.UiElements.AD_ATTRIBUTION];this._adsManager=b.getAdsManager(this._video,a);this._muted?this._adsManager.setVolume(0):this._adsManager.setVolume(this._volume);this._adsManager.setVolume(0);this._adsManager.init(this._width,this._height,google.ima.ViewMode.NORMAL);this.adListeners();this._adMode=!0;this._adsManager.start()},onBuffering:function(b){var a=this;a._mediaHeartbeat||
(a=a.scope);a._buffering&&(a._buffering.style.display="block");"stalled"==b.type&&(a._isStalled=!0,a._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.BufferStart))},onProgress:function(b){var a=0;this.scope||(this.scope=this);this.scope._isStalled&&this.scope._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.BufferComplete);this.scope._isStalled=!1;if(!this.scope._adMode){var e=this.scope._videodata.duration,c=this.scope._video.currentTime;this.scope._flash&&(e=b.duration,c=b.position);
this.scope._controls&&this.scope._isMobile&&c>this.scope._controls.hideTime+3&&(this.scope._controls.style.display="none");"live"!=this.scope._videodata.state&&"flive"!=this.scope._videodata.state||!this.scope._controls?(this.scope._isAudio?(this.scope._currentTime=this.scope._audio.currentTime,0<this.scope._audio.buffered.length&&(a=this.scope._audio.buffered.end(this.scope._audio.buffered.length-1)/this.scope._duration)):this.scope._currentTime=c,this.scope._buffering&&1<this.scope._currentTime&&
(this.scope._buffering.style.display="none"),b=this.scope._currentTime/this.scope._duration*100,this.scope.trackProgress(b,this.scope._currentTime),this.scope._scrubProgress&&(this.scope._scrubProgress.style.width=b+"%"),this.scope._scrubLoaded&&(this.scope._scrubLoaded.style.width=a+"%"),this.scope._timeDisplay&&(this.scope._timeDisplay.innerHTML=this.scope.gTimeFormat(this.scope._currentTime)+" / "+this.scope.gTimeFormat(this.scope._duration))):(this.scope._duration=e,this.scope._shareBtn.style.display=
"none",this.scope._ccBtn.style.display="none",this.scope._buffering.style.display="none",this.scope._playBtn.style.display="block",this.scope._timeDisplay.innerHTML=" LIVE ",this.scope._scrubBar.style.display="none")}},onLoadedmetadata:function(b){"live"==this.scope._videodata.state&&(this.scope._duration=this.duration)},createNewConvivaSession:function(){null!==this._convivaContentSessionKey&&(this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null);
this._convivaPlayerStateManager?this._convivaPlayerStateManager.reset():this._convivaPlayerStateManager=this._convivaClient.getPlayerStateManager();this.setConvivaMetaData();this._convivaContentSessionKey=this._convivaClient.createSession(this._convivaContentMetadata);var b=new this.convivaClientMeasureInterface(this);this._convivaPlayerStateManager.setClientMeasureInterface(b);this._convivaPlayerStateManager&&(this._convivaPlayerStateManager.setPlayerType("Universal Player"),this._convivaPlayerStateManager.setPlayerVersion(this._version),
b=this.getQOSData(),this._convivaPlayerStateManager.setBitrateKbps(Math.round(parseInt(b.bitrate)/1E3)));this._convivaHtml5PlayerInterface=new WSJVideoConviva.Html5PlayerInterface(this._convivaPlayerStateManager,this._video,this._convivaSystemFactory)},onNewVideo:function(){this._contentStartTracked&&this._mediaHeartbeat&&this._mediaHeartbeat.trackSessionEnd();this._contentStartTracked=!1;this._contentInitialized=!0;this._adStarted=this._adErrorTracked=!1;this._duration=this._videodata.duration;this.trigger(this._wrapper,
"newVideo",this._videodata);this.trigger(this._wrapper,"onNewVideo",this._videodata);this.trackInit();"1"===this._videodata.catastrophic&&this.trackAdsDisabled("true");!1!==this._adErrorEvent&&(this._adErrorEvent=!1,this.onAdError(this._adErrorEvent));this._trackingMilestones=[!1,!1,!1,!1];this._pingMilestone=-1;this._settings.thumb=!1;this._controls&&(this._controls.hideTime=0);this._settings.enableCaptions&&!this._flash?this.loadCaptions():this._ccBtn&&(this._ccBtn.style.display="none")},setupListeners:function(b){this._video.removeEventListener("loadedmetadata",
this.onLoadedmetadata);this._video.removeEventListener("timeupdate",this.onProgress);this._video.removeEventListener("onerror ",this.onVideoError);this._video.removeEventListener("playing",this.onPlaying);this._video.removeEventListener("pause",this.onPaused);this._video.removeEventListener("ended",this.onVideoComplete);this._audio.removeEventListener("timeupdate",this.onProgress);this._audio.removeEventListener("playing",this.onPlaying);this._audio.removeEventListener("pause",this.onPaused);this._audio.removeEventListener("loadedmetadata",
this.onLoadedmetadata);this._audio.removeEventListener("ended",this.onVideoComplete);this._isMobile||(this._wrapper.removeEventListener("mouseover",this.onRollOver),this._wrapper.removeEventListener("mouseout",this.onRollOut),this._wrapper.addEventListener("mouseover",this.onRollOver),this._wrapper.addEventListener("mouseout",this.onRollOut));b&&(this._video.addEventListener("loadedmetadata",this.onLoadedmetadata),this._video.addEventListener("timeupdate",this.onProgress),this._video.addEventListener("onerror ",
this.onVideoError),this._video.addEventListener("playing",this.onPlaying),this._video.addEventListener("pause",this.onPaused),this._video.addEventListener("ended",this.onVideoComplete),this._video.addEventListener("canplay",this.onCanPlay),this._audio.addEventListener("timeupdate",this.onProgress),this._audio.addEventListener("playing",this.onPlaying),this._audio.addEventListener("pause",this.onPaused),this._audio.addEventListener("loadedmetadata",this.onLoadedmetadata),this._audio.addEventListener("ended",
this.onVideoComplete),this._wrapper.removeEventListener("touchstart",this.onMobileTouch))},videoClickEvent:function(b){this.scope._settings.startFullScreen&&!this.scope._isFullScreen&&this.scope._isAndroid?(this.scope.toggleFullScreen(),this.scope._isMobile||this.scope.playPause(b)):("none"!=this.scope._controls.style.display&&this.scope._contentInitialized&&this.scope.playPause(b),this.scope._controls.style.display="block",this.scope._controls.hideTime=this.scope._video.currentTime)},addUserEventListeners:function(){var b=
this;document.onkeydown=function(a){a=a||window.event;if(27==a.keyCode)b.onEscpaeKey()};this._playBtn.addEventListener("click",function(a){b.playPause(a)});this._shareBtn.addEventListener("click",function(a){b.showSharing(a)});this._controls&&(this._isMobile?this._video.addEventListener("touchend",this.videoClickEvent,!1):this._video.addEventListener("click",this.videoClickEvent,!1));this._scrubBar.addEventListener("click",function(a){if(!b._adMode){var d=this.getBoundingClientRect();b.onSeek((a.pageX-
d.left)/this.offsetWidth)}});this._fullscreenBtn.scope=this;this._fullscreenBtn.addEventListener("click",b.toggleFullScreen);this._volumeBtnGraphics.addEventListener("click",function(a){b.muteUnMute(null,!0)});this._volumeSlider._dragging=!1;this._volumeSlider.addEventListener("mousedown",function(a){b.onVolumeInteraction(a,this)});this._volumeSlider.addEventListener("mouseup",function(b){this._dragging=!1});this._volumeSlider.addEventListener("mouseleave",function(b){this._dragging=!1});this._volumeSlider.addEventListener("mousemove",
function(a){if(this._dragging)b.onVolumeInteraction(a,this)});this._container.addEventListener("onMuteUnMute",function(a){b.onMuteUnMute(b)});this._ccBtn.addEventListener("click",function(a){b.onCC(b)});this._bitBtn.addEventListener("click",function(a){b.onBit(b)});this._adsSkipButton.addEventListener("click",function(a){b._skipAvailable&&b.skipAd()});this._adContainer.addEventListener("click",function(a){b._settings.startFullScreen&&!b._isFullScreen&&b._isAndroid&&b.toggleFullScreen();return!1});
try{document.addEventListener(screenfull.raw.fullscreenchange,function(){b.onResize()})}catch(a){}},onVolumeInteraction:function(b,a){var e=a.getBoundingClientRect();this.setVolume((b.pageX-e.left)/a.offsetWidth,!0);a._dragging=!0},onCloseCC:function(){this._ccList.active=!1;this._ccList.style.maxHeight="0";this._ccList.innerHTML=""},onCC:function(b){if(1<this._availableCaptions.length)if(this.onCloseBit(),this._ccList.active)this.onCloseCC();else{this._ccList.active=!0;var a=this,e=this._ccList.innerHTML=
"";""==this._langSelected&&(e="selected");b='<ul class="ccList">'+('<li class="captionBtn '+e+'"><a data-lang="" data-id="" class="clink">No Captions</a></li>');for(i=0;i<this._availableCaptions.length;i++)e="",this._langSelected==this._availableCaptions[i].lang&&(e="selected"),b+='<li class="captionBtn '+e+'"><a data-lang="'+this._availableCaptions[i].lang+'" data-id="'+this._availableCaptions[i].id+'" class="clink">'+this._availableCaptions[i].lang+"</a></li>";this._ccList.innerHTML=b+"</ul>";this._ccList.style.maxHeight=
30*this._availableCaptions.length+30+"px";this._ccList.hasListener||(this._ccList.hasListener=!0,this._ccList.addEventListener("click",function(b){if(b.target.classList.contains("clink"))a.onCCSelected(b.target.getAttribute("data-lang"),b.target.getAttribute("data-id"),!0)}))}else""!=this._langSelected?(this.onCCSelected("","",!0),this._ccBtn.innerHTML=this._graphics.cc):(this.onCCSelected(this._availableCaptions[0].lang,this._availableCaptions[0].id,!0),this._ccBtn.innerHTML=this._graphics["cc-active"])},
onBit:function(b){this.onCloseCC();if(this._bitList.active)this.onCloseBit();else{this._bitList.active=!0;var a=this;b=this._videodata.videoMP4List;this._bitList.innerHTML="";var e='<ul class="bitList">',c="";""==this._selectedBitrate&&(c="selected");for(i=0;i<b.length;i++)c="",this._selectedBitrate==b[i].bitrate&&(c="selected"),e+='<li class="bitrateBtn '+c+'"><a data-bit="'+b[i].bitrate+'" class="clink">'+b[i].bitrate+"kbs</a></li>";this._bitList.innerHTML=e+"</ul>";this._bitList.style.maxHeight=
30*b.length+30+"px";this._bitList.addEventListener("click",function(b){if(b.target.classList.contains("clink"))a.onBitSelected(b.target.getAttribute("data-bit"))})}},onCloseBit:function(){this._bitList.active=!1;this._bitList.style.maxHeight="0";this._bitList.innerHTML=""},onBitSelected:function(b){if(""!=b){this._selectedBitrate=b;document.cookie="djvideobit="+this._selectedBitrate+"; path=/";for(var a=this._videodata.videoMP4List,e,c=0;c<a.length;c++)if(a[c].bitrate==b){e=a[c];break}this._video.getAttribute("src").split("#t=")[0]!=
e.url&&(b=this._video.paused,this._video.setAttribute("src",e.url+"#t="+Math.round(this._currentTime)),b||(this._video.play(),this._buffering.style.display="block"))}this.onCloseBit()},onEscpaeKey:function(b){this._shareScreen&&(this._shareScreen.style.display="none")},onCanPlay:function(b){},onRollOver:function(b){},onRollOut:function(b){},onVideoComplete:function(b){this.scope.trigger(this.scope._wrapper,"videoComplete",{guid:this.scope._videodata.guid});this.scope.trigger(this.scope._wrapper,"onVideoComplete",
{guid:this.scope._videodata.guid});try{this.scope._comscoreTag.stop()}catch(a){}this.scope._adsLoader&&this.scope._adsLoader.contentComplete();this.scope._mediaHeartbeat&&this.scope._mediaHeartbeat.trackComplete();this.scope._convivaClient&&(this.scope._convivaClient.cleanupSession(this.scope._convivaContentSessionKey),this.scope._convivaContentSessionKey=null,this.scope._convivaPlayerStateManager.reset());try{this._moatManager.dispatchEvent({type:"AdStopped",adVolume:this._volume})}catch(e){}this.scope._adMode||
(this.scope._settings.resetOnComplete?(this.scope.setupThumbnail(),this.scope._thumb.style.display="block",0!=this.scope._iOS&&this.scope._video.webkitExitFullScreen()):this.scope._settings.chainVideos?(this.scope._video.pause(),this.scope.chainVideo()):this.scope._video.currentTime=0)},chainVideo:function(){function b(b){b=JSON.parse(b);a._settings.playlist=b.items?b.items:b;try{if(a._settings.playlist)for(b=0;b<a._settings.playlist.length;b++)if(a._settings.playlist[b].guid==a._videodata.guid){var c=
a._settings.playlist.splice(b,1);a._settings.playlist.push(c[0]);break}}catch(f){}0<a._settings.playlist.length&&a.chainVideo()}var a=this;this._isChained=!0;try{if(this._settings.playlist)for(var e=0;e<this._settings.playlist.length;e++)if(this._settings.playlist[e].guid==this._videodata.guid){var c=this._settings.playlist.splice(e,1);this._settings.playlist.push(c[0]);break}}catch(g){}if(null!==this._settings.playlist)this._settings.playlist instanceof Object&&(this._videodata=this._settings.playlist[0],
this._settings.guid=this._videodata.guid,this._settings.disableChainPlay?this.trigger(this._wrapper,"onSuggestionPlay",this._videodata):this.loadVideo(!0));else{e="";this._settings.useHttps&&(e="&https=1");c="";c=null!==this._videodata.column?"&type="+this._settings.suggestionsType+"&query="+this._videodata.column.replace("&","%26").replace(" ","%20"):"&type="+this._settings.suggestionsType+"&query=news";try{this._settings.suggestionsDoctype?c="&doctype="+this._settings.suggestionsDoctype:""!==this._settings.suggestionsQuery?
c="&type="+this._settings.suggestionsType+"&query="+this._settings.suggestionsQuery.replace("&","%26"):this._videodata.column||(this._videodata["wsj-subsection"]?c="&type=wsj-subsection&query="+this._videodata["wsj-subsection"].replace("&","%26").replace(" ","%20"):this._videodata["wsj-section"]&&(c="&type=wsj-subsection&query="+this._videodata["wsj-section"].replace("&","%26"))),""!=this._settings.suggestionsGroupId?c+="&groupid="+this._settings.suggestionsGroupId:-1!==document.location.href.indexOf("www.wsj.com")&&
(c+="&groupid=4276")}catch(f){}this._ajax.get(this._settings.api+"find_all_videos.asp?count=15"+e+c+"&fields="+this._fields,b,b,null)}},onPlaying:function(b){this.scope._isStalled=!1;if(this.scope._playRequested){this.scope._video.style.display="block";if(!this.scope._playRequested||!this.scope._adMode&&this.scope._playBtn)this.scope._playBtn.innerHTML=this.scope._graphics.pause;this.scope._playOverlay&&(this.scope._playOverlay.style.display="none");this.scope._settings.startFullScreen&&!this.scope._isFullScreen&&
this.scope.toggleFullScreen();this.scope._isSeeking&&this.scope._mediaHeartbeat&&this.scope._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.SeekComplete);this.scope._contentStartTracked&&this.scope._mediaHeartbeat.trackPlay();try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(a){}try{this.scope.trigger(this.scope._wrapper,"onPlayerStateChange",{isPlaying:this.scope.eIsPlaying(),isFullscreen:this.scope._isFullScreen})}catch(e){}try{if(PARSELY){var c=window!=window.top?this.scope._videodata.linkURL:
document.location.href;PARSELY.video.trackPlay(this.scope._videodata.guid,{title:this.scope._videodata.name,section:this.scope._tObject.eVar20,pub_date_tmsp:Date.now(),authors:this.scope._videodata.author.toString(),image_url:this.scope._videodata.videoStillURL,tags:[this.scope._tObject.eVar70,this.scope._videodata.duration]},c)}}catch(g){}}else this.scope._video.pause(),this.scope._playRequested=!0},onBitrateChange:function(b,a){try{if(this._hlsPlayer&&this._hlsPlayer.levels&&this._hlsPlayer.levels[a.level]){if(this._mediaHeartbeat){var e=
this.getQOSData();this._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.BitrateChange,e)}this._convivaPlayerStateManager&&this._convivaPlayerStateManager.setBitrateKbps(Math.round(parseInt(e.bitrate)/1E3))}}catch(c){}},onPageUnload:function(b,a){try{this._convivaClient.cleanupSession(this._convivaContentSessionKey)}catch(e){}},onPaused:function(b){this.scope||(this.scope=this);this.scope._playBtn&&(this.scope._playBtn.innerHTML=this.scope._graphics.play);this.scope._playOverlay&&(this.scope._playOverlay.style.display=
"block");try{this._comscoreTag.stop()}catch(a){}try{this.scope.trigger(this.scope._wrapper,"onPlayerStateChange",{isPlaying:this.scope.eIsPlaying(),isFullscreen:this.scope._isFullScreen})}catch(e){}try{if(PARSELY){var c=window!=window.top?this.scope._videodata.linkURL:document.location.href;PARSELY.video.trackPause(this.scope._videodata.guid,{title:this.scope._videodata.name,urlOverride:window.location!=window.parent.location?document.referrer:document.location.href,section:this.scope._tObject.eVar20,
pub_date_tmsp:Date.now(),authors:this.scope._videodata.author.toString(),image_url:this.scope._videodata.videoStillURL,tags:[this.scope._tObject.eVar70,this.scope._videodata.duration]},c)}}catch(g){}},onSeek:function(b){this._buffering.style.display="block";b=Math.round(this._duration*b);this._flash?this._flash.playerSeek(b):this._isAudio?this._audio.currentTime=b:this._video.currentTime=b},onVideoError:function(b){this._mediaHeartbeat&&("string"===typeof b?this._mediaHeartbeat.trackError(b):this._mediaHeartbeat.trackError(this._videodata.guid));
this._convivaClient&&null!==this._convivaContentSessionKey&&("string"!==typeof b&&(b="error: "+this._videodata.guid),this._convivaClient.reportError(this._convivaContentSessionKey,b,Conviva.Client.ErrorSeverity.FATAL),this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null,this._convivaPlayerStateManager&&this._convivaPlayerStateManager.sendError("Playback Error: "+b,Conviva.Client.ErrorSeverity.FATAL))},onResize:function(){this._height=this._wrapper.offsetHeight;
this._width=this._wrapper.offsetWidth;if(this._adContainer&&this._adsManager){var b=google.ima.ViewMode.NORMAL;screenfull&&screenfull.isFullscreen&&(b=google.ima.ViewMode.FULLSCREEN);this._adsManager.resize(this._width,this._height,b)}this._thumbHint&&(b=36,149<this._width&&(b=50),389<this._width&&(b=60),630<this._width&&(b=70),this._thumbHint.style.height=b+"px",this._thumbHint.firstChild.style.width=b+"px",this._thumbHint.firstChild.style.height=b+"px");if(this._hlsPlayer&&this._hlsPlayer.levels){var a=
0,b=this._hlsPlayer.currentLevel;if(this._height>=this._hlsPlayer.levels[this._hlsPlayer.levels.length-1].height&&this._width>=this._hlsPlayer.levels[this._hlsPlayer.levels.length-1].width)this._hlsPlayer.autoLevelCapping=-1;else for(l=0;l<this._hlsPlayer.levels.length;l++)if(a=this._hlsPlayer.levels[l],this._height<=a.height&&this._width<=a.width){a=l;this._hlsPlayer.levels[l+1]&&this._hlsPlayer.levels[l+1].height==this._hlsPlayer.levels[l].height&&this._hlsPlayer.levels[l+1].width==this._hlsPlayer.levels[l].width&&
(a=l+1);a!=b&&(this._hlsPlayer.autoLevelCapping=a);break}}this._thumbContent&&this._thumbHint&&(299>this._height&&this._thumbDuration&&(this._thumbDuration.style.display="inline",this._thumbDuration.style.marginLeft="10px"),470>=this._width&&(this._thumbContent.style.fontSize="15px",this._thumbContent.style.lineHeight="22px",this._thumbDuration&&(this._thumbDuration.style.fontSize="13px",this._thumbDuration.style.lineHeight="22px")),b=Math.round(Math.round(this._height/2)-Math.round(this._thumbHint.clientHeight/
2))/2,this._thumbContent.style.bottom=Math.round(b-Math.round(this._thumbContent.clientHeight/2))+"px");this._controls&&(this._volumeBtn.style.display=200>this._width?"none":"inline-block")},onScreenChange:function(b){this._isFullScreen=0!=!this._iOS?screenfull.isFullscreen:this._video.webkitDisplayingFullscreen;this._settings.startFullScreen&&(this._isFullScreen?this._isAndroid&&(this._controls.style.display="block"):(this._adsManager&&(this._adsManager.pause(),this._adsSkipButton.style.display=
"none",this._buffering.style.display="none"),this._video.pause(),this._controls&&(this._controls.style.display="none",this._buffering.style.display="none",this._video.controls=!1)));try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:this.eIsPlaying(),isFullscreen:this._isFullScreen})}catch(a){}},muteUnMute:function(b,a){(null==b?!this._muted:b)?(this._flash&&this._flash.playerVolume(0),this._video.muted=!0,this._muted=this._audio.muted=!0,this._adsManager&&this._adsManager.setVolume(0),
this._volumeBtnGraphics&&(this._volumeBtnGraphics.innerHTML=this._graphics["volume-mute"]),a&&(document.cookie="djvideomute=1; path=/")):(this._flash&&this._flash.playerVolume(100*parseFloat(this._volume)),this._video.muted=!1,this._audio.muted=!1,this._adsManager&&this._adsManager.setVolume(this._volume),this._volumeBtnGraphics&&(this._volumeBtnGraphics.innerHTML=this._graphics["volume-full"]),this._muted=!1,a&&(document.cookie="djvideomute=0; path=/"));if(this._videodata){var e=s_gi(this._account);
e.contextData["a.media.friendlyName"]=this._videodata.name;e.contextData["a.media.name"]=this._videodata.guid;e.contextData["video.mute"]=this._muted?"Mute ON":"Mute OFF";e.contextData.action="video.muted";e.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.video.mute,contextData.action";e.tl(!0,"o",this._muted?"heartbeat_video muted":"heartbeat_video unmuted")}this.trigger(this._wrapper,"onMuteUnMute",{})},onMuteUnMute:function(b){b._volumeBtnGraphics&&(b._volumeBtnGraphics.innerHTML=
b._muted?b._graphics["volume-mute"]:b._graphics["volume-full"]);b.showVolume()},setVolume:function(b,a){1<parseFloat(b)&&(b=1);this._flash&&this._flash.playerVolume(100*parseFloat(this._volume));this._adsManager&&this._adsManager.setVolume(b);this._video.volume=b;this._audio.volume=b;this.showVolume();a&&(this._volume=b,document.cookie="djvideovol="+b+"; path=/",document.cookie="djvideovol="+b+";",this.muteUnMute(!1,!0))},showVolume:function(){if(this._controls){var b=parseFloat(this._volume),a=this._volumeBG.offsetWidth;
0==a&&(a=80);this._muted&&(b=0);this._volumeSetting&&(this._volumeSetting.style.width=Math.round(a*b)+"px");this._volumeHandle&&(this._volumeHandle.style.left=Math.round(a*b)+"px")}},showSharing:function(){var b=this,a=this._videodata.linkURL,e=window.location!=window.parent.location?document.referrer:document.location.href,c="";null!==this._settings.shareDomain?a=this._settings.shareDomain+this._videodata.linkRelativeURL:-1!==e.indexOf("marketwatch.com")?(this._settings.shareDomain="http://www.marketwatch.com",
c="&site=video.marketwatch.com",a="http://www.marketwatch.com"+this._videodata.linkRelativeURL):-1!==e.indexOf("barrons.com")&&(this._settings.shareDomain="http://www.barrons.com",c="&site=video.barrons.com",a="http://www.barrons.com"+this._videodata.linkRelativeURL);this._shareScreen.innerHTML='<div class="closeBtn" id="closeBtn-'+this._videoId+'"><svg height="100%" viewBox="0 0 24 24" width="100%"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#fff"></path></svg></div><table  class="share-wrapper"><tr><td valign="middle"><table class="shareTable"><tr><td><label>Video Link</label></td></tr><tr><td><input onclick="this.setSelectionRange(0, this.value.length)" id="embed-form-'+
this._videoId+'" type="text" value="'+a+'" ></input></td></tr><tr><td><label>Video Embed</label></td></tr><tr><td><input onclick="this.setSelectionRange(0, this.value.length)" id="embed-form-'+this._videoId+'" type="text" value="<iframe allowfullscreen=&quot;true&quot; webkitallowfullscreen=&quot;true&quot; mozallowfullscreen=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; width=&quot;512&quot; height=&quot;288&quot; src=&quot;https://video-api.wsj.com/api-video/player/v3/iframe.html?guid='+
this._videodata.guid+"&shareDomain="+this._settings.shareDomain+c+'&quot;></iframe>" /></td></tr><tr><td><label>Social Links</label></td></tr><tr><td><ul class="share-buttons"><li><a href="https://www.facebook.com/sharer/sharer.php?u='+a+"&t="+this._videodata.name+'" title="Share on Facebook" target="_blank" id="sshare-fb-'+this._videoId+'" data-share="Facebook"><img src="'+this._settings.api+'player/v3/css/sharing/Facebook.svg"></a></li><li><a href="https://twitter.com/intent/tweet?url='+a+"&text="+
this._videodata.name+'" target="_blank" title="Tweet" id="sshare-twitter-'+this._videoId+'" data-share="Twitter"><img src="'+this._settings.api+'player/v3/css/sharing/Twitter.svg"></a></li><li><a href="mailto:?subject='+this._videodata.name+"&body=Description:"+a+'" target="_blank" title="Email" id="sshare-email-'+this._videoId+'" data-share="Email"><img src="'+this._settings.api+'player/v3/css/sharing/Email.svg" ></a></li></ul></td></tr></table></td></tr></table>';this._shareScreen.style.display=
"block";document.getElementById("closeBtn-"+this._videoId).addEventListener("click",function(a){a.currentTarget.parentNode.style.display="none";document.getElementById("closeBtn-"+b._videoId).removeEventListener("click",b)});document.getElementById("sshare-fb-"+this._videoId).scope=this;document.getElementById("sshare-twitter-"+this._videoId).scope=this;document.getElementById("sshare-email-"+this._videoId).scope=this;document.getElementById("sshare-fb-"+this._videoId).addEventListener("click",this.trackShare);
document.getElementById("sshare-twitter-"+this._videoId).addEventListener("click",this.trackShare);document.getElementById("sshare-email-"+this._videoId).addEventListener("click",this.trackShare);this._video&&this._video.pause();this._adsManager&&this._adsManager.pause()},adListeners:function(){var b=this;this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(a){b.onAdError(a,b)});this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(a){b.onContentPauseRequested(a)});
this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(a){b.onContentResumeRequested(a)});this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(b){});this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(a){b.onAdComplete(a,b)});this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(a){b.onAdLoaded(a)});this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(a){b.onAdStarted(a,
b)});this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,function(a){b.onAdPaused(a,b)});this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,function(a){b.onAdResumed(a,b)});this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(a){b.onAdSkipped(a,b)});this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,function(a){b.onAdClicked(a)});this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(a){b.onSkippableChanged(a)})},
onAdClicked:function(b){this._adsManager.pause()},onAdStarted:function(b){this._adStarted=!0;this._skipAvailable=!1;this._currentAd=b.getAd();this.onResize();this.setupListeners(!1);this._vrWrapper.style.display="none";this.trigger(this._wrapper,"adStarted");try{this._video.textTracks[0]&&(this._video.textTracks[0].mode="hidden")}catch(a){}this._controls&&(this._scrubProgress.style.display="none",this._playBtn.innerHTML=this._graphics.pause);try{b=[];var e=new google.ima.CompanionAdSelectionSettings;
e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC;e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var c=this._currentAd.getCompanionAds(1600,1600,e);if(c.length)for(e=0;e<c.length;e++)b[e]={url:c[e].h,clickUrl:"",height:c[e].l.height,width:c[e].l.width,type:"html"};try{this.trigger(this._wrapper,"onCompanions",{availableAds:b})}catch(g){}}catch(f){try{this.trigger(this._wrapper,"onCompanions",{availableAds:[]})}catch(q){}}if(this._currentAd.isLinear()){this._controls&&
(this._scrubBar.classList.remove("video-scrub-hover"),this._controls.classList.add("video-advertisment"),this._buffering.style.display="none",this._adProgress.style.display="block",this._adContainer.style.display="block",this._controls.style.display="block",this._adsManager.isCustomPlaybackUsed()?this._video.style.display="block":this._video.style.display="none",this._settings.startFullScreen||(this._playBtn.innerHTML=this._graphics.pause));try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!1,
isFullscreen:this._isFullScreen})}catch(k){}this._adMode=!0;this._adPaused=!1;this._muted?this._adsManager.setVolume(0):this._adsManager.setVolume(this._volume);this.showVolume();this._adInfo=this._currentAd.getAdPodInfo();this._adDuration=this._currentAd.getDuration();c=!0;try{0<=this._currentAd.getUiElements().indexOf("countdown")&&(c=!1)}catch(M){}this._adsSkipButton&&16<this._adDuration&&c&&(this._adsSkipButton.style.display="block");this.startAdTimer();this._settings.startFullScreen&&!this._isFullScreen&&
this._isMobile&&this._adsManager.pause();this.trackAdStarted()}else this._video.play()},trackAdStarted:function(){this._convivaClient.adStart(this._convivaContentSessionKey,Conviva.Client.AdStream.SEPARATE,Conviva.Client.AdPlayer.SEPARATE,Conviva.Client.AdPosition.PREROLL);var b=ADB.va.MediaHeartbeat.createAdBreakObject("pre-roll",1,0);this._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.AdBreakStart,b);var b=ADB.va.MediaHeartbeat.createAdObject(this._currentAd.getTitle(),this._adId,1,this._adDuration),
a={};a[ADB.va.MediaHeartbeat.AdMetadataKeys.ADVERTISER]="";a[ADB.va.MediaHeartbeat.AdMetadataKeys.CAMPAIGN_ID]="";b.setValue(ADB.va.MediaHeartbeat.MediaObjectKey.StandardAdMetadata,a);this._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.AdStart,b,{"ad.blank.start":"false","ad.catastophic.blocker":"false","ad.disabled":"false"});try{this._comscoreTag.stop()}catch(e){}try{this._comscoreTag.playAdvertisement()}catch(c){}},trackShare:function(b){if(svid){"string"===typeof b.share?(this.scope=this,
b=b.share):b=this.dataset.share;var a=s_gi(this.scope._account);a.contextData["a.media.friendlyName"]=this.scope._videodata.name;a.contextData["a.media.name"]=this.scope._videodata.guid;a.contextData["social.share.type"]=b;a.contextData.action="social.share";a.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.social.share.type,contextData.action";a.tl(!0,"o","heartbeat_video share")}},skipAd:function(b){this._adsManager&&(this._adsManager.skip(),this._adsManager.stop())},
onAdSkipped:function(b,a){a._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.AdSkip);this.onAdRemoved()},onSkippableChanged:function(a){},onAdComplete:function(a,d){this.onAdRemoved();this._adStarted=!1;d.trigger(d._wrapper,"adComplete");d._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.AdComplete);d._mediaHeartbeat.trackEvent(ADB.va.MediaHeartbeat.Event.AdBreakComplete);this._ajax.get(d._larsUrl+"?source="+d._settings.larsAdId+"&guid={"+d._settings.guid+"}")},onAdResumed:function(a){this._adMode&&
(this._adPaused=!1,this._playBtn&&(this._playBtn.innerHTML=this._graphics.pause),this._playOverlay&&(this._playOverlay.style.display="none"));this._settings.startFullScreen&&!this._isFullScreen&&this.toggleFullScreen();try{this._comscoreTag.playAdvertisement()}catch(d){}try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!0,isFullscreen:this._isFullScreen})}catch(e){}},onAdPaused:function(a){if(this._adMode){this._adPaused=!0;this._playBtn&&(this._playBtn.innerHTML=this._graphics.play);
this._playOverlay&&(this._playOverlay.style.display="block");try{this._comscoreTag.stop()}catch(d){}}try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!1,isFullscreen:this._isFullScreen})}catch(e){}},startAdTimer:function(){var a=this;this._adTime=0;this._adTimer&&clearInterval(this._adTimer);this._adTimer=setInterval(function(){a.adTick()},500)},startAdTimeoutTimer:function(){var a=this;this._adTimeoutFail=!1;this._adTimeoutTimer&&clearInterval(this._adTimeoutTimer);this._adTimeoutTimer=
setInterval(function(){a._adTimeoutFail=!0;a.adResponseTimeout()},a._adResponseTimeout)},adResponseTimeout:function(a){this.onAdError("timeout");this._settings.adsEnabled=!1},adTick:function(a){if(!this._adPaused&&0<this._adsManager.getRemainingTime()){a=(this._adDuration-this._adsManager.getRemainingTime())/this._adDuration;0<a&&this._buffering&&(this._buffering.style.display="none");try{this.trigger(this._wrapper,"onAdTimeUpdate",{percent:a,duration:this._adDuration})}catch(d){}this._adTime++;60<
this._adTime&&clearInterval(this._adTimer);15<this._adDuration?30<this._adTime?(this._adCountdownText&&(this._videoSkipIcon.style.display="inline-block",this._adCountdownText.innerHTML=""),this._skipAvailable=!0):this._adCountdownText&&(this._videoSkipIcon.style.display="none",0==Math.round(15-Math.floor(this._adTime/2))?(this._adCountdownText.innerHTML="",this._videoSkipIcon.style.display="inline-block"):this._adCountdownText.innerHTML=" in "+Math.round(15-Math.floor(this._adTime/2))):this._adsSkipButton&&
(this._adsSkipButton.style.display="none");this._adsManager&&1>this._adsManager.getRemainingTime()&&clearInterval(this._adTimer);try{this._adProgress&&(this._adProgress.style.width=Math.round(this._scrubBar.offsetWidth*a)+"px"),this._timeDisplay&&(this._timeDisplay.innerHTML=this.gTimeFormat(this._adsManager.getRemainingTime())+" Advertisement")}catch(e){}}},onAdRemoved:function(){this._convivaClient&&this._adStarted&&this._convivaClient.adEnd(this._convivaContentSessionKey);this._skipAvailable=this._adMode=
this._adStarted=!1;this.setupListeners(!0);try{this._video.textTracks[0]&&(this._video.textTracks[0].mode="showing")}catch(a){}this._adsSkipButton&&(this._adsSkipButton.style.display="none");this._adContainer&&(this._adContainer.style.display="none");"vr"==this._videodata.format&&(this._vrWrapper.style.display="block");this._controls&&(this._scrubProgress.style.display="block",this._adProgress.style.display="none",this._scrubBar.classList.add("video-scrub-hover"),this._controls.classList.remove("video-advertisment"),
this._playOverlay.style.display="none");this._adsManager&&!this._adsManager.isCustomPlaybackUsed()&&(this._video.style.display="block");clearInterval(this._adTimer);try{this._comscoreTag.stop()}catch(d){}},onAdLoaded:function(a){try{var d=a.getAd();a="";var e=d.getWrapperAdIds();for(w in e)a+=e[w]+",";d.getAdId()?this._adId=a+d.getAdId():this._adId="none"}catch(c){this._adId="none"}this._convivaContentMetadata.adId=this._adId;this.trigger(this._wrapper,"adLoaded",d)},onContentPauseRequested:function(){this._video.pause()},
onContentResumeRequested:function(){this.onAdRemoved();this._playOverlay&&(this._playOverlay.style.display="none");this._video.play()},onAdError:function(a){this._adTimeoutTimer&&clearInterval(this._adTimeoutTimer);if(this._adErrorTracked)this._adErrorEvent=a;else{this._adErrorTracked=!0;try{this._adsLoading=!1;var d={type:"",code:"",msg:""};if(!1===a)d.code="0",d.msg="Ads Blocked",this.onAdRemoved();else if("timeout"===a)d.code="0",d.msg="No IMA Loader Response After 5 Seconds",this.onAdRemoved();
else{var e=a.getError();d.code=e.getErrorCode();d.msg=e.getMessage();if("undefined"!==typeof d.msg&&null!==d.msg){var c=e.getInnerError();"undefined"!==typeof c&&null!==c&&(d.msg=d.msg+" - "+c)}else d.msg="A null was recieved from ima getMessage";if(900!=e.getErrorCode())this.onAdRemoved()}}catch(g){}this._video.play();try{this.setTrackingVars()}catch(f){}a=s_gi(this._account);a.contextData["a.media.ad.friendlyName"]=this._adId;a.contextData["a.media.ad.name"]=this._adId;a.contextData["ad.error"]=
d.msg;a.contextData["a.media.friendlyName"]=this._videodata.name;a.contextData["a.media.name"]=this._videodata.guid;a.contextData.action="ad.playback.error";a.linkTrackVars="contextData.a.media.ad.friendlyName,contextData.a.media.ad.name,contextData.ad.error,contextData.action,contextData.a.media.friendlyName,contextData.a.media.name";a.tl(!0,"o","heartbeat_ad playback error");this.trigger(this._wrapper,"adError",d)}},goFullScreen:function(){},toggleFullScreen:function(a){var d=this;a&&(d=a.currentTarget.scope);
d._iOS?d._video.webkitEnterFullscreen():a?screenfull.toggle(a.currentTarget.scope._wrapper):screenfull.toggle(d._wrapper);this._isFullScreen=!this._isFullScreen},playPause:function(a){this._flash?this._fPlaying?this._flash.playerPause():this._flash.playerResume():(this._adMode?this._adsManager&&(this._adPaused?(this._playRequested=!0,this.onAdResumed(),this._adsManager.resume(),this._adsManager.isCustomPlaybackUsed()&&this._video.play()):(this._playRequested=!1,this._adsManager.pause(),this.onAdPaused(),
this._adsManager.isCustomPlaybackUsed()&&this._video.pause())):this._isAudio?this._audio.paused?this._audio.play():this._audio.pause():this._video.paused?(this._video.play(),this._playRequested=!0,this._playBtn.innerHTML=this._graphics.pause):(this._video.pause(),this._playRequested=!1,this._playBtn.innerHTML=this._graphics.play),this._playRequested||this._mediaHeartbeat.trackPause())},eResumeVideo:function(a){this._self._playRequested=!0;var d=this._self;this._self._contentInitialized?this._self._adMode?
this._self._adsManager.resume():this._self._video.paused&&(this._self._video.play(),this._self._playRequested=!0):(d._thumb.style.display="none",d._video.style.display="block",a=d._video.play(),void 0!==a&&a.then(function(a){},function(a){d._video.muted=!0;d.startVideo()}))},eSeek:function(a,d){if(this._self._video&&!this._self._adMode)if(d){var e=Math.round(a/100*this._self._duration);this._self._video.currentTime=e}else this._self._video.currentTime=a},ePauseVideo:function(a){this._self._playRequested=
!1;this._self._flash?this.self._flash.playerPause():this._self._adMode?this._self._adsManager.pause():this._self._video.paused||this._self._video.pause()},eKillVideo:function(a){this._self._adsManager&&this._self._adsManager.stop()},eIsPlaying:function(){return!this._self._video.paused||this._self._video.seeking||0==this._self._adPaused&&this._self._adMode?!0:this._self._adMode&&this._self._playRequested?!0:!1},ePlayVideo:function(a){this._self._videodata=a;this._self._videodata.hlsNoCaptions?this._self.startVideo():
(this._self._settings.guid=this._self._videodata.guid,this._self.loadVideo(!0))},eLoadVideo:function(a){this._self._settings.guid=a.guid;a.vidora&&(this._self._isChained=!1);!this._self._contentInitialized&&this._self._isMobile&&-1!==document.location.href.indexOf("wsj.com/video")?window.location.href=a.linkURL:(this._self.loadVideo(!0),this._self._shareScreen&&(this._self._shareScreen.style.display="none"))},eUpdatePlaylist:function(a){try{a.items&&(this._self._settings.playlist=a.items)}catch(d){this._self._settings.playlist=
a}},eMute:function(a){this._self.muteUnMute(a,!1)},eGetStatus:function(){return{isPlaying:this._self.eIsPlaying(),isFullscreen:this._self._isFullScreen}},initVrPlayback:function(){function a(b){b.preventDefault();"undefined"!==typeof b.touches&&(b.clientX=b.touches[0].clientX,b.clientY=b.touches[0].clientY);f._vrComponents.isUserInteracting=!0;f._vrComponents.controls&&f._vrComponents.controls.disconnect();onMouseDownMouseX=b.clientX;onMouseDownMouseY=b.clientY;onMouseDownLon=lon;onMouseDownLat=lat;
f._isMobile&&("none"!=f._controls.style.display&&f.playPause(b),f._controls.style.display="block",f._controls.style.bottom="0px",f._controls.hideTime=f._video.currentTime)}function d(a){!0===f._vrComponents.isUserInteracting&&("undefined"!==typeof a.touches&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY),a.target.width&&(lon=.15*(onMouseDownMouseX-a.clientX)+onMouseDownLon,lat=.15*(a.clientY-onMouseDownMouseY)+onMouseDownLat,f._vrComponents.controls&&f._vrComponents.controls.update()))}
function e(a){f._vrComponents.isUserInteracting=!1;f._vrComponents.controls&&f._vrComponents.controls.connect()}function c(){f._vrComponents.camera.aspect=f._vrWrapper.clientWidth/f._vrWrapper.clientHeight;f._vrComponents.camera.updateProjectionMatrix();f._vrComponents.renderer.setSize(f._vrWrapper.clientWidth,f._vrWrapper.clientHeight)}function g(){requestAnimationFrame(g);lat=Math.max(-85,Math.min(85,lat));phi=THREE.Math.degToRad(90-lat);theta=THREE.Math.degToRad(lon);f._vrComponents.camera.target.x=
500*Math.sin(phi)*Math.cos(theta);f._vrComponents.camera.target.y=500*Math.cos(phi);f._vrComponents.camera.target.z=500*Math.sin(phi)*Math.sin(theta);f._vrComponents.camera.lookAt(f._vrComponents.camera.target);f._vrComponents.controls&&f._vrComponents.controls.update();f._vrComponents.renderer.render(f._vrComponents.scene,f._vrComponents.camera)}var f=this;if("undefined"===typeof THREE)this.loadScript("//video-api.wsj.com/api-video/player/v3/js/three.min.js",function(){f.initVrPlayback()},function(){f.startVideo()});
else{this._vrWrapper.style.display="block";this._vrComponents={};this._vrComponents.isUserInteracting=!1;onMouseDownMouseY=onMouseDownMouseX=0;lon=180;theta=phi=onMouseDownLat=lat=onMouseDownLon=0;var q;this._vrComponents.camera=new THREE.PerspectiveCamera(75,parseInt(getComputedStyle(this._vrWrapper).width)/parseInt(getComputedStyle(this._vrWrapper).height),1,1100);this._isAndroid&&(this._vrComponents.controls=new THREE.DeviceOrientationControls(this._vrComponents.camera));this._vrComponents.camera.target=
new THREE.Vector3(0,0,0);this._vrComponents.scene=new THREE.Scene;q=new THREE.SphereGeometry(500,60,40);q.scale(-1,1,1);this._video.crossOrigin="anonymous";var k=new THREE.VideoTexture(this._video);k.minFilter=THREE.LinearFilter;k.generateMipmaps=!1;k=new THREE.MeshBasicMaterial({map:k});q=new THREE.Mesh(q,k);this._vrComponents.scene.add(q);this._vrComponents.renderer=new THREE.WebGLRenderer;this._video.crossOrigin="anonymous";this._vrComponents.renderer.getContext().getExtension("OES_texture_half_float_linear");
this._vrComponents.renderer.setPixelRatio(this._vrWrapper.devicePixelRatio);this._vrComponents.renderer.setSize(parseInt(getComputedStyle(this._vrWrapper).width),parseInt(getComputedStyle(this._vrWrapper).height));this._vrWrapper.appendChild(this._vrComponents.renderer.domElement);this._video.style.display="none";c();this._video.play();g();this._isMobile?(this._vrWrapper.addEventListener("touchstart",a,!1),this._vrWrapper.addEventListener("touchmove",d,!1),this._vrWrapper.addEventListener("touchend",
e,!1)):(document.addEventListener("mousedown",a,!1),document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",e,!1));window.onresize=c;return!0}},displayVrMsg:function(){var a=this;this._vrWrapper.style.display="none";this._controls&&(this._controls.style.display="none");this._buffering.style.display="none";var d=document.createElement("div");d.className="vr-alert";d.innerHTML='<span class="closebtn">&times;</span>360 videos are not available in this browser.<br />Please try with the Chrome browser';
this._wrapper.appendChild(d);setTimeout(function(){d.classList.add("vr-down")},500);d.onclick=function(){d.style.display="none";a.chainVideo()};document.getElementById("vrLearnMore").onclick=function(){a._video.pause()}},getTestingSystemSettings:function(){var a=new Conviva.SystemSettings;a.logLevel=Conviva.SystemSettings.LogLevel.DEBUG;a.allowUncaughtExceptions=!0;return a},getProductionSystemSettings:function(){var a=new Conviva.SystemSettings;a.logLevel=Conviva.SystemSettings.LogLevel.ERROR;return a},
trackInit:function(){var a=ADB.va.MediaHeartbeat,d=this._videodata;this._ajax.get(this._larsUrl+"?source="+this._settings.larsId+"&guid={"+this._settings.guid+"}");this._mediaObjectHeartbeat=a.createMediaObject(d.name,d.guid,parseInt(d.duration),a.StreamType.VOD);this._mediaObjectHeartbeat.setValue(a.MediaObjectKey.StandardVideoMetadata,this.getStandardMetaData());this.setTrackingVars();this._mediaHeartbeat.trackSessionStart(this._mediaObjectHeartbeat,this.getContextData());svid.linkTrackEvents=svid.events=
this._currentEvents[0];svid.linkTrackVars="pageName,events,channel,prop1,prop19,eVar3,eVar4,eVar5,eVar10,eVar11,eVar21,eVar26,eVar32,eVar38,eVar52,eVar53,eVar68";this._isAudio?svid.tl(!0,"o","audio"):svid.tl(!0,"o","video");svid.linkTrackEvents="None";svid.events="None";try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}try{var c={level1:this._videodata["wsj-section"],level2:this._videodata["wsj-subsection"],level3:this._videodata.guid,slicer1:this.getDomain(document.domain)};this._moatManager=
initMoatTracking(this._video,c,this._videodata.duration,"dowjonesjsvideocontent394324437046",this._videodata.hls);this._moatManager.dispatchEvent({type:"AdVideoStart",adVolume:this._volume})}catch(g){}try{window.vidora.push(["send","play",this._videodata.guid])}catch(f){}},getTrackingDateString:function(a){try{var d=new Date(a.formattedCreationDate),e=a.omniPublishDate.split("video_")[1],c=new Date(e);return"original_"+d.getFullYear()+"-"+(10>d.getMonth()+1?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+
d.getDate()+" "+d.getHours()+":"+(10>d.getMinutes()?"0":"")+d.getMinutes()+"_current_"+c.getFullYear()+"-"+(10>c.getMonth()+1?"0"+(c.getMonth()+1):c.getMonth()+1)+"-"+c.getDate()+" "+c.getHours()+":"+(10>c.getMinutes()?"0":"")+c.getMinutes()}catch(g){return a.formattedCreationDate}},getSectionSubsection:function(a){var d=[],e="wsj",c="";try{c=window.s?s.channel:this.getDomain(document.domain)}catch(g){c=this.getDomain(document.domain)}"AllThingsD"==c?e="allthingsd":"SmartMoney"==c&&(e="sm");"string"===
typeof a[e+"-section"]&&d.push(a[e+"-section"]);"string"===typeof a[e+"-subsection"]&&d.push(a[e+"-subsection"]);return d},getContentTypes:function(){var a=["video embedded offsite","video embedded offsite"];if(!1!==this.getChannel()){var d=this.getVideoContent();a[0]=void 0!==d.prop1?d.prop1:"Embedded Onsite";a[1]=void 0!==d.prop19?d.prop19:void 0!==d.prop1?d.prop1:"Embedded Onsite"}return a},getContextData:function(){var a=ADB.va.MediaHeartbeat,d={};this.getVideoContent();d["a.media.friendlyName"]=
this._videodata.name;d["a.media.length"]=this._videodata.duration;d["a.media.name"]=this._videodata.guid;d["a.contentType"]=a.StreamType.VOD;d["a.media.playerName"]=this._settings.fireTv?"Amazon Fire TV":"Web";d["video.keywords"]=this._videodata.keywords.join("|");d["video.base.url"]=window.location.href.split("?")[0];d["video.player.technology"]="html "+this._version;return d},getStandardMetaData:function(){var a={},d=this._videodata,e=ADB.va.MediaHeartbeat;a[e.VideoMetadataKeys.SHOW]=d.column;a[e.VideoMetadataKeys.SEASON]=
"";a[e.VideoMetadataKeys.EPISODE]=d.episodeNumber;a[e.VideoMetadataKeys.ORIGINATOR]=d.author;a[e.VideoMetadataKeys.GENRE]="WSJ_"+this.getSectionSubsection(d).join("_")+"_"+this.getChannel();a[e.VideoMetadataKeys.FIRST_DIGITAL_DATE]=this.getTrackingDateString(d);a[e.VideoMetadataKeys.FEED]=this._videodata.type;a[e.VideoMetadataKeys.NETWORK]=d.doctypeID;d=this._isChained?"autochained":"autoplay";a[e.VideoMetadataKeys.STREAM_FORMAT]=this._autoplayFailed?"user initiated":!0===this._settings.autoplay?
d:"user initiated";return a},trackContentStarted:function(){this._contentStartTracked=!0;this._adPlayNumber=3<this._adPlayNumber?1:this._adPlayNumber+1;document.cookie="djadplaynum="+this._adPlayNumber.toString()+"; path=/";this._convivaContentSessionKey!==Conviva.Client.NO_SESSION_KEY?this._convivaClient.isPlayerAttached(this._convivaContentSessionKey)||this._convivaClient.attachPlayer(this._convivaContentSessionKey,this._convivaPlayerStateManager):console.log("Conviva Failed");this._contentStartTracked&&
this._mediaHeartbeat&&this._mediaHeartbeat.trackPlay();try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(a){}},trackProgress:function(a,d){this._adMode||1<a&&!this._contentStartTracked&&this.trackContentStarted();if(Math.floor(d/15)>this._pingMilestone){this._pingMilestone=Math.floor(d/15);try{window.vidora.push(["send","playhead_update",this._videodata.guid,{params:{playhead_time:d,duration:this._videodata.duration}}])}catch(e){}}this.trigger(this._wrapper,"onTimeUpdate",{percent:a,
time:d,duration:this._duration})},getPageName:function(a){a=this.getVideoContent();return a.pageName?a.pageName:"audio"==this._videodata.type||"podcast"==this._videodata.type?"DJPodcasts_Podcast_"+this._videodata.name+"_"+this._videodata.duration:"WSJLive_Video_"+this._videodata.name+"_"+this._videodata.duration},setConvivaMetaData:function(){var a=this._videodata;this._convivaContentMetadata=new Conviva.ContentMetadata;this._convivaContentMetadata.streamUrl=a.hlsNoCaptions;this._convivaContentMetadata.assetName=
a.name+" - "+a.guid;this._convivaContentMetadata.streamType="vod"===a.state?Conviva.ContentMetadata.StreamType.VOD:Conviva.ContentMetadata.StreamType.LIVE;this._convivaContentMetadata.applicationName="WEB V3";this._convivaContentMetadata.viewerId=this.getCookie("REMOTE_USER");this._convivaContentMetadata.duration=this._videodata.duration;this._convivaContentMetadata.defaultResource="Akamai";var d={};d.isLive=a.state;d.section="undefined"!==typeof this.getSectionSubsection(a)[0]?this.getSectionSubsection(a)[0]:
"";d.subsection="undefined"!==typeof this.getSectionSubsection(a)[1]?this.getSectionSubsection(a)[1]:"";d.column=a.column;d["package"]=a.column;d.doctype=a.doctypeID;d.guid=a.guid;d.episodeNumber=a.episodeNumber;d.seriesName=a.seriesName;d.pubDate=a.publishedDate;d.site=window.location.hostname;d.page=window.location.hostname+window.location.pathname;d.streamProtocol="HLS";d.playerVendor="Internal";d.playerVersion=this._version;d.adLibraryVersion="09099";d.accessType=this.getCookie("REMOTE_USER")?
"WSJ_sub_yes":"WSJ_free";this._convivaContentMetadata.custom=d},setTrackingVars:function(){if(svid){var a=new Date,a=a.getTime()+6E4*a.getTimezoneOffset(),a=new Date(a+-18E6);svid.pageName=this._appMeasurement.pageName=this.getPageName();"object"===typeof this._mediaHeartbeat&&(this._mediaHeartbeat._config.channel=this.getChannel());"object"===typeof this._mediaHeartbeat&&(this._mediaHeartbeat._config.pageName=this.getPageName());svid.channel=this.getChannel();svid.prop1=this.getContentTypes()[0];
svid.prop19=this.getContentTypes()[1];svid.eVar3="";svid.eVar4=svid.pageName;svid.eVar10=this._videodata.name;svid.eVar11="D=ch";svid.eVar21=this._videodata.guid;svid.eVar26="WSJ_free";try{this.getCookie("REMOTE_USER")?svid.eVar26="WSJ_sub_yes":svid.eVar26="WSJ_free"}catch(d){}svid.eVar32=a.getHours()+":"+a.getMinutes();svid.eVar38="D=c19";svid.eVar52="D=c1";svid.eVar53="D=c19";svid.eVar68="Web"}},getChannel:function(a){a="";try{a=window.s?s.channel:this.getDomain(document.domain)}catch(d){a=this.getDomain(document.domain)}return a},
getHostName:function(a){a=a.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=a&&2<a.length&&"string"===typeof a[2]&&0<a[2].length?a[2]:null},getVideoContent:function(){try{if(window!=window.top){if(void 0!==window.parent.s)return window.parent.s}else if(void 0!==window.s)return window.s;return!1}catch(a){return!1}},hasFlashVersionOrBetter:function(a,d){d=d||0;var e;if(navigator.plugins&&0<navigator.plugins.length){var c=navigator.mimeTypes;c&&c["application/x-shockwave-flash"]&&c["application/x-shockwave-flash"].enabledPlugin&&
c["application/x-shockwave-flash"].enabledPlugin.description&&(e=c["application/x-shockwave-flash"].enabledPlugin.description.replace(/^.*?([0-9]+)\.([0-9])+.*$/,"$1,$2").split(","))}else{c=null;try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(g){return!1}if(null!=c){var f;try{f=c.GetVariable("$version")}catch(q){return!1}e=f.replace(/^.*?([0-9]+,[0-9]+).*$/,"$1").split(",")}}return e?(c=parseInt(e[0],10),a>c||a==c&&d>=parseInt(e[1],10)):!1},getMeta:function(a){try{for(var d=document.getElementsByTagName("meta"),
e=0;e<d.length;e++)if(d[e].getAttribute("name")==a)return"_"+d[e].getAttribute("content");return""}catch(c){return""}},getDomain:function(a){return-1!==a.indexOf("cwsj.com")||-1!==a.indexOf("cn.wsj.com")?"WSJ China":-1!==a.indexOf("jwsj.com")?"WSJ Japan":-1!==a.indexOf("kr.wsj.com")?"WSJ Korea":-1!==a.indexOf("indo.wsj.com")?"WSJ Indonesia":-1!==a.indexOf("wsj.com")?"WSJ":-1!==a.indexOf("marketwatch.com")?"MarketWatch":-1!==a.indexOf("barrons.com")?"Barrons Online":-1!==a.indexOf("wsj.de")?"WSJ Germany":
-1!==a.indexOf("allthingsd.com")?"AllThingsD":-1!==a.indexOf("smartmoney.com")?"SmartMoney":-1!==a.indexOf("fxtrader")?"DJFXTrader":-1!==a.indexOf("fins.com")?"FINS":!1},extend:function(a,d){var e={},c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(e[c]=d[c]);return e},loadScript:function(a,d,e){var c=this,g=document.createElement("script");g.type="text/javascript";g.readyState?g.onreadystatechange=function(){if("loaded"==g.readyState||
"complete"==g.readyState)g.onreadystatechange=null,d()}:(g.onload=function(){d(c)},g.onerror=function(){e(c)});g.src=a;document.getElementsByTagName("head")[0].appendChild(g)},gTimeFormat:function(a){var d=10>Math.floor(a/60)?"0"+Math.floor(a/60):Math.floor(a/60);a=10>Math.floor(a-60*d)?"0"+Math.floor(a-60*d):Math.floor(a-60*d);return isNaN(a)?"00:00":d+":"+a},trigger:function(a,d,e){if(document.createEvent){var c=new CustomEvent("build",e);c.data=e;c.initEvent(d,!0,!0);a.dispatchEvent(c)}else document.createEventObject&&
(c=document.createEventObject(),c.data=e,a.fireEvent("on"+d,c))},getCookie:function(a){a+="=";for(var d=document.cookie.split(";"),e=0;e<d.length;e++){for(var c=d[e];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(a))return c.substring(a.length,c.length)}return""},createMark:function(a){void 0!==performance.mark&&performance.mark(a)}};var x=function(b){this.length=1;"string"===(typeof b).toLowerCase()?(b=document.querySelectorAll(b),0<b.length&&(this.element=b[0])):this.element=b;this.WSJVideo=
function(b){(new a(this.element,b)).init();this.element.data=function(){return this.element};return this.element};try{this.data=this.element.data}catch(d){}return this};window.$jQ111=function(a){return new x(a)}})();(function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return d}a.prototype=window.Event.prototype;window.CustomEvent=a})();
!function(a,x,b){function d(a){W.console&&console.error&&console.error(a)}function e(a){throw Error(a);}function c(a,b){return a.forEach(b)}function g(a,b){for(var n in a)b(n)}function f(a,b){return a.map(b)}function q(a){return String(a)}function k(a){return"undefined"==typeof a}function M(a){return k(a)||null===a}function u(a){return!M(a)&&a.constructor===Array}function C(a,b){return M(a)?b:a}function t(a,b){var n=C(a,{}),c=C(b,{}),f;for(f in c)n[f]=c[f];return n}function H(a){a=C(a,{});return null!==
a&&"object"==typeof a||e("Options should be an object."),a}function J(a){return JSON.parse(a)}function D(a){return JSON.stringify(a)}function h(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}function U(a){var b=[],n;for(n in a){var c=a[n],c=k(c)?[n]:[n,c];b.push(c)}b.sort(function(a,b){return b>a?-1:a>b?1:0});return f(b,function(a){return a.map(h).join("=")}).join("&")}function Q(a){a=new Uint16Array(a);crypto.getRandomValues(a);
for(var b=[],n=0;n<a.length;n++)b.push(a[n]);return b}function F(a){for(var b=[],n=0;Ba>n&&a>n;n++)b.push(65535&(Math.floor(65536*Math.random())^(new Date).getTime()));for(;a>n;n++)b.push(Math.floor(65536*Math.random()));return b}function p(){return f(Ca(10),function(a){a=(a>>1).toString(32);return Da.slice(a.length)+a}).join("")}function G(a,b){var n=a.getItem(b);return M(n)?null:J(n)}function R(a,b){var n;try{n=(ja.setItem(a,D(b)),!0)}catch(c){n=(d(c),!1)}return n}function L(a){for(var b=ja,n=0;n<
b.length;n++){var c=b.key(n);a(c)}}function E(a){var b=a+ua,n=0;return setInterval(function(){n+=1;R(b,n)},Ea)}function y(a){ja.removeItem(a);setTimeout(function(){ja.removeItem(a)},100)}function z(a){var b=a+ua;ja.removeItem(a);y(b)}function r(a,b,n){b=Fa+((new Date).getTime()+":"+Math.random());var c=E(b);R(b,{data:a,guid:n,retry:0});return{key:b,guid:n,clock:c}}function $(a){return r(a,0,(new Date).getTime()+":"+Math.random())}function Z(a){var b=a.key;a=a.clock;var n=b+ua;a&&clearInterval(a);
y(n);z(b)}function V(a){if(a.length>za){a.sort();for(var b=a.length-Aa,n=0;b>n;n++){var c=a.shift();z(c)}}}function O(a){g(a,function(b){var n=a[b],c=G(ja,b);(M(c)||c===n)&&(delete a[b],y(b))})}function P(a,b){var n=[];return c(b,function(b){b+ua in a||n.push(b)}),n}function T(a,b){var n=[];c(a,function(a){var b=G(ja,a);if(!M(b)){var c=b.retry+1;Pa>c&&(b=r(b.data,c,b.guid),n.push(b))}z(a)});c(n,function(a){var n=G(ja,a.key);b(a,n.data,n.guid)})}function S(){var a={};return L(function(b){0===b.indexOf(Fa)&&
-1!==b.indexOf(ua)&&(a[b]=G(ja,b))}),a}function K(){var a=[];return L(function(b){0===b.indexOf(Fa)&&-1===b.indexOf(ua)&&a.push(b)}),a}function Y(a,b){if(!Ga){Ga=!0;var n=K(),c=S();V(n);setTimeout(function(){O(c);var f=P(c,n);T(f,a);Ga=!1;b&&b()},Qa)}}function aa(a,b,n){W.console&&console.log&&console.log("XHR Request Succeded: "+n.url)}function n(a,b,n){d("XHR Request Failed: "+n.url+" "+a)}function I(a,b,n){d("XHR Timeout: "+n.url)}function ca(a){return a}function X(a){return a}function fa(a,b,
c){var f=new XMLHttpRequest;f.open(a,b.url,c);var h="onSuccess"in b?b.onSuccess:aa,d="onError"in b?b.onError:n,e="onTimeout"in b?b.onTimeout:I,u="unmarshall"in b?b.unmarshall:ca;return"crossDomainCredentials"in b&&(f.withCredentials=!0===b.crossDomainCredentials),"timeoutMs"in b&&(f.timeout=b.timeoutMs,f.ontimeout=function(){e.call({},b)}),f.onload=function(){f.readyState===Ka&&200===f.status?h.call({},u(f.responseText),f.status,b):d.call({},f.statusText,f.status,f.readyState,b)},f.onerror=function(){var a=
"Unknown Error.";M(f.status)&&M(f.statusText)?a="Unknown Error.":"statusText"in f&&(a=f.statusText);d.call({},a,f.status,f.readyState,b)},f}function N(a,b){var n=fa(a,b,!0);if("data"in b){var c="marshall"in b?b.marshall:X;"dataType"in b&&n.setRequestHeader("Content-type",b.dataType);n.send(c(b.data))}else n.send();return n}function ga(a){N("GET",a)}function wa(a){var b="cb_"+(new Date).getTime().toString(16)+"_"+Math.random().toString(16),n=ha.createElement("script");W[xa][b]=function(c){delete W[xa][b];
Ha.removeChild(n);a.onSuccess.call({},c,Ra,a)};var c=function(){b in W[xa]&&(delete W[xa][b],Ha.removeChild(n),a.onError.call({},"jsonp error",Ia,0,Sa,a))};n.onerror=c;n.onload=c;n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||c()};n.type="text/javascript";n.src=a.url+"&format=jsonp&callback="+encodeURIComponent(b);Ha.appendChild(n)}function na(a,b){return ya[La](a,b)}function pa(a,b,n){function c(){a(f);f=[]}var f=[],I=setTimeout(function(){},0);return{add:function(a){clearTimeout(I);
f.push(a);f.length>=n?c():I=setTimeout(c,b)},flush:function(){clearTimeout(I);c()}}}function ia(){}function m(a,b){if(t(b,Ta),b.data.guid=a.guid,!M(ya[La])&&M(b.onSuccess))na(b.url,b.marshall(b.data))&&Ja(a);else{var n=b.onSuccess||ia;b.onSuccess=function(){Ja(a);n()};N("POST",b)}}function ma(a,b,n){n=H(n);var c=M(n._baseURI)?a._apiHost:n._baseURI,f=t(t({api_key:a.token},n.query),n._params),I=h(a.getUserId());b=b.replace("%user_id%",I);a={url:c+"/"+a.apiVersion+b+"?"+U(f)};t(a,Ua);"success"in n&&
(a.onSuccess=n.success);"error"in n&&(a.onError=n.error);n=ya.userAgent;(0<=n.indexOf("MSIE ")||0<=n.indexOf("Trident/")||0<=n.indexOf("Edge/")?wa:ga)(a)}function ka(a,b){return"string"==typeof a?a:b(a)}function qa(a,b){if(M(a))return a;for(var n={},c=0;c<b.length;c++)b[c]in a&&(n[b[c]]=a[b[c]]);return n}function da(a,b,n){n=H(n);var c=t({api_key:a.token},n._params);a={url:C(n._baseURI,a._analyticsHost)+"/"+a.apiVersion+"/validate?"+U(c),data:{data:b}};b=Ma(a);"success"in n&&(a.onSuccess=n.success);
m(b,a)}function la(a,b){var n=f(b,function(a){return a[0]});da(a,n)}function ba(a){M(a)?e("Vidora API constructed without any options."):null!==a&&"object"==typeof a?"apiKey"in a||e("Vidora API constructed without an API Key"):e("Vidora API should be constructed with an option object.");this.token=t({},a).apiKey;this.apiVersion="v1";var b=this;this._queue=pa(function(a){la(b,a)},500,30);this._analyticsHost=Va;this._apiHost=Wa;this._sendMode=Na;this._build=ra;this._userId=null;Oa(m)}function ea(a){a.call({},
sa,Xa)}function oa(a){var b=a[0];a=a.slice(1);b in sa||e("Invalid api call '"+b+"'");sa[b].apply(sa,a)}function ta(a){u(a)?oa(a):"function"==typeof a?ea(a):e("typeof call item '"+typeof a+"' not supported.")}var ra={version:"1.2.7",rev:"70defd4dcf46f60d01ad6075900d8e0381a4299b"},W=window,ha=document,ya=navigator,Ba=1,Ca=k(W.Uint16Array)||k(W.crypto)?F:Q,Da="000",ja=(W.sessionStorage,W.localStorage),za=50,Aa=za,Pa=3,Ea=5,Qa=3*Ea,Fa="vidoraRequest:",ua=".clock",Ga=!1,Ka=4,Sa=2,xa="_vidora_jsonp";W[xa]=
W[xa]||{};var Ha=ha.head||ha.body||ha,Ra=-200,Ia=-400,La="sendBeacon",Va="https://a.vidora.com",Wa="//api.vidora.com",Ta={marshall:D,dataType:"text/plain"},Ua={unmarshall:J},Na=0,Ma=ia,Ja=ia,Oa=ia;(function(a){var b="string"==typeof a.setItem;return!M(a)&&!b})(ja)&&(Ma=$,Ja=Z,Oa=Y);ba.prototype.config=function(a){a=H(a);"analyticsHost"in a&&(this._analyticsHost=a.analyticsHost);"apiHost"in a&&(this._apiHost=a.apiHost)};ba.prototype.send=function(a,b,n){b=u(b)?b:[b];for(var c=this.getUserId(),f=this.getSessionId(),
I=0;I<b.length;I++){var h=b[I],d=H(n),C={type:ka(a,q),user_id:ka(c,q),session_id:ka(f,q)};M(h)||(C.content_id=ka(h,q));t(C,d.params);h={};"success"in d&&(h.success=d.success);"error"in d&&(h.error=d.error);"timeout"in d&&(h.timeout=d.timeout);var k=this._sendMode;switch(("click"===C.type||d.quicksend)&&(k=1),k){case 1:this._queue.add([C,h]);this._queue.flush();break;case Na:this._queue.add([C,h]);break;default:e()}}};ba.prototype.getItems=function(a){a.query=qa(a.query,["category","type","limit"]);
ma(this,"/users/%user_id%/recommendations",a)};var Ya=["group_ids"];ba.prototype.getGroupRankings=function(a){a.query=qa(a.query,Ya);ma(this,"/users/%user_id%/groups/rankings",a)};ba.prototype._pncItems=function(a){ma(this,"/pnc/users/%user_id%/groups/items",a)};ba.prototype.getUUID=function(){var a;a:{a=ha.cookie.split("; ");for(var b=0;b<a.length;b++){var n=a[b],c=n.indexOf("=");if(-1!==c&&"vidoraUserId"===n.slice(0,c)){a=n.slice(c+1);a=decodeURIComponent(a);break a}}a=null}null===a&&(a=p(),b=[],
b.push("vidoraUserId="+encodeURIComponent(a)),n=new Date,n.setTime(n.getTime()+5256E6),n="expires="+n.toUTCString(),b.push(n),b.push("path=/"),b=b.join("; "),ha.cookie=b);return a};var Za=p().slice(0,10);ba.prototype.getSessionId=function(){return Za};ba.prototype.setUserId=function(a){this._userId=a};ba.prototype.getUserId=function(){return null===this._userId&&(this._userId=this.getUUID()),this._userId};var sa=null,Xa={_i:function(a,b){var n=t({apiKey:a},b);sa=new ba(n);W.console&&console.log&&
console.log("vidora-client "+sa._build.version+" "+sa._build.rev)},_create:function(a){return new ba(a)}};(function(a,b,n){if(a[n]&&!0===a[n]._init)return void d("vidora-client included twice!");W=a;ha=b;b=a[n];n in a||(a[n]={});a[n]._init=!0;a[n].push=oa;a[n].ready=ea;b&&(b.ready=ea,b.push=oa,b._q.forEach(ta))})(a,x,b)}(window,document,"vidora");
function initMoatTracking(a,x,b,d,e){var c=document.createElement("script"),g=[];x={adData:{ids:x,duration:b,url:e},dispatchEvent:function(a){this.sendEvent?(g&&(g.push(a),a=g,g=!1),this.sendEvent(a)):g.push(a)}};b="_moatApi"+Math.floor(1E8*Math.random());var f,q;try{f=a.ownerDocument,q=f.defaultView||f.parentWindow}catch(k){f=document,q=window}q[b]=x;c.type="text/javascript";a&&a.insertBefore(c,a.childNodes[0]||null);c.src="https://z.moatads.com/"+d+"/moatvideo.js#"+b;return x}
function getFlashMovieObject(a){return window.document[a]?window.document[a]:-1!=navigator.appName.indexOf("Microsoft Internet")?document.getElementById(a):document.embeds&&document.embeds[a]?document.embeds[a]:void 0}(function(a,x,b,d,e){var c={_q:[]};c.ready=c.push=function(a){c._q.push(a)};b in a||(a[b]=c);a[b].ready(function(a,b){b._i(d,e)})})(window,document,"vidora","wsj.E4B14D56D6D304BA4A96A94B14D11AA9");window.vidora.ready(function(a){console.log("Vidora API finished initializing!")});
function udm_(a,x){var b=document,d=b.cookie,e="",c,g,f,q,k=window,M=k.encodeURIComponent||escape;if(d.indexOf("comScore=")+1)for(f=0,d=d.split(";"),q=d.length;f<q;f++)g=d[f].indexOf("comScore="),g+1&&(e="&"+unescape(d[f].substring(g+9)));a+="&ns__t="+ +new Date+"&ns_c="+(b.characterSet||b.defaultCharset||"")+"&c8="+M(b.title)+e+"&c7="+M(b.URL)+"&c9="+M(b.referrer);2048<a.length&&0<a.indexOf("&")&&(c=a.substring(0,2040).lastIndexOf("&"),a=(a.substring(0,c)+"&ns_cut="+M(a.substring(c+1))).substring(0,
2048));b.images?(g=new Image,k.ns_p||(ns_p=g),"function"==typeof x&&(g.onload=g.onerror=x),g.src=a):b.write("<","p","><",'img src="',a,'" height="1" width="1" alt="*"',"><","/p",">")}"undefined"==typeof _comscore&&(_comscore=[]);
(function(){var a=self,x=a.encodeURIComponent?encodeURIComponent:escape,b=Math,d=/c2=(\d*)&/,e,c=function(a){if(a){var c;c=[];var e,g=0,u,C="",t;for(t in a)if(e=typeof a[t],"string"==e||"number"==e)c[c.length]=t+"="+x(a[t]),"c2"==t?C=a[t]:"c1"==t&&(g=1);if(!(0>=c.length||""==C)){u=a.options||{};u.d=u.d||document;if("string"==typeof u.url_append)for(a=u.url_append.replace(/&amp;/,"&").split("&"),t=0,e=a.length;t<e;t++)C=a[t].split("="),2==C.length&&(c[c.length]=C[0]+"="+x(C[1]));c=["http","s"==u.d.URL.charAt(4)?
"s://sb":"://b",".scorecardresearch.com","/b?",g?"":"c1=2&",c.join("&").replace(/&$/,"")];udm_(c.join(""),function(){if(!(0>this.src.indexOf("c1=2"))&&u.d.createElement&&(u.force_script_extension||2==this.width&&this.height>b.round(100*b.random()))){var a=u.d.createElement("script"),c=u.d.getElementsByTagName("script")[0],f=[u.script_extension_url||"//app.scorecardresearch.com/s2e/invite","?c2=",this.src.match(d)[1]].join("");c&&(a.src=f,a.async=!0,c.parentNode.insertBefore(a,c))}})}}},g=function(a){a=
a||_comscore;for(var b=0,d=a.length;b<d;b++)c(a[b]);_comscore=[]};g();(e=a.COMSCORE)?(e.purge=g,e.beacon=c):COMSCORE={purge:g,beacon:c}})();var ns_=ns_||{};
ns_.StreamSense=ns_.StreamSense||function(){function a(a){d=a}function x(a){}function b(a,b){var f=a||"",u=e.comScore||e.sitestat||function(a){var b=c.cookie,f="",h,u,C,k,q=e.encodeURIComponent||escape;if(b.indexOf("comScore=")+1)for(C=0,u=b.split(";"),k=u.length;C<k;C++)b=u[C].indexOf("comScore="),b+1&&(f="&"+unescape(u[C].substring(b+9)));a+="&ns__t="+ +new Date+"&ns_c="+(c.characterSet||c.defaultCharset||"")+f;2048<a.length&&0<a.indexOf("&")&&(h=a.substring(0,2040).lastIndexOf("&"),a=(a.substring(0,
h)+"&ns_cut="+q(a.substring(h+1))).substring(0,2048));d(a);"undefined"===typeof ns_p&&(ns_p={src:a});ns_p.lastMeasurement=a};if("undefined"!==typeof b){var C=[],k=e.encodeURIComponent||escape,q;for(q in b)b.hasOwnProperty(q)&&C.push(k(q)+"="+k(b[q]));/[\?\&]$/.test(f)||(f+="&");f+=C.join("&")}return u(f)}var d=function(a,b){};a(function(a,b){(new Image).src=a;b&&setTimeout(b,0)});var e,c;"undefined"!=typeof window&&"undefined"!=typeof document?(e=window,c=document):(e={},c={location:{href:""},title:"",
URL:"",referrer:"",cookie:""});var g=function(){var a={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={},f;for(f in b)b.hasOwnProperty(f)&&a(b[f])&&(c[f]=b[f]);return c},extend:function(a){var b=arguments.length,c;a=a||{};for(var f=1;f<b;f++)if(c=arguments[f])for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:
c},getInteger:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},isNotEmpty:function(a){return null!=a&&0<a.length},indexOf:function(b,c){var f=-1;return a.forEach(c,function(a,c){a==b&&(f=c)}),f},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var f="undefined"!=typeof a.__proto__,d;for(d in a)(!f||f&&"undefined"==
typeof a.__proto__[d])&&"function"!=typeof a[d]&&b.call(c,a[d],d)}else{d=0;for(var e=a.length;d<e;d++)b.call(c,a[d],d)}}catch(u){}},regionMatches:function(a,b,c,f,d){if(0>b||0>f||b+d>a.length||f+d>c.length)return!1;for(;0<=--d;){var e=a.charAt(b++),u=c.charAt(f++);if(e!=u)return!1}return!0},size:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b){var c=new Date,c=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(c,a)}},isTrue:function(a){return"undefined"==
typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):a?!0:!1},toString:function(b){if("undefined"==typeof b)return"undefined";if("string"==typeof b)return b;if("[object Array]"===Object.prototype.toString.call(b))return b.join(",");if(0<a.size(b)){var c="",f;for(f in b)b.hasOwnProperty(f)&&(c+=f+":"+b[f]+";");return c}return b.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;a<b;a++){var c=
arguments[a];if(0<c)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor(),c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}};return a.filterMap=function(b,c){for(var f in b)-1==a.indexOf(f,c)&&delete b[f]},a.getKeys=function(a,b){var c,f=[];for(c in a)(!b||b.test(c))&&a.hasOwnProperty(c)&&(f[f.length]=c);return f},a.getBrowserName=function(){var a=navigator.userAgent,b=navigator.appName,c,f;return-1!=a.indexOf("Opera")?b="Opera":-1!=a.indexOf("MSIE")?
b="Microsoft Internet Explorer":-1!=a.indexOf("Android")?b="Android":-1!=a.indexOf("Chrome")?b="Chrome":-1!=a.indexOf("Safari")?b="Safari":-1!=a.indexOf("Firefox")?b="Firefox":-1!=a.indexOf("Windows NT")?b="Microsoft Internet Explorer":(c=a.lastIndexOf(" ")+1)<(f=a.lastIndexOf("/"))&&(b=a.substring(c,f),b.toLowerCase()==b.toUpperCase()&&(b=navigator.appName)),b},a.getBrowserFullVersion=function(){var a=navigator.userAgent,b=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10),f,
d;return-1!=(f=a.indexOf("Opera"))?(b=a.substring(f+6),-1!=(f=a.indexOf("Version"))&&(b=a.substring(f+8))):-1!=(f=a.indexOf("MSIE"))?b=a.substring(f+5):-1!=(f=a.indexOf("Android"))?b=a.substring(f+8):-1!=(f=a.indexOf("Chrome"))?b=a.substring(f+7):-1!=(f=a.indexOf("Safari"))?(b=a.substring(f+7),-1!=(f=a.indexOf("Version"))&&(b=a.substring(f+8))):-1!=(f=a.indexOf("Firefox"))?b=a.substring(f+8):-1!=a.indexOf("Windows NT")?(f=a.indexOf("rv:"),b=a.substring(f+3)):a.lastIndexOf(" ")+1<(f=a.lastIndexOf("/"))&&
(b=a.substring(f+1)),-1!=(d=b.indexOf(";"))&&(b=b.substring(0,d)),-1!=(d=b.indexOf(" "))&&(b=b.substring(0,d)),-1!=(d=b.indexOf(")"))&&(b=b.substring(0,d)),c=parseInt(""+b,10),isNaN(c)&&(b=""+parseFloat(navigator.appVersion)),b},a}(),f=function(){var a="play pause end buffer keep-alive hb custom ad_play ad_pause ad_end ad_click".split(" ");return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(b){return a[b]}}}(),q=function(){var a=
[f.END,f.PLAY,f.PAUSE,f.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(b){return a[b]}}}(),k={ADPLAY:f.AD_PLAY,ADPAUSE:f.AD_PAUSE,ADEND:f.AD_END,ADCLICK:f.AD_CLICK},M=[{playingtime:6E4,interval:1E4},{playingtime:null,interval:6E4}],u="c1 c2 ns_site ns_vsite ns_ap_an ns_ap_pn ns_ap_pv c12 name ns_ak ns_ap_ec ns_ap_ev ns_ap_device ns_ap_id ns_ap_csf ns_ap_bi ns_ap_pfm ns_ap_pfv ns_ap_ver ns_ap_sv ns_type ns_radio ns_nc ns_ap_ui ns_ap_gs ns_st_sv ns_st_pv ns_st_it ns_st_id ns_st_ec ns_st_sp ns_st_sq ns_st_cn ns_st_ev ns_st_po ns_st_cl ns_st_el ns_st_pb ns_st_hc ns_st_mp ns_st_mv ns_st_pn ns_st_tp ns_st_pt ns_st_pa ns_st_ad ns_st_li ns_st_ci ns_ap_jb ns_ap_res ns_ap_c12m ns_ap_install ns_ap_updated ns_ap_lastrun ns_ap_cs ns_ap_runs ns_ap_usage ns_ap_fg ns_ap_ft ns_ap_dft ns_ap_bt ns_ap_dbt ns_ap_dit ns_ap_as ns_ap_das ns_ap_it ns_ap_uc ns_ap_aus ns_ap_daus ns_ap_us ns_ap_dus ns_ap_ut ns_ap_oc ns_ap_uxc ns_ap_uxs ns_ap_lang ns_ap_miss ns_ts ns_st_ca ns_st_cp ns_st_er ns_st_pe ns_st_ui ns_st_bc ns_st_bt ns_st_bp ns_st_pc ns_st_pp ns_st_br ns_st_ub ns_st_vo ns_st_ws ns_st_pl ns_st_pr ns_st_ep ns_st_ty ns_st_cs ns_st_ge ns_st_st ns_st_dt ns_st_ct ns_st_de ns_st_pu ns_st_cu ns_st_fee c3 c4 c5 c6 c10 c11 c12 c13 c14 c15 c16 c7 c8 c9".split(" "),
C=function(){return function(){function a(b,c){var f=c[b];null!=f&&(H[b]=f)}var b=this,c=0,d=0,e=0,u=0,C=0,k=0,t,H;g.extend(this,{reset:function(a){null!=a&&0<a.length?g.filterMap(H,a):H={};H.hasOwnProperty("ns_st_cl")||(H.ns_st_cl="0");H.hasOwnProperty("ns_st_pn")||(H.ns_st_pn="1");H.hasOwnProperty("ns_st_tp")||(H.ns_st_tp="1");b.setPauses(0);b.setStarts(0);b.setBufferingTime(0);b.setBufferingTimestamp(-1);b.setPlaybackTime(0);b.setPlaybackTimestamp(-1)},setLabels:function(a,c){null!=a&&g.extend(H,
a);b.setRegisters(H,c)},getLabels:function(){return H},setLabel:function(a,c){var f={};f[a]=c;b.setLabels(f,null)},getLabel:function(a){return H[a]},getClipId:function(){return("undefined"==typeof t||null==t)&&b.setClipId("1"),t},setClipId:function(a){t=a},setRegisters:function(f,u){var k=f.ns_st_cn;null!=k&&(b.setClipId(k),delete f.ns_st_cn);k=f.ns_st_bt;null!=k&&(e=Number(k),delete f.ns_st_bt);a("ns_st_cl",f);a("ns_st_pn",f);a("ns_st_tp",f);a("ns_st_ub",f);a("ns_st_br",f);if(u==q.PLAYING||null==
u)k=f.ns_st_sq,null!=k&&(d=Number(k),delete f.ns_st_sq);u!=q.BUFFERING&&(k=f.ns_st_pt,null!=k&&(C=Number(k),delete f.ns_st_pt));if(u==q.PAUSED||u==q.IDLE||null==u)k=f.ns_st_pc,null!=k&&(c=Number(k),delete f.ns_st_pc)},createLabels:function(a,u){var e=u||{};e.ns_st_cn=b.getClipId();e.ns_st_bt=String(b.getBufferingTime());if(a==f.PLAY||null==a)e.ns_st_sq=String(d);if(a==f.PAUSE||a==f.END||a==f.KEEP_ALIVE||a==f.HEART_BEAT||null==a)e.ns_st_pt=String(b.getPlaybackTime()),e.ns_st_pc=String(c);return g.extend(e,
b.getLabels()),e},incrementPauses:function(){c++},incrementStarts:function(){d++},getBufferingTime:function(){var a=e;return 0<=u&&(a+=+new Date-u),a},setBufferingTime:function(a){e=a},getPlaybackTime:function(){var a=C;return 0<=k&&(a+=+new Date-k),a},setPlaybackTime:function(a){C=a},getPlaybackTimestamp:function(){return k},setPlaybackTimestamp:function(a){k=a},getBufferingTimestamp:function(){return u},setBufferingTimestamp:function(a){u=a},getPauses:function(){return c},setPauses:function(a){c=
a},getStarts:function(){return d},setStarts:function(a){d=a}});H={};b.reset()}}(),t=function(){return function(){var a=this,b=null,c,d=0,e=0,u=0,k=0,t=0,H,M=0,E=!1;g.extend(this,{reset:function(b){null!=b&&0<b.length?g.filterMap(H,b):H={};a.setPlaylistId(+new Date+"_"+M);a.setBufferingTime(0);a.setPlaybackTime(0);a.setPauses(0);a.setStarts(0);a.setRebufferCount(0);E=!1},setLabels:function(b,c){null!=b&&g.extend(H,b);a.setRegisters(H,c)},getLabels:function(){return H},setLabel:function(b,c){var f=
{};f[b]=c;a.setLabels(f,null)},getLabel:function(a){return H[a]},getClip:function(){return b},getPlaylistId:function(){return c},setPlaylistId:function(a){c=a},setRegisters:function(a,b){var f=a.ns_st_sp;null!=f&&(d=Number(f),delete a.ns_st_sp);f=a.ns_st_bc;null!=f&&(u=Number(f),delete a.ns_st_bc);f=a.ns_st_bp;null!=f&&(k=Number(f),delete a.ns_st_bp);f=a.ns_st_id;null!=f&&(c=f,delete a.ns_st_id);b!=q.BUFFERING&&(f=a.ns_st_pa,null!=f&&(t=Number(f),delete a.ns_st_pa));if(b==q.PAUSED||b==q.IDLE||null==
b)f=a.ns_st_pp,null!=f&&(e=Number(f),delete a.ns_st_pp)},createLabels:function(b,C){var k=C||{};k.ns_st_bp=String(a.getBufferingTime());k.ns_st_sp=String(d);k.ns_st_id=String(c);0<u&&(k.ns_st_bc=String(u));if(b==f.PAUSE||b==f.END||b==f.KEEP_ALIVE||b==f.HEART_BEAT||null==b)k.ns_st_pa=String(a.getPlaybackTime()),k.ns_st_pp=String(e);if(b==f.PLAY||null==b)a.didFirstPlayOccurred()||(k.ns_st_pb="1",a.setFirstPlayOccurred(!0));return g.extend(k,a.getLabels()),k},incrementStarts:function(){d++},incrementPauses:function(){e++;
b.incrementPauses()},setPlaylistCounter:function(a){M=a},incrementPlaylistCounter:function(){M++},addPlaybackTime:function(c){0<=b.getPlaybackTimestamp()&&(c-=b.getPlaybackTimestamp(),b.setPlaybackTimestamp(-1),b.setPlaybackTime(b.getPlaybackTime()+c),a.setPlaybackTime(a.getPlaybackTime()+c))},addBufferingTime:function(c){0<=b.getBufferingTimestamp()&&(c-=b.getBufferingTimestamp(),b.setBufferingTimestamp(-1),b.setBufferingTime(b.getBufferingTime()+c),a.setBufferingTime(a.getBufferingTime()+c))},getBufferingTime:function(){var a=
k;return 0<=b.getBufferingTimestamp()&&(a+=+new Date-b.getBufferingTimestamp()),a},setBufferingTime:function(a){k=a},getPlaybackTime:function(){var a=t;return 0<=b.getPlaybackTimestamp()&&(a+=+new Date-b.getPlaybackTimestamp()),a},setPlaybackTime:function(a){t=a},getStarts:function(){return d},setStarts:function(a){d=a},getPauses:function(){return e},setPauses:function(a){e=a},getRebufferCount:function(){return u},incrementRebufferCount:function(){u++},setRebufferCount:function(a){u=a},didFirstPlayOccurred:function(){return E},
setFirstPlayOccurred:function(a){E=a}});b=new C;H={};a.reset()}}(),H=function(){var k=function(k,C){function J(a){var b=0;if(null!=ma)for(var n=0;n<ma.length;n++){var c=ma[n],f=c.playingtime;if(!f||a<f){b=c.interval;break}}return b}function H(){G();var a=J(N.getClip().getPlaybackTime());0<a&&(m=setTimeout(p,0<da?da:a));da=0}function F(){G();var a=J(N.getClip().getPlaybackTime());da=a-N.getClip().getPlaybackTime()%a;null!=m&&G()}function p(){la++;var a=T(f.HEART_BEAT,null);$(a);da=0;H()}function G(){null!=
m&&(clearTimeout(m),m=null)}function R(){var a=T(f.KEEP_ALIVE,null);$(a);fa++;L();ia=setTimeout(R,ka)}function L(){null!=ia&&(clearTimeout(ia),ia=null)}function E(){if(ea==q.PLAYING){N.incrementRebufferCount();N.incrementPauses();var a=T(f.PAUSE,null);$(a);fa++;ea=q.PAUSED}}function y(){null!=na&&(clearTimeout(na),na=null)}function z(a,b,c){ca&&(clearTimeout(ca),ca=null);if(c)ca=setTimeout(function(a,b){return function(){z(a,b)}}(a,b),c);else if(null!=a&&X!=a){c=X;var f=n,I=P(b),f=0<=f?I-f:0;Z(X,
b);V(a,b);X=a;n=+new Date;for(var I=0,d=W.length;I<d;I++)W[I](c,a,b,f);r(b);N.setRegisters(b,a);N.getClip().setRegisters(b,a);a=T(q.toEventType(a),b);g.extend(a,b);O(X)&&($(a),ea=X,fa++)}}function r(a){var b=a.ns_st_mp;null!=b&&(oa=b,delete a.ns_st_mp);b=a.ns_st_mv;null!=b&&(ta=b,delete a.ns_st_mv);b=a.ns_st_ec;null!=b&&(fa=Number(b),delete a.ns_st_ec)}function $(a,b){void 0===b&&(b=!0);b&&(ra=T(null),g.extend(ra,a));var n=S.getPixelURL();if(ga){var f=ga.getAppContext(),I=ga.getSalt(),k=ga.getPixelURL();
null!=f&&null!=I&&0!=I.length&&null!=k&&0!=k.length&&(f=ha.am.newApplicationMeasurement(ga,ha.et.HIDDEN,a,n),ga.getQueue().offer(f))}else if(n){for(var f=d,k=e.encodeURIComponent||escape,C=[],h=n.split("?"),n=h[0],q=h[1].split("&"),h=0,t=q.length;h<t;h++){var J=q[h].split("="),H=unescape(J[0]),J=unescape(J[1]);H&&(a[H]=J)}q={};h=0;for(t=u.length;h<t;h++){var m=u[h];a.hasOwnProperty(m)&&(q[m]=!0,C.push(k(m)+"="+k(a[m])))}for(m in a)q[m]||a.hasOwnProperty(m)&&C.push(k(m)+"="+k(a[m]));k=(I=n+"?"+C.join("&"),
I=I+(0>I.indexOf("&c8=")?"&c8="+k(c.title):"")+(0>I.indexOf("&c7=")?"&c7="+k(c.URL):"")+(0>I.indexOf("&c9=")?"&c9="+k(c.referrer):""),2048<I.length&&0<I.indexOf("&")&&(last=I.substr(0,2040).lastIndexOf("&"),I=(I.substring(0,last)+"&ns_cut="+k(I.substring(last+1))).substr(0,2048)),I);f(k)}}function Z(a,b){var n=P(b);a==q.PLAYING?(N.addPlaybackTime(n),F(),L()):a==q.BUFFERING?(N.addBufferingTime(n),y()):a==q.IDLE&&(n=g.getKeys(N.getClip().getLabels()),N.getClip().reset(n))}function V(a,b){var n=P(b),
c=-1;I=(b.hasOwnProperty("ns_st_po")&&(c=g.getInteger(b.ns_st_po)),c);a==q.PLAYING?(H(),L(),ia=setTimeout(R,ka),N.getClip().setPlaybackTimestamp(n),O(a)&&(N.getClip().incrementStarts(),1>N.getStarts()&&N.setStarts(1))):a==q.PAUSED?O(a)&&N.incrementPauses():a==q.BUFFERING?(N.getClip().setBufferingTimestamp(n),pa&&(y(),S.isPauseOnBufferingEnabled()&&O(q.PAUSED)&&(na=setTimeout(E,qa)))):a==q.IDLE&&(la=da=0)}function O(a){return a!=q.PAUSED&&a!=q.IDLE||ea!=q.IDLE&&null!=ea?a!=q.BUFFERING&&ea!=a:!1}function P(a){var b=
-1;return a.hasOwnProperty("ns_ts")&&(b=Number(a.ns_ts)),b}function T(){var a,b;1==arguments.length?(a=q.toEventType(X),b=arguments[0]):(a=arguments[0],b=arguments[1]);var n={};if("undefined"!=typeof document){var c=document;n.c7=c.URL;n.c8=c.title;n.c9=c.referrer}null!=b&&g.extend(n,b);n.hasOwnProperty("ns_ts")||(n.ns_ts=String(+new Date));null!=a&&!n.hasOwnProperty("ns_st_ev")&&(n.ns_st_ev=f.toString(a));S.isPersistentLabelsShared()&&ga&&g.extend(n,ga.getLabels());g.extend(n,S.getLabels());b=a;
c=n||{};c.ns_st_ec=String(fa);if(!c.hasOwnProperty("ns_st_po")){var d=I,e=P(c);if(b==f.PLAY||b==f.KEEP_ALIVE||b==f.HEART_BEAT||null==b&&X==q.PLAYING)d+=e-N.getClip().getPlaybackTimestamp();c.ns_st_po=g.getInteger(d)}b==f.HEART_BEAT&&(c.ns_st_hc=String(la));return N.createLabels(a,n),N.getClip().createLabels(a,n),n.hasOwnProperty("ns_st_mp")||(n.ns_st_mp=oa),n.hasOwnProperty("ns_st_mv")||(n.ns_st_mv=ta),n.hasOwnProperty("ns_st_ub")||(n.ns_st_ub="0"),n.hasOwnProperty("ns_st_br")||(n.ns_st_br="0"),n.hasOwnProperty("ns_st_pn")||
(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),n.hasOwnProperty("ns_st_it")||(n.ns_st_it="c"),n.ns_st_sv="4.1408.29",n.ns_type="hidden",n}var S=this,K=500,Y,aa=null,n=0,I=0,ca,X,fa=0,N=null,ga,wa=!0,na,pa=!0,ia,m,ma=M,ka=12E5,qa=500,da=0,la=0,ba=!1,ea,oa,ta,ra,W,ha={};g.extend(this,{reset:function(a){N.reset(a);N.setPlaylistCounter(0);N.setPlaylistId(+new Date+"_1");N.getClip().reset(a);null==a||a.isEmpty()?Y={}:g.filterMap(Y,a);fa=1;la=0;F();la=da=0;L();y();ca&&(clearTimeout(ca),
ca=null);X=q.IDLE;n=-1;ea=null;oa="streamsense";ta="4.1408.29";ra=null},setPauseOnBufferingInterval:function(a){qa=a},getPauseOnBufferingInterval:function(){return qa},setKeepAliveInterval:function(a){ka=a},getKeepAliveInterval:function(){return ka},setHeartbeatIntervals:function(a){ma=a},notify:function(){var a,b,n,c;b=arguments[0];3==arguments.length?(n=arguments[1],c=arguments[2]):(n={},c=arguments[1]);a=b==f.PLAY?q.PLAYING:b==f.PAUSE?q.PAUSED:b==f.BUFFER?q.BUFFERING:b==f.END?q.IDLE:null;n=g.extend({},
n);0>P(n)&&(n.ns_ts=String(+new Date));n.hasOwnProperty("ns_st_po")||(n.ns_st_po=g.getInteger(c).toString());b==f.PLAY||b==f.PAUSE||b==f.BUFFER||b==f.END?!S.isPausePlaySwitchDelayEnabled()||X!=q.PLAYING&&X!=q.PAUSED||a!=q.PLAYING&&a!=q.PAUSED||X==q.PLAYING&&a==q.PAUSED&&!ca?z(a,n):z(a,n,K):(a=T(b,n),g.extend(a,n),$(a,!1),fa++)},getLabels:function(){return Y},getState:function(){return X},setLabels:function(a){null!=a&&(null==Y?Y=a:g.extend(Y,a))},getLabel:function(a){return Y[a]},setLabel:function(a,
b){null==b?delete Y[a]:Y[a]=b},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,n=a.indexOf("?");if(0<=n){if(n<a.length-1){for(var c=a.substring(n+1).split("&"),f=0,I=c.length;f<I;f++){var d=c[f].split("=");2==d.length?S.setLabel(d[0],b(d[1])):1==d.length&&S.setLabel("name",b(d[0]))}a=a.substring(0,n+1)}}else a+="?";return aa=a,aa},getPixelURL:function(){return aa?aa:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?aa=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,
""):"string"==typeof ns_pixelUrl?aa=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPersistentLabelsShared:function(){return wa},setPersistentLabelsShared:function(a){wa=a},isPauseOnBufferingEnabled:function(){return pa},setPauseOnBufferingEnabled:function(a){pa=a},isPausePlaySwitchDelayEnabled:function(){return ba},setPausePlaySwitchDelayEnabled:function(a){ba=a},setPausePlaySwitchDelay:function(a){a&&0<a&&(K=a)},getPausePlaySwitchDelay:function(){return K},setClip:function(a,b){var n=
!1;return X==q.IDLE&&(N.getClip().reset(),N.getClip().setLabels(a,null),b&&N.incrementStarts(),n=!0),n},setPlaylist:function(a){var b=!1;return X==q.IDLE&&(N.incrementPlaylistCounter(),N.reset(),N.getClip().reset(),N.setLabels(a,null),b=!0),b},importState:function(a){reset();a=g.extend({},a);N.setRegisters(a,null);N.getClip().setRegisters(a,null);r(a);fa++},exportState:function(){return ra},getVersion:function(){return"4.1408.29"},addListener:function(a){W.push(a)},removeListener:function(a){W.splice(g.indexOf(a,
W),1)},getClip:function(){return N.getClip()},getPlaylist:function(){return N},setHttpGet:a,setHttpPost:x});g.extend(this,{adNotify:function(a,b,n){b=b||{};b.ns_st_ad=1;a>=f.AD_PLAY&&a<=f.AD_CLICK&&S.notify(a,b,n)},customNotify:function(a,b){S.notify(f.CUSTOM,a,b)},viewNotify:function(a,n){(a=a||S.getPixelURL())&&b(a,n)}});ns_.comScore&&(ha=ns_.comScore.exports,ga=ha.c());Y={};fa=1;X=q.IDLE;N=new t;na=null;pa=!0;m=null;la=da=la=0;ca=ia=null;ba=!1;ea=null;I=0;W=[];S.reset();k&&S.setLabels(k);C&&S.setPixelURL(C)};
return function(a){function b(a,c){return e[k]||f(a,c)}function c(){k=-1;for(var a=0;a<=u;a++)if(e.hasOwnProperty(a)){k=a;break}return ns_.StreamSense.activeIndex=k,k}function f(a,b){return a=a||null,b=b||null,a&&"object"==typeof a&&(b=a,a=null),e[++u]=new ns_.StreamSense(b,a),c(),e[u]}function d(a){var b=!1,f=k;if("number"==typeof a&&isFinite(a))f=a;else if(a instanceof ns_.StreamSense)for(var u in e)if(e[u]===a){f=u;break}return e.hasOwnProperty(f)&&(b=e[f],delete e[f],b.reset(),c()),b}var e={},
u=-1,k=-1;g.extend(a,{activeIndex:k,newInstance:f,"new":f,destroyInstance:d,destroy:d,newPlaylist:function(a){return a=a||{},b().setPlaylist(a),b().getPlaylist()},newClip:function(a,c,f){return a=a||{},"number"==typeof c&&(a.ns_st_cn=c),b().setClip(a,f),b().getClip()},notify:function(a,c,f){return"undefined"==typeof a?!1:(f=f||null,c=c||{},b().notify(a,c,f))},setLabels:function(a){"undefined"!=typeof a&&b().setLabels(a)},getLabels:function(){return b().getLabels()},setPlaylistLabels:function(a){"undefined"!=
typeof a&&b().getPlaylist().setLabels(a)},getPlaylistLabels:function(){return b().getPlaylist().getLabels()},setClipLabels:function(a){"undefined"!=typeof a&&b().getClip().setLabels(a)},getClipLabels:function(){return b().getClip().getLabels()},resetInstance:function(a){return b().reset(a||{})},resetPlaylist:function(a){return b().getPlaylist().reset(a||{})},resetClip:function(a){return b().getClip().reset(a||{})},viewEvent:function(a){return a=a||{},b().viewNotify(null,a)},customEvent:function(a,
c){return 2<arguments.length&&(a=arguments[1],c=arguments[2]),a=a||{},"number"==typeof c&&(a.ns_st_po=c),b().customNotify(a,c)},exportState:function(){return b().exportState()},importState:function(a){b().importState(a)}})}(k),k}();return H.AdEvents=k,H.PlayerEvents=f,ns_.StreamingTag=ns_.StreamingTag||function(){return function(){return function(a){function b(a){return g.exists(a)||(a={}),g.exists(a.ns_st_ci)||(a.ns_st_ci="0"),g.exists(a.c3)||(a.c3="*null"),g.exists(a.c4)||(a.c4="*null"),g.exists(a.c6)||
(a.c6="*null"),a}function c(a){E.getState()!=q.IDLE&&E.getState()!=q.PAUSED?E.notify(f.END,(0<k&&a>=k?C+=a-k:C=0,C)):E.getState()==q.PAUSED&&E.notify(f.END,C)}function d(a,b,c){return g.exists(a)&&g.exists(b)&&g.exists(c)?(b=b[a],a=c[a],g.exists(b)&&g.exists(a)&&b===a):!1}function e(a,b){c(a);u++;E.setClip({ns_st_cn:u,ns_st_pn:"1",ns_st_ct:"vc",ns_st_tp:"0"});E.getClip().setLabels(b);t=b;k=a;C=0;E.notify(f.PLAY,C)}var u=0,k=0,C=0,t=null,M=!1,E=new H;g.extend(this,{playAdvertisement:function(){var a=
+new Date;c(a);u++;var d=b(null);d.ns_st_cn=u;d.ns_st_pn="1";d.ns_st_ct="va";d.ns_st_tp="1";d.ns_st_ad="1";E.setClip(d);C=0;E.notify(f.PLAY,C);k=a;M=!1},playContentPart:function(a){var c=+new Date;a=b(a);if(M){var u=a;d("ns_st_ci",t,u)&&d("c3",t,u)&&d("c4",t,u)&&d("c6",t,u)?(E.getClip().setLabels(a),E.getState()!=q.PLAYING&&(k=c,E.notify(f.PLAY,C))):e(c,a)}else e(c,a);M=!0},stop:function(){var a=+new Date;E.notify(f.PAUSE,(0<k&&a>=k?C+=a-k:C=0,C))}});(function(){if(g.exists(a)&&g.exists(a.customerC2)){var b=
a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");E.setPixelURL(b+".scorecardresearch.com/p?c1=2");E.setLabel("c2",a.customerC2);E.setLabel("ns_st_it","r")}})()}}()}(),H}();
!function(){var a="undefined"!=typeof window&&void 0!==window.document?window.document:{},x="undefined"!=typeof module&&module.exports,b="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,d=function(){for(var b,c=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],d=0,e=c.length,M={};d<e;d++)if((b=c[d])&&b[1]in a){for(d=0;d<b.length;d++)M[c[0][d]]=b[d];return M}return!1}(),e={change:d.fullscreenchange,error:d.fullscreenerror},c={request:function(c){var f=d.requestFullscreen;c=c||a.documentElement;/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?
c[f]():c[f](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[d.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(b,c){var d=e[b];d&&a.addEventListener(d,c,!1)},off:function(b,c){var d=e[b];d&&a.removeEventListener(d,c,!1)},raw:d};if(!d)return void(x?module.exports=!1:window.screenfull=!1);Object.defineProperties(c,{isFullscreen:{get:function(){return Boolean(a[d.fullscreenElement])}},
element:{enumerable:!0,get:function(){return a[d.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(a[d.fullscreenEnabled])}}});x?module.exports=c:window.screenfull=c}();var s_code="",s_objectID,svid;
(function(a,x){a.ADB=x()})("undefined"!==typeof self?self:this,function(){var a={};(function(){!function(a){if(void 0===b)var b={};if(void 0===d)var d={};if(void 0===e)var e={};if(e.radio||(e.radio={}),e.plugin||(e.plugin={}),void 0===c)var c={};c.clock||(c.clock={});(function(a){function b(a,c){var f=(65535&a)+(65535&c);return(a>>16)+(c>>16)+(f>>16)<<16|65535&f}function c(a,d,e,u,k,C){a=b(b(d,a),b(u,C));return b(a<<k|a>>>32-k,e)}function d(a,b,f,e,u,k,C){return c(b&f|~b&e,a,b,u,k,C)}function e(a,
b,f,d,u,k,C){return c(b&d|f&~d,a,b,u,k,C)}function u(a,b,f,d,e,u,k){return c(f^(b|~d),a,b,e,u,k)}function C(a,C){a[C>>5]|=128<<C%32;a[14+(C+64>>>9<<4)]=C;var t,h,g,J,H,D=1732584193,y=-271733879,z=-1732584194,r=271733878;for(t=0;t<a.length;t+=16)h=D,g=y,J=z,H=r,D=d(D,y,z,r,a[t],7,-680876936),r=d(r,D,y,z,a[t+1],12,-389564586),z=d(z,r,D,y,a[t+2],17,606105819),y=d(y,z,r,D,a[t+3],22,-1044525330),D=d(D,y,z,r,a[t+4],7,-176418897),r=d(r,D,y,z,a[t+5],12,1200080426),z=d(z,r,D,y,a[t+6],17,-1473231341),y=d(y,
z,r,D,a[t+7],22,-45705983),D=d(D,y,z,r,a[t+8],7,1770035416),r=d(r,D,y,z,a[t+9],12,-1958414417),z=d(z,r,D,y,a[t+10],17,-42063),y=d(y,z,r,D,a[t+11],22,-1990404162),D=d(D,y,z,r,a[t+12],7,1804603682),r=d(r,D,y,z,a[t+13],12,-40341101),z=d(z,r,D,y,a[t+14],17,-1502002290),y=d(y,z,r,D,a[t+15],22,1236535329),D=e(D,y,z,r,a[t+1],5,-165796510),r=e(r,D,y,z,a[t+6],9,-1069501632),z=e(z,r,D,y,a[t+11],14,643717713),y=e(y,z,r,D,a[t],20,-373897302),D=e(D,y,z,r,a[t+5],5,-701558691),r=e(r,D,y,z,a[t+10],9,38016083),z=
e(z,r,D,y,a[t+15],14,-660478335),y=e(y,z,r,D,a[t+4],20,-405537848),D=e(D,y,z,r,a[t+9],5,568446438),r=e(r,D,y,z,a[t+14],9,-1019803690),z=e(z,r,D,y,a[t+3],14,-187363961),y=e(y,z,r,D,a[t+8],20,1163531501),D=e(D,y,z,r,a[t+13],5,-1444681467),r=e(r,D,y,z,a[t+2],9,-51403784),z=e(z,r,D,y,a[t+7],14,1735328473),y=e(y,z,r,D,a[t+12],20,-1926607734),D=c(y^z^r,D,y,a[t+5],4,-378558),r=c(D^y^z,r,D,a[t+8],11,-2022574463),z=c(r^D^y,z,r,a[t+11],16,1839030562),y=c(z^r^D,y,z,a[t+14],23,-35309556),D=c(y^z^r,D,y,a[t+1],
4,-1530992060),r=c(D^y^z,r,D,a[t+4],11,1272893353),z=c(r^D^y,z,r,a[t+7],16,-155497632),y=c(z^r^D,y,z,a[t+10],23,-1094730640),D=c(y^z^r,D,y,a[t+13],4,681279174),r=c(D^y^z,r,D,a[t],11,-358537222),z=c(r^D^y,z,r,a[t+3],16,-722521979),y=c(z^r^D,y,z,a[t+6],23,76029189),D=c(y^z^r,D,y,a[t+9],4,-640364487),r=c(D^y^z,r,D,a[t+12],11,-421815835),z=c(r^D^y,z,r,a[t+15],16,530742520),y=c(z^r^D,y,z,a[t+2],23,-995338651),D=u(D,y,z,r,a[t],6,-198630844),r=u(r,D,y,z,a[t+7],10,1126891415),z=u(z,r,D,y,a[t+14],15,-1416354905),
y=u(y,z,r,D,a[t+5],21,-57434055),D=u(D,y,z,r,a[t+12],6,1700485571),r=u(r,D,y,z,a[t+3],10,-1894986606),z=u(z,r,D,y,a[t+10],15,-1051523),y=u(y,z,r,D,a[t+1],21,-2054922799),D=u(D,y,z,r,a[t+8],6,1873313359),r=u(r,D,y,z,a[t+15],10,-30611744),z=u(z,r,D,y,a[t+6],15,-1560198380),y=u(y,z,r,D,a[t+13],21,1309151649),D=u(D,y,z,r,a[t+4],6,-145523070),r=u(r,D,y,z,a[t+11],10,-1120210379),z=u(z,r,D,y,a[t+2],15,718787259),y=u(y,z,r,D,a[t+9],21,-343485551),D=b(D,h),y=b(y,g),z=b(z,J),r=b(r,H);return[D,y,z,r]}function t(a){var b,
c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function H(a){var b,c=[];c[(a.length>>2)-1]=void 0;for(b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function J(a){return t(C(H(a),8*a.length))}function D(a,b){var c,f,d=H(a),e=[],u=[];e[15]=u[15]=void 0;16<d.length&&(d=C(d,8*a.length));for(c=0;16>c;c+=1)e[c]=909522486^d[c],u[c]=1549556828^d[c];return f=C(e.concat(H(b)),512+8*b.length),t(C(u.concat(f),640))}function h(a){var b,
c,f="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),f+="0123456789abcdef".charAt(b>>>4&15)+"0123456789abcdef".charAt(15&b);return f}a.md5=function(a,b,c){b?c?a=D(unescape(encodeURIComponent(b)),unescape(encodeURIComponent(a))):(a=D(unescape(encodeURIComponent(b)),unescape(encodeURIComponent(a))),a=h(a)):a=c?J(unescape(encodeURIComponent(a))):h(J(unescape(encodeURIComponent(a))));return a}})(b);(function(a){a.StringUtils={startsWith:function(a,b){return 0==a.indexOf(b)}}})(b);(function(a){var b={clone:function(a){var b=
{},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},merge:function(a,c){var d=b.clone(a),e;for(e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d},append:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}};a.ObjectUtils=b})(b);(function(a){function b(a,c,f){this.fn=a;this.ctx=c;this.params=f}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)};a.radio.Command=b})(e);(function(a){function b(a,c){this._queue=[];this._lastTs=0;this._isSuspended=
void 0!==a&&a;this._delay=void 0!==c?c:0}b.prototype.addCommand=function(a){this._queue.push(a);this._drain()};b.prototype.cancelAllCommands=function(){this._queue=[]};b.prototype.isEmpty=function(){return 0===this._queue.length};b.prototype.suspend=function(){this._isSuspended=!0};b.prototype.resume=function(){this._isSuspended=!1;this._drain()};b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++)this._queue[a].run();this._queue=[]};b.prototype._drain=function(){if(!this._isSuspended&&
!this._drainInProgress){this._drainInProgress=!0;var a=this;!function M(){var b=a._queue.shift();b?a._runCommand(b,function(){a._isSuspended||M()}):a._drainInProgress=!1}()}};b.prototype._runCommand=function(a,b){function c(){a.run();null!=b&&b.call(f)}var f=this;if(0==this._lastTs)c();else{var d=(new Date).getTime(),e=d-this._lastTs;this._lastTs=d;e<this._delay?setTimeout(c,this._delay-e):c()}};a.radio.CommandQueue=b})(e);(function(a){function b(a,c){if(this._name=a,!c)throw Error("Reference to the logger object cannot be NULL");
this._logger=c;this._listeners={};this._requests={};this._commands={};this._isShutDown=!1}b.WILDCARD="*";b.SEPARATOR=":";b.prototype.toString=function(){return"<channel: "+this._name+">"};b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(c,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)};b.prototype.on=function(a,b,c){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c}))};b.prototype.off=
function(a,b,c){if(!this._isShutDown){if(b="function"==typeof b?b:null,!a&&null==b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)}};b.prototype.trigger=function(a){if(!this._isShutDown)for(var c in this._listeners){var d;if(d=this._listeners.hasOwnProperty(c)){var e=a.name;if(c===e)d=!0;else{d=(c||"").split(b.SEPARATOR);for(var e=(e||"").split(b.SEPARATOR),t=!0,g=0;g<d.length;g++)t=t&&
(d[g]===b.WILDCARD||d[g]===e[g]);d=t}}if(d)for(d=this._listeners[c].slice(0),e=0;e<d.length;e++)t=d[e],t.fn.call(t.ctx,a)}};b.prototype.comply=function(a,b,c){this._isShutDown||(this._commands[a]={cmd:b,ctx:c})};b.prototype.command=function(a,b){if(!this._isShutDown){var f=this._commands[a];if(!f)return void this._logger.warn(c,"#command > No command handler for: "+a);f.cmd.call(f.ctx,b)}};b.prototype.reply=function(a,b,c){this._isShutDown||(this._requests[a]={fn:b,ctx:c})};b.prototype.request=function(a){if(!this._isShutDown){var b=
this._requests[a];return b?b.fn.call(b.ctx):(this._logger.warn(c,"#request > No request handler for: "+a),null)}};b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var f=this._listeners[a];if(f){if(!f.length||null==b&&!c)return void delete this._listeners[a];for(var d=0;d<f.length;d++){var e=f[d];null!==b&&b!==e.fn||c&&c!==e.ctx||this._listeners[a].splice(d,1)}}};var c="radio::Channel";a.radio.Channel=b})(e);(function(a){function b(a){if(!a)throw Error("Reference to the logger object cannot be NULL");
this._logger=a;this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a,this._logger)),this._channels[a]};b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()};a.radio.Radio=b})(e);(function(a){a.extend=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,
a}})(e);(function(a){function b(){}b.prototype.write=function(a){throw Error("Implementation error: Method must be overridden.");};a.ILogWriter=b})(e);(function(a){function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)};a.LogWriter=b})(e);(function(a){function b(){}b.prototype.setLogWriter=function(a){throw Error("Implementation error: Method must be overridden.");};b.prototype.getLogWriter=function(){throw Error("Implementation error: Method must be overridden.");
};b.prototype.getEnabled=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.enable=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.disable=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.debug=function(a,b){throw Error("Implementation error: Method must be overridden.");};b.prototype.info=function(a,b){throw Error("Implementation error: Method must be overridden.");};b.prototype.warn=
function(a,b){throw Error("Implementation error: Method must be overridden.");};b.prototype.error=function(a,b){throw Error("Implementation error: Method must be overridden.");};a.ILogger=b})(e);(function(a){function b(){this._logWriter=new c}var c=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a;this._enabled=!1};b.prototype.getLogWriter=function(){return this._logWriter};b.prototype.getEnabled=function(){return this._enabled};
b.prototype.enable=function(){this._enabled=!0};b.prototype.disable=function(){this._enabled=!1};b.prototype.debug=function(a,b){this._log(a,e,b)};b.prototype.info=function(a,b){this._log(a,d,b)};b.prototype.warn=function(a,b){this._log(a,u,b)};b.prototype.error=function(a,b){this._log(a,C,b)};b.prototype._log=function(a,b,c){if(b==C||this._enabled){var f=new Date,d="",e="["+f.toTimeString()+".",f=f.getMilliseconds();a=d+(e+(10>f?"00"+f:100>f?"0"+f:""+f)+"] ["+b+"] ")+("["+a+"] "+c);this._logWriter.write(a)}};
var d="INFO",e="DEBUG",u="WARN",C="ERROR";a.Logger=b})(e);(function(a){function b(a,c){this._pluginName=a;this._eventName=c}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName};b.prototype.getEventName=function(){return this._eventName};b.prototype.getName=function(){return this._pluginName+c.SEPARATOR+this._eventName};a.Trigger=b})(e);(function(a){function b(a,c){this.name=a;this.data=c}b.SUCCESS="success";b.ERROR="error";b.createFromTrigger=function(a){return new b(a.getName())};
a.Event=b})(e);(function(a){function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))};b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,f=!1;for(d in this._events)if(a===d){f=!0;break}if(f){for(a=this._events[d].length-1;0<=a;a--)f=this._events[d][a],b===f.cb&&c===f.ctx&&this._events[d].splice(a,1);this._events[d].length||delete this._events[d]}}};b.prototype.dispatchEvent=
function(a){if(a.name)for(var b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var c=this._events[b].slice(0),d=c.length;for(b=0;b<d;b++)c[b].cb.call(c[b].ctx,a);break}};b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;0<=b;b--)this._events[c][b].ctx===a&&this._events[c].splice(b,1);this._events[c].length||delete this._events[c]}}else this._events={}};a.EventDispatcher=b})(e);(function(a){function b(){}
function c(){c.__super__.constructor.call(this);this._connection=null}var d=a.Event,e=a.EventDispatcher;b.GET="GET";c.RESPONSE="response";c.INSTANCE="instance";a.extend(c,e);c.prototype.close=function(){this.removeAllListeners(null)};c.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))};c.prototype._createCORSRequest=function(a){var b=null;if(void 0!==window.XMLHttpRequest){var f=new window.XMLHttpRequest;"withCredentials"in
f&&(b=f,b.open(a.method,a.url,!0))}if(null==b&&void 0!==window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var e={};e[c.INSTANCE]=this;var g=this;b.onload=function(){if(b.status&&400<=parseInt(b.status,10))return this.onerror();e[c.RESPONSE]=b.responseText;g.dispatchEvent(new d(d.SUCCESS,e))};b.onerror=function(){g.dispatchEvent(new d(d.ERROR,e))}}return b};c.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt="");this._connection.src=
a.url;a={};a[c.RESPONSE]="";a[c.INSTANCE]=this;this.dispatchEvent(new d(d.SUCCESS,a))};a.URLRequestMethod=b;a.URLRequest=function(a,b){this.url=a||null;this.method=b;this._xmlhttp=null};a.URLLoader=c})(e);(function(a){var b={getVersion:function(){return"js-2.1.0.161-43bccc"},getMajor:function(){return b.getNumberAtPosition(0)},getMinor:function(){return b.getNumberAtPosition(1)},getMicro:function(){return b.getNumberAtPosition(2)},getPatch:function(){return b.getNumberAtPosition(3)},getBuild:function(){return"43bccc"},
getApiLevel:function(){return 4},getNumberAtPosition:function(a){return["2","1","0","161"][a]}};a.Version=b})(d);(function(a){function b(a,c){this._message=a;this._details=c}b.prototype.getMessage=function(){return this._message};b.prototype.getDetails=function(){return this._details};a.ErrorInfo=b})(d);(function(a){a.HeartbeatConfig=function(){this.debugLogging=!1}})(d);(function(a){function b(){}b.prototype.onError=function(a){};a.HeartbeatDelegate=b})(d);(function(a){function b(){}b.prototype.configure=
function(a){throw Error("Implementation error: Method must be overridden.");};b.prototype.bootstrap=function(a){throw Error("Implementation error: Method must be overridden.");};b.prototype.setup=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.destroy=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.enable=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.disable=function(){throw Error("Implementation error: Method must be overridden.");
};b.prototype.getName=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.isInitialized=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.resolveData=function(a){throw Error("Implementation error: Method must be overridden.");};a.plugin.IPlugin=b})(e);(function(a){function b(a,c,d,f){this.trigger=a;this.action=d;this.plugin=c;this._paramMappings={};this.mergeParams(f)}var c=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=
0;b<a.length;b++){var c=a[b];this._paramMappings[c.getKeyName()]=c}};b.prototype.getParams=function(){var a=[],b;for(b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a};b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a};b.prototype.removeParam=function(a,b){var d=new c(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]};a.plugin.Behaviour=b})(e);(function(a){function b(a,d,f){this._pluginName=
a;this._key=d;this._paramName=f||a+c.SEPARATOR+d}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName};b.prototype.getKey=function(){return this._key};b.prototype.getKeyName=function(){return this._pluginName+c.SEPARATOR+this._key};b.prototype.getParamName=function(){return this._paramName};a.plugin.ParamMapping=b})(e);(function(a){function b(a){if(!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a;this._plugins={};this._behaviours={};this._radio=
new d(this._logger);this._dataChannel=this._radio.channel(C);this._ctrlChannel=this._radio.channel(t)}var c=a.Event,d=a.radio.Radio,e=a.radio.Channel,u=a.plugin.Behaviour;b.ERROR="error";b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(H,"#addPlugin > Replacing plugin: "+b);this._plugins[b]=a;a.bootstrap(this)};b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()};b.prototype.pluginExists=function(a){return!!this._plugins[a]};
b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()};b.prototype.on=function(a,b,c,d){this._dataChannel.on(a+e.SEPARATOR+b,c,d)};b.prototype.off=function(a,b,c,d){this._dataChannel.off(a&&b?a+e.SEPARATOR+b:null,c,d)};b.prototype.trigger=function(a){var b=this._behaviours[a.name];if(b){var c,d,f,e,t,C={},u={};for(c=0;c<b.length;c++)if(f=b[c],e=f.getParams())for(d=0;d<e.length;d++)t=e[d],C[t.getPluginName()]=C[t.getPluginName()]||[],t.key in C[t.getPluginName()]||
C[t.getPluginName()].push(t.getKey());for(var k in C)C.hasOwnProperty(k)&&(u[k]=this.request(k,C[k]));for(c=0;c<b.length;c++)if(f=b[c],C={_behaviour:f,_eventData:a.data||{}},e=f.getParams()){for(d=0;d<e.length;d++)t=e[d],C[t.getParamName()]=u[t.getPluginName()]?u[t.getPluginName()][t.getKey()]:null;this.command(f.plugin.getName(),f.action,C)}}this._dataChannel.trigger(a)};b.prototype.request=function(a,b){var c=this._plugins[a];return c&&b&&0!=b.length?c.resolveData(b):null};b.prototype.raise=function(a){this._errorInfo=
a;a=new c(b.ERROR,a);this._ctrlChannel.trigger(a)};b.prototype.getErrorInfo=function(){return this._errorInfo};b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()};b.prototype.comply=function(a,b,c){this._dataChannel.comply(a.getName()+e.SEPARATOR+b,c,a)};b.prototype.command=function(a,b,c){this._dataChannel.command(a+e.SEPARATOR+b,c)};b.prototype.registerBehaviour=function(a,b,c,d){var f=a.getName();a=new u(a,
b,c,d);this._behaviours[f]=this._behaviours[f]||[];this._behaviours[f].push(a)};var C="data_channel",t="ctrl_channel",H="plugin::PluginManager";a.plugin.PluginManager=b})(e);(function(a,b){function c(a){this._name=a;this._isDestroyed=this._isInitialized=!1;this._isEnabled=!0;this._dataResolver={};this._logTag="plugin::"+this.getName();this._logger=new d}var d=a.Logger,e=a.Trigger,u=a.Event,C=b.ErrorInfo;c.INITIALIZED="initialized";c.prototype.configure=function(a){};c.prototype.bootstrap=function(a){this._pluginManager=
a;this._isDestroyed&&this._pluginManager.raise(new C("Invalid state.","Plugin already destroyed."))};c.prototype.setup=function(){this._trigger(c.INITIALIZED);this._isInitialized=!0};c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())};c.prototype.enable=function(){this._isEnabled=!0;this._enabled()};c.prototype.disable=function(){this._isEnabled=!1;this._disabled()};c.prototype.getName=function(){return this._name};c.prototype.getLogger=function(){return this._logger};
c.prototype.isInitialized=function(){return this._isInitialized};c.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);var b=null;if(a)for(var c=0;c<a.length;c++){var d=a[c];this._dataResolver.hasOwnProperty(d)&&(b=b||{},"function"==
typeof this._dataResolver[d]?b[d]=this._dataResolver[d].call(this):b[d]=this._dataResolver[d])}return b};c.prototype.toString=function(){return"<plugin: "+this._name+">"};c.prototype._enabled=function(){};c.prototype._disabled=function(){};c.prototype._teardown=function(){};c.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)};c.prototype._trigger=function(a,
b){var c=u.createFromTrigger(new e(this.getName(),a));c.data=b;this._pluginManager.trigger(c)};a.plugin.BasePlugin=c})(e,d);(function(a){function b(a,c,d){this.name=a;this.interval=c;this.isActive=!1;this.repeatCount=void 0!==d?d:e;this._nextTickTimestamp=0;this.reset()}function c(a,b){if(!a)throw Error("Reference to the ClockService object cannot be NULL");if(this._service=a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._isDestroyed=!1;this._timers={};var d=
this;this._clock=window.setInterval(function(){d._onTick()},1E3*u)}b.prototype.reset=function(){this.tick=0;this._createdTimestamp=(new Date).getTime();this._updateNextTickTimestamp()};b.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-C/2&&(this.tick++,this._updateNextTickTimestamp(),!0)};b.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=(new Date).getTime()+1E3*this.interval-1};c.prototype.createTimer=function(a,c,d){this._timers[a]=new b(a,
c,d)};c.prototype.destroyTimer=function(a){delete this._timers[a]};c.prototype.resumeTimer=function(a,b){b=void 0!==b&&b;this._logger.debug(d,"#resumeTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&c.reset())};c.prototype.pauseTimer=function(a,b){b=void 0!==b&&b;this._logger.debug(d,"#pauseTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&c.reset())};c.prototype.isTimerPaused=function(a){a=this._timers[a];return!!a&&!a.isActive};c.prototype.destroy=
function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))};c.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(1<b.interval&&this._logger.debug(d,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,b.interval,b.tick),b.repeatCount!=e&&b.repeatCount--):this.destroyTimer(b.name))}};var d="service.clock::TimerManager",
e=-1,u=.25,C=1E3*u;a.clock.TimerDescriptor=b;a.clock.TimerManager=c})(c);(function(a,b,c){function d(a){if(d.__super__.constructor.call(this,C),!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a;this._timerManager=new e(this,this._logger);this._setupDataResolver()}var e=c.clock.TimerManager,u=b.StringUtils;a.extend(d,a.plugin.BasePlugin);d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a);this._pluginManager.comply(this,t,this._cmdCreate);this._pluginManager.comply(this,
J,this._cmdResume);this._pluginManager.comply(this,H,this._cmdPause);this._pluginManager.comply(this,D,this._cmdDestroy)};d.prototype._teardown=function(){this._timerManager.destroy()};d.prototype._cmdCreate=function(a){this._timerManager.createTimer(a[h],a[x],a[Q]||R)};d.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[h],!!a[p])};d.prototype._cmdResume=function(a){this._timerManager.resumeTimer(a[h],!!a[p])};d.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[h])};
d.prototype.onTick=function(a,b,c){a+=".tick";var d={};d[h]=a;d[x]=b;d[F]=c;this._trigger(a,d)};d.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[G]=function(a){return b.isTimerPaused(a)};this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var f=b[d];if(c=c||{},u.startsWith(f,G)){var e=f.split(G+".");0<e.length&&(c[f]=a[G].call(this,e[1]))}}return c}};var C="service.clock",t="create",H="pause",J="resume",D="destroy",h="name",x="interval",
Q="repeat_count",F="tick",p="reset",G="is_paused",R=-1;c.clock.ClockService=d})(e,b,c);(function(a,b,c){function d(a,b){if(this._logger=new e,this._pluginManager=new u(this._logger),this._pluginManager.addPlugin(new C(this._logger)),b)for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins();this._isDestroyed=!1}var e=a.Logger,u=a.plugin.PluginManager,C=b.clock.ClockService;d.prototype.configure=function(a){if(!a)throw Error("Configuration object cannot be NULL.");
a.debugLogging?this._logger.enable():this._logger.disable();this._isDestroyed&&this._logger.error(t,"Instance is destroyed.")};d.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var t="Heartbeat";c.Heartbeat=d})(e,c,d);a.ADB||(a.ADB={});a.ADB.core||(a.ADB.core=e);a.ADB.va||(a.ADB.va=d);a.ADB.va.utils||(a.ADB.va.utils=b);a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);!function(a){if(void 0===b)var b={};b.AssetType={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",
ASSET_TYPE_LINEAR:"linear"};!0;(function(a){function b(){this.startTime=this.position=this.name=this.playerName=null}b.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime};a.AdBreakInfo=b})(b);(function(a){function b(){this.position=this.length=this.name=this.id=null;this.granularTracking=!0}b.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+
", granularTracking="+this.granularTracking};a.AdInfo=b})(b);(function(a){function b(){this.startTime=this.position=this.length=this.name=null}b.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime};a.ChapterInfo=b})(b);(function(a){function b(){this.startupTime=this.droppedFrames=this.fps=this.bitrate=null}b.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+
", startupTime="+this.startupTime};a.QoSInfo=b})(b);(function(a){function b(){this.streamType=this.playhead=this.length=this.name=this.id=this.playerName=null;this.resumed=!1}b.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed};a.VideoInfo=b})(b);(function(a){a.VideoPlayerPluginConfig=function(){this.debugLogging=!1}})(b);(function(a){function b(){}
b.prototype.getVideoInfo=function(){throw Error("Implementation error: Method must be overridden.");};b.prototype.getAdBreakInfo=function(){return null};b.prototype.getAdInfo=function(){return null};b.prototype.getChapterInfo=function(){return null};b.prototype.getQoSInfo=function(){return null};a.VideoPlayerPluginDelegate=b})(b);(function(a,b){function c(a){if(c.__super__.constructor.call(this,k),!a)throw Error("PlayerPlugin delegate cannot be NULL.");this._delegate=a;this._isTrackingSessionStarted=
this._isTrackingSessionActive=!1;this._setupDataResolver()}var g=a.plugin.ParamMapping,f=a.Trigger,q=b.VideoPlayerPluginConfig;a.extend(c,a.plugin.BasePlugin);c.prototype.configure=function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof q))throw Error("Expected config data to be instance of VideoPlayerPluginConfig.");a.debugLogging?this._logger.enable():this._logger.disable();this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")};
c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a);this._registerCommands();this._registerBehaviours()};c.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()");this._videoIdle=!0};c.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()");this._videoIdle&&(this._trigger(h),this._trigger(U),a.isInChapter&&this._trigger(O),a.isInAd&&(this._trigger(E),this._isTrackingAd=!0));this._videoIdle=!1};c.prototype.trackSessionStart=
function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(h);this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&
this._trigger(U)}};c.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()");this._canProcess()&&(this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(H),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)};c.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,
"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer();this._trigger(J);this._contentStarted=this._isTrackingSessionStarted=this._isTrackingSessionActive=!1}};c.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()");this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._isPaused=!1,this._trigger(G),this._startPlayheadTimer())};
c.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var a={};a[I]=!1;this._isPaused=!0;this._trigger(R,a)}};c.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()");this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(r))};c.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,
"#trackBufferComplete()");this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._isBuffering=!1,this._trigger($),this._startPlayheadTimer())};c.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()");this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(Z))};c.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&
this._startSessionIfNeeded("trackSeekComplete")){this._isSeeking=!1;this._trigger(V);this._startPlayheadTimer();var a=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=a.hasOwnProperty("ad.isInAd")&&a["ad.isInAd"]}};c.prototype.trackComplete=function(a,b){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){this._stopPlayheadTimer();var c={};c[n]=a;void 0===b||b?this._trigger(Q,c):(this._trigger(F),this._trigger(D,c))}};c.prototype.trackTimedMetadata=
function(a){this._logger.info(this._logTag,"#trackComplete()");this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(p,a)};c.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()");this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(O)};c.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()");this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&
this._trigger(P)};c.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()");this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(T)};c.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()");this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(E),this._isTrackingAd=!0)};c.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()");this._canProcess()&&
this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(y),this._isTrackingAd=!1)};c.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()");this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(z),this._isTrackingAd=!1)};c.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()");this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(S)};c.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,
"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[ca]=t;b[X]=a;this._trigger(K,b)}};c.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[ca]=C;b[X]=a;this._trigger(K,b)}};c.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart);this._pluginManager.comply(this,
"handleVideoIdleResume",this._cmdVideoIdleResume)};c.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(u,Y),this,"handleVideoIdleStart");this._pluginManager.registerBehaviour(new f(u,aa),this,"handleVideoIdleResume",[new g(x,"ad.isInAd","isInAd"),new g(x,"chapter.isInChapter","isInChapter")])};c.prototype._setupDataResolver=function(){function a(){return I.video?I.video:(I.video=e._delegate.getVideoInfo(),e._logger.info(e._logTag,"Data from delegate > VideoInfo: "+
I.video),I.video)}function b(){return I.ad?I.ad:(I.ad=e._delegate.getAdInfo(),e._logger.info(e._logTag,"Data from delegate > AdInfo: "+I.ad),I.ad)}function n(){return I.pod?I.pod:(I.pod=e._delegate.getAdBreakInfo(),e._logger.info(e._logTag,"Data from delegate > AdBreakInfo: "+I.pod),I.pod)}function c(){return I.chapter?I.chapter:(I.chapter=e._delegate.getChapterInfo(),e._logger.info(e._logTag,"Data from delegate > ChapterInfo: "+I.chapter),I.chapter)}function d(){return I.qos?I.qos:(I.qos=e._delegate.getQoSInfo(),
e._logger.info(e._logTag,"Data from delegate > QoSInfo: "+I.qos),I.qos)}var f={},I={},e=this;f["video.id"]=function(){var b=a(),b=b?b.id:null;return e._logger.debug(e._logTag,"Resolving video.id: "+b),b};f["video.name"]=function(){var b=a(),b=b?b.name:null;return e._logger.debug(e._logTag,"Resolving video.name: "+b),b};f["video.length"]=function(){var b=a(),b=b?b.length:NaN;return e._logger.debug(e._logTag,"Resolving video.length: "+b),b};f["video.playerName"]=function(){var b=a(),b=b?b.playerName:
null;return e._logger.debug(e._logTag,"Resolving video.playerName: "+b),b};f["video.streamType"]=function(){var b=a(),b=b?b.streamType:null;return e._logger.debug(e._logTag,"Resolving video.streamType: "+b),b};f["video.playhead"]=function(){var b=a(),b=b?b.playhead:NaN;return e._logger.debug(e._logTag,"Resolving video.playhead: "+b),b};f["video.resumed"]=function(){var b=a(),b=!!b&&b.resumed;return e._logger.debug(e._logTag,"Resolving video.resumed: "+b),b};f["video.playheadStalled"]=function(){return this._playheadStalled};
f["pod.name"]=function(){var a=n(),a=a?a.name:null;return e._logger.debug(e._logTag,"Resolving pod.name: "+a),a};f["pod.playerName"]=function(){var a=n(),a=a?a.playerName:null;return e._logger.debug(e._logTag,"Resolving pod.playerName: "+a),a};f["pod.position"]=function(){var a=n(),a=a?a.position:NaN;return e._logger.debug(e._logTag,"Resolving pod.position: "+a),a};f["pod.startTime"]=function(){var a=n(),a=a?a.startTime:NaN;return e._logger.debug(e._logTag,"Resolving pod.startTime: "+a),a};f["ad.isInAd"]=
function(){var a=null!=b();return e._logger.debug(e._logTag,"Resolving ad.isInAd: "+a),a};f["ad.isInAdBreak"]=function(){var a=null!=n();return e._logger.debug(e._logTag,"Resolving ad.isInAdBreak: "+a),a};f["ad.id"]=function(){var a=b(),a=a?a.id:null;return e._logger.debug(e._logTag,"Resolving ad.id: "+a),a};f["ad.name"]=function(){var a=b(),a=a?a.name:null;return e._logger.debug(e._logTag,"Resolving ad.name: "+a),a};f["ad.length"]=function(){var a=b(),a=a?a.length:NaN;return e._logger.debug(e._logTag,
"Resolving ad.length: "+a),a};f["ad.position"]=function(){var a=b(),a=a?a.position:NaN;return e._logger.debug(e._logTag,"Resolving ad.position: "+a),a};f["ad.granularTracking"]=function(){var a=b(),a=!!a&&a.granularTracking;return e._logger.debug(e._logTag,"Resolving ad.granularTracking: "+a),a};f["ad.trackingInterval"]=function(){var a=N;return e._logger.debug(e._logTag,"Resolving ad.trackingInterval: "+a),a};f["chapter.isInChapter"]=function(){var a=null!=c();return e._logger.debug(e._logTag,"Resolving chapter.isInChapter: "+
a),a};f["chapter.name"]=function(){var a=c(),a=a?a.name:null;return e._logger.debug(e._logTag,"Resolving chapter.name: "+a),a};f["chapter.length"]=function(){var a=c(),a=a?a.length:NaN;return e._logger.debug(e._logTag,"Resolving chapter.length: "+a),a};f["chapter.position"]=function(){var a=c(),a=a?a.position:NaN;return e._logger.debug(e._logTag,"Resolving chapter.position: "+a),a};f["chapter.startTime"]=function(){var a=c(),a=a?a.startTime:NaN;return e._logger.debug(e._logTag,"Resolving chapter.startTime: "+
a),a};f["qos.bitrate"]=function(){var a=d(),a=a?a.bitrate:NaN;return e._logger.debug(e._logTag,"Resolving qos.bitrate: "+a),a};f["qos.fps"]=function(){var a=d(),a=a?a.fps:NaN;return e._logger.debug(e._logTag,"Resolving qos.fps: "+a),a};f["qos.droppedFrames"]=function(){var a=d(),a=a?a.droppedFrames:NaN;return e._logger.debug(e._logTag,"Resolving qos.droppedFrames: "+a),a};f["qos.startupTime"]=function(){var a=d(),a=a?1E3*a.startupTime:NaN;return e._logger.debug(e._logTag,"Resolving qos.startupTime: "+
a),a};this._dataResolver=function(a){if(!a||0==a.length)return null;I={};for(var b=null,n=0;n<a.length;n++){var c=a[n],b=b||{};b[c]=f.hasOwnProperty(c)?f[c].call(this):null}return b}};c.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(R)))};c.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||
this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(G)))};c.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);a._isTrackingAd?(a._playheadStalled&&a._trackExitStall(),b.hasOwnProperty("ad.isInAd")&&!b["ad.isInAd"]&&
(a._isTrackingAd=!1)):(b=b["video.playhead"],b!=a._previousPlayhead?a._trackExitStall():0<=a._previousPlayhead&&b==a._previousPlayhead&&++a._stalledPlayheadCount==ga&&a._trackPlayheadStall(),b!=a._previousPlayhead&&0<b&&!a._contentStarted&&(a._isPaused||a._isBuffering||a._isSeeking||(a._logger.info(a._logTag,"#_playheadTimer playhead progress to: "+b),a._trigger(L),a._contentStarted=!0)),a._previousPlayhead=b)}},fa))};c.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),
this._playheadTimer=null);this._trackExitStall()};c.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)};var k="player",x=k,u="adobe-heartbeat",C="sourceErrorExternal",t="sourceErrorSDK",H="video_load",J="video_unload",D="video_session_end",h="video_start",
U="video_resume",Q="video_complete",F="video_skip",p="timed_metadata",G="play",R="pause",L="content_start",E="ad_start",y="ad_complete",z="ad_skip",r="buffer_start",$="buffer_complete",Z="seek_start",V="seek_complete",O="chapter_start",P="chapter_complete",T="chapter_skip",S="bitrate_change",K="track_error",Y="video_idle_start",aa="video_idle_resume",n="callback",I="filter_report",ca="source",X="error_id",fa=1001,N=1,ga=2;b.VideoPlayerPlugin=c})(a.ADB.core,b);a.ADB.va.plugins.videoplayer||(a.ADB.va.plugins.videoplayer=
b)}(this);!function(a){if(void 0===b)var b={};b.clock||(b.clock={});b.context||(b.context={});b.filter||(b.filter={});b.model||(b.model={});b.network||(b.network={});(function(a,b){function c(a,b,c,d,e){if(!b)throw Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!e)throw Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+c;this._logger=e;this._isDestroyed=
!1;this._createTimer(c,d);this._installHandlers()}var g=a.Event;c.KEY_NAME="name";c.KEY_INTERVAL="interval";c.KEY_RESET="reset";c.prototype.resume=function(a){this._logger.debug(this._logTag,"Starting timer: "+this._name);var b={};b[c.KEY_NAME]=f+"."+this._name;b[c.KEY_RESET]=a;this._pluginManager.command(q,u,b)};c.prototype.pause=function(a){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var b={};b[c.KEY_NAME]=f+"."+this._name;b[c.KEY_RESET]=a;this._pluginManager.command(q,x,b)};
c.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0;this._uninstallHandlers();var a={};a[c.KEY_NAME]=f+"."+this._name;this._pluginManager.command(q,C,a)}};c.prototype.setInterval=function(a){var b=t+"."+f+"."+this._name,b=this._pluginManager.request(q,[b])[b];this.pause(!0);this._createTimer(this._name,a);b||this.resume(!0)};c.prototype._cmdResume=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]);this.resume(b)};c.prototype._cmdPause=function(a){var b=
!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]);this.pause(b)};c.prototype._onTick=function(a,b){this._channel.trigger(new g("clock:"+this._name+".tick",b))};c.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this);this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this);this._pluginManager.on(q,f+"."+this._name+".tick",this._onTick,this)};c.prototype._uninstallHandlers=function(){this._channel.off(null,null,this);
this._pluginManager.off(null,null,null,this)};c.prototype._createTimer=function(a,b){this._name=a;this._interval=b;var d={};d[c.KEY_NAME]=f+"."+this._name;d[c.KEY_INTERVAL]=this._interval;this._pluginManager.command(q,k,d)};var f="heartbeat",q="service.clock",k="create",x="pause",u="resume",C="destroy",t="is_paused";b.clock.Timer=c})(a.ADB.core,b);(function(a,b){function c(a,b,d){c.__super__.constructor.call(this,a,b,f,k,d)}var g=a.Event;a.extend(c,b.clock.Timer);c.prototype._onCheckStatusComplete=
function(a){a=a.data[t];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+a+")"),a){if(a==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");a>q?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+a),this.setInterval(q)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+a),this.setInterval(a))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),
this.setInterval(k)};c.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()");this._channel.trigger(new g(x))};c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this);this._channel.on(u,this._getSettings,this);this._channel.on(C,this._onCheckStatusComplete,this);this._channel.reply(t,function(){return this._interval},this)};var f="check_status",q=600,k=60,x="clock:check_status.tick",u="clock:check_status.get_settings",C="net:check_status_complete",
t="check_status_interval";b.clock.CheckStatusTimer=c})(a.ADB.core,b);(function(a,b){function c(a,b,d){c.__super__.constructor.call(this,a,b,g,f,d);this._doNotOverrideInterval=!1}a.extend(c,b.clock.Timer);c.prototype._onCheckStatusComplete=function(a){a=a.data[q];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+a+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(a){if(a==
this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+a);this.setInterval(a)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(f)};c.prototype._onUpdateReportingInterval=function(a){var b=a.data[q];if(this._doNotOverrideInterval=!!a.data[k],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+
b+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+b);this.setInterval(b)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(f)};c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this);this._channel.on(u,
this._onCheckStatusComplete,this);this._channel.on(x,this._onUpdateReportingInterval,this);this._channel.reply(q,function(){return this._interval},this)};var g="reporting",f=10,q="reporting_interval",k="do_not_override_interval",x="reporting:update_interval",u="net:check_status_complete";b.clock.ReportingTimer=c})(a.ADB.core,b);(function(a,b){function c(a,b,d){c.__super__.constructor.call(this,a,b,g,f,d)}a.extend(c,b.clock.Timer);var g="idle",f=1800;b.clock.IdleTimer=c})(a.ADB.core,b);(function(a,
b){function c(a,b,d){c.__super__.constructor.call(this,a,b,g,f,d)}a.extend(c,b.clock.Timer);var g="flush_filter",f=.25;b.clock.FlushFilterTimer=c})(a.ADB.core,b);(function(a,b){function c(a,b,c){if(!a)throw Error("Reference to the pluginManager object cannot be NULL");if(!b)throw Error("Reference to the channel object cannot be NULL");if(!c)throw Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1;this._reportingTimer=new q(a,b,c);this._checkStatusTimer=new g(a,b,c);this._flushFilterTimer=
new f(a,b,c);this._idleTimer=new k(a,b,c)}var g=b.clock.CheckStatusTimer,f=b.clock.FlushFilterTimer,q=b.clock.ReportingTimer,k=b.clock.IdleTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())};b.clock.Clock=c})(a.ADB.core,b);(function(a,b){function c(a,b){this.value=a;this.hint=b}function g(a){this.realm=a;this.data={}}c.HINT_SHORT="short";g.prototype.setField=
function(a,b,d){this.data[a]=new c(b,d)};g.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}};b.model.Dao=g;b.model.DaoField=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId",
"pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId());this.sid(a.sid());this.resolver(a.resolver());this.podId(a.podId());this.podPosition(a.podPosition());
this.podOffset(a.podOffset());this.podName(a.podName());this.adLength(a.adLength());this.adName(a.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}a.extend(c,b.model.Dao);b.model.AdDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer",
"tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",g.HINT_SHORT),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.reportSuiteId(a.reportSuiteId());this.trackingServer(a.trackingServer());this.ssl(a.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var g=b.model.DaoField;a.extend(c,b.model.Dao);b.model.AdobeAnalyticsDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id",
"chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id());this.sid(a.sid());this.name(a.name());this.position(a.position());this.length(a.length());
this.offset(a.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}a.extend(c,b.model.Dao);b.model.ChapterDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=
this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type());this.name(a.name());this.videoId(a.videoId());this.publisher(a.publisher());this.length(a.length());var b=a.adData()?new g(a.adData()):null;this.adData(b);a=a.chapterData()?new f(a.chapterData()):null;this.chapterData(a)}else this.type(""),this.name(""),
this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var g=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,b.model.Dao);c.TYPE_AD="ad";c.TYPE_MAIN_CONTENT="main";b.model.AssetDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id",
"id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type());this.duration(a.duration());this.playhead(a.playhead());this.id(a.id());this.source(a.source());this.ts(a.ts());this.prevTs(a.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}
a.extend(c,b.model.Dao);c.EVENT_TYPE_AA_START="aa_start";c.EVENT_TYPE_AA_AD_START="aa_ad_start";c.EVENT_TYPE_START="start";c.EVENT_TYPE_RESUME="resume";c.EVENT_TYPE_CHAPTER_START="chapter_start";c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete";c.EVENT_TYPE_CHAPTER_SKIP="chapter_skip";c.EVENT_TYPE_PLAY="play";c.EVENT_TYPE_PAUSE="pause";c.EVENT_TYPE_STALL="stall";c.EVENT_TYPE_BUFFER="buffer";c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change";c.EVENT_TYPE_ERROR="error";c.EVENT_TYPE_COMPLETE="complete";c.EVENT_TYPE_SKIP=
"skip";c.EVENT_TYPE_END="end";b.model.EventDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.bitrate(a.bitrate());this.fps(a.fps());
this.droppedFrames(a.droppedFrames());this.startupTime(a.startupTime());this.isStartupTimeOverridden=a.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}a.extend(c,b.model.Dao);b.model.QoSDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel",
"channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.ovp(a.ovp());this.sdk(a.sdk());this.channel(a.channel());this.playerName(a.playerName());this.libVersion(a.libVersion());this.apiLevel(a.apiLevel())}else this.ovp(g),this.sdk(g),this.channel(g),this.playerName(""),
this.libVersion(""),this.apiLevel(0)}a.extend(c,b.model.Dao);var g="unknown";b.model.ServiceProviderDao=c})(a.ADB.core,b);(function(a,b){function c(){(c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof c)?this.sessionId(arguments[0].sessionId()):this.sessionId(null)}a.extend(c,b.model.Dao);b.model.SessionDao=c})(a.ADB.core,b);(function(a,b){function c(){(c.__super__.constructor.call(this,"stream"),this.type=
this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof c)?this.type(arguments[0].type()):this.type(null)}a.extend(c,b.model.Dao);b.model.StreamDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&
arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId());this.marketingCloudVisitorId(a.marketingCloudVisitorId());this.visitorId(a.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}a.extend(c,b.model.Dao);b.model.UserDao=c})(a.ADB.core,b);(function(a,b){function c(){if(c.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=
this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.audienceManagerBlob(a.audienceManagerBlob());this.audienceManagerLocationHint(a.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}a.extend(c,b.model.Dao);b.model.AudienceManagerDao=c})(a.ADB.core,b);(function(a,b){var c=a.ObjectUtils,g=b.model.EventDao,f=b.model.AssetDao,q=b.model.StreamDao,k=b.model.QoSDao;
b.model.TrackItem=function(a,b,d,e,H){this.eventData=new g;this.eventData.type(b);this.eventData.duration(0);this.eventData.ts((new Date).getTime());this.eventData.playhead(d);this.assetData=new f(a._assetData);this.streamData=new q(a._streamData);this.qosData=new k(a._qosData);this.cuserData=c.clone(a._cuserData);this.meta=e;this.callback=H;this.filterReport=!0}})(a.ADB.va.utils,b);(function(a,b){var c=a.ObjectUtils,g=b.model.EventDao,f=b.model.AssetDao,q=b.model.StreamDao,k=b.model.QoSDao;b.model.CUserDao;
b.model.Report=function(a,b,d,e,H,J){this.adobeAnalyticsData=a;this.userData=b;this.aamData=d;this.serviceProviderData=e;this.sessionData=H;this.eventData=new g(J.eventData);this.assetData=new f(J.assetData);this.streamData=new q(J.streamData);this.qosData=new k(J.qosData);this.cuserData=c.clone(J.cuserData);this.meta=c.clone(J.meta);this.callback=J.callback;this.filterReport=J.filterReport}})(a.ADB.va.utils,b);(function(a){function b(){}b.prototype.serializeReport=function(a){};b.prototype.serializeDao=
function(a){};b.prototype.serializeMap=function(a){};b.prototype.serializeNumber=function(a,b,d,e){};b.prototype.serializeString=function(a,b,d,e){};a.model.ISerializer=b})(b);(function(a,b){function c(a){if(!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a}var g=b.model.Dao,f=b.model.DaoField;a.extend(c,b.model.ISerializer);c.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),
b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}};c.prototype.serializeDao=function(a){return this._processDao(a).filter(function(a){return!!a}).join("&")};
c.prototype.serializeMap=function(a,b){var c=[],d=b||"meta",f;for(f in a)a.hasOwnProperty(f)&&a[f]&&c.push("s:"+d+":"+f+"="+window.encodeURIComponent(a[f]));return c.join("&")};c.prototype.serializeNumber=function(a,b,c,d){var e=k;return null==b||isNaN(b)?null:(d===f.HINT_SHORT&&(e=x),e+":"+c+":"+a+"="+Math.floor(b))};c.prototype.serializeString=function(a,b,c,d){return b?u+":"+c+":"+a+"="+window.encodeURIComponent(b):null};c.prototype._processDao=function(a){var b=[],c;for(c in a.data)if(a.data.hasOwnProperty(c)){var d=
a.data[c],f=d.value,d=d.hint,e=null,u=a.realm;null!=f&&("number"==typeof f?e=this.serializeNumber(c,f,u,d):"string"==typeof f?e=this.serializeString(c,f,u,d):f instanceof g?e=this.serializeDao(f):this._logger.warn(q,"#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+f+"."),e&&b.push(e))}return b};var q="ah::QuerystringSerializer",k="l",x="h",u="s";b.model.QuerystringSerializer=c})(a.ADB.core,b);(function(a,b){function c(a,b){if(!a)throw Error("Reference to the data object cannot be NULL");
if(this._data=a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b}c.prototype.parse=function(){var a,b,c,d,e;window.DOMParser?e=(new window.DOMParser).parseFromString(this._data,"text/xml"):(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(this._data));var D;(D=parseInt(e.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(a=D);(D=parseInt(e.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(b=D);(D=parseInt(e.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,
10))&&(c=1==D);e.getElementsByTagName("nielsenEnabled")[0]?(D=parseInt(e.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),d=1==D):d=!0;e={};return e[f]=a,e[q]=b,e[k]=c,e[x]=d,this._logger.debug(g,"#parse() > Obtained configuration settings."),e};var g="ah::SettingsParser",f="reporting_interval",q="check_status_interval",k="track_external_errors",x="nielsen_enabled";b.network.SettingsParser=c})(a.ADB.core,b);(function(a,b){function c(a,b){if(this._trackingServer=null,this._checkStatusServer=
null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!a)throw Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._serializer=new u(b);this._installEventListeners()}var g=a.Event,f=a.URLRequestMethod,q=a.URLRequest,k=a.URLLoader,x=b.network.SettingsParser,u=b.model.QuerystringSerializer;c.prototype.destroy=
function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(C,"#destroy()"),this._uninstallEventListeners())};c.prototype._onApiConfig=function(a){a=a.data;this._logger.debug(C,"#_onApiConfig(sb_server="+a[t]+", check_status_server="+a[H]+", publisher="+a[J]+", quiet_mode="+a[D]+", ssl="+a[h]+")");this._trackingServer=this._updateRequestProtocol(a[t],a[h]);this._checkStatusServer=this._updateRequestProtocol(a[H],a[h]);this._publisher=a[J];this._quietMode=a[D];this._isConfigured=!0};c.prototype._onUpdateVisitorOptOut=
function(a){a=a.data;this._logger.debug(C,"#_onUpdateVisitorOptOut(visitor_opt_out="+a[Q]+")");this._visitorOptedOut=a[Q]};c.prototype._onFilterReportAvailable=function(a){a=a.data;if(!this._isConfigured)return void this._logger.warn(C,"#_onFilterReportAvailable() > Unable to send request: not configured.");a=a[U];var b=this._serializer.serializeReport(a),c=this._trackingServer+"/?"+b.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&a.eventData&&this._prevReportSent.eventData.playhead==
a.eventData.playhead&&this._prevReportSent.eventData.ts==a.eventData.ts&&this._prevReportSent.eventData.prevTs==a.eventData.prevTs&&this._prevReportSent.eventData.type==a.eventData.type)return void this._logger.debug(C,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+c);this._prevReportSent=a;a=new q(c,f.GET);this._logger.debug(C,"#_onFilterReportAvailable() > "+a.url);var d=this,c=function(a){u.close();b.callback&&b.callback.call(null)},e=function(a){u.close();d._logger.warn(C,
"#_onFilterReportAvailable() > Failed to send heartbeat report.");b.callback&&b.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var u=new k;u.addEventListener(g.SUCCESS,c,this);u.addEventListener(g.ERROR,e,this);u.load(a)}};c.prototype._onClockCheckStatusTick=function(a){if(!this._isConfigured)return void this._logger.warn(C,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(C,"#_onClockCheckStatusTick() > Publisher is NULL.");
var b=this;a=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase();a=this._checkStatusServer+a+".xml?r="+(new Date).getTime();var c=new q(a,f.GET),d=new k;d.addEventListener(g.SUCCESS,function(a){a.data&&((a=(new x(a.data.response,b._logger)).parse())?b._channel.trigger(new g(L,a)):b._logger.warn(C,"#_onClockCheckStatusTick() > Failed to parse the config. settings."));d.close()},this);d.addEventListener(g.ERROR,function(a){b._logger.warn(C,"#_onClockCheckStatusTick() > Failed to obtain the config. settings.");
d.close()},this);this._logger.debug(C,"#_onClockCheckStatusTick() > Get new settings from: "+a);d.load(c)};c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c};c.prototype._installEventListeners=function(){this._channel.on(F,this._onApiConfig,this);this._channel.on(p,this._onUpdateVisitorOptOut,this);this._channel.on(G,this._onFilterReportAvailable,this);this._channel.on(R,this._onClockCheckStatusTick,
this)};c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var C="ah::Network",t="tracking_server",H="check_status_server",J="publisher",D="quiet_mode",h="ssl",U="report",Q="visitor_opt_out",F="api:config",p="api:update_visitor_optout",G="filter:data_available",R="clock:check_status.tick",L="net:check_status_complete";b.network.Network=c})(a.ADB.core,b);(function(a,b){function c(a,b){if(!a)throw Error("Reference to the channel object cannot be NULL");if(this._channel=
a,!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._isBufferingInProgress=this._isDestroyed=!1;this._reportBuffer={};this._tsHistory={};this._workQueue=new u;this._installEventListeners()}function g(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==t.EVENT_TYPE_PAUSE||a.eventData.type()==t.EVENT_TYPE_STALL?(!a.filterReport||a.eventData.duration()>R)&&b.push(a):b.push(a)}),b}function f(a){var b=-1,c=-1,d=[];return a.forEach(function(a){a.eventData.type()==
t.EVENT_TYPE_START?a.assetData.type()==H.TYPE_MAIN_CONTENT?-1==b?b=d.push(a)-1:(a.eventData.prevTs(-1),d[b]=a):-1==c?c=d.push(a)-1:(a.eventData.prevTs(-1),d[c]=a):d.push(a)}),d}function q(a){var b=[];return a.forEach(function(c){if(c.eventData.type()==t.EVENT_TYPE_PLAY)if(c.eventData.duration()>G)b.push(c);else{if(0==c.eventData.duration()&&c.assetData.type()==H.TYPE_MAIN_CONTENT){var d=k(a);d.indexOf(c)==d.length-1&&b.push(c)}}else b.push(c)}),b}function k(a){var b=[];return a.forEach(function(a){a.eventData.type()!=
t.EVENT_TYPE_PLAY&&a.eventData.type()!=t.EVENT_TYPE_BUFFER&&a.eventData.type()!=t.EVENT_TYPE_START||b.push(a)}),b}var x=a.radio.Command,u=a.radio.CommandQueue,C=a.Event,t=b.model.EventDao,H=b.model.AssetDao;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners(),this.clear())};c.prototype.clear=function(){this._logger.debug(E,"#clear()");this._workQueue.cancelAllCommands();this._reportBuffer={};this._tsHistory={};this._isBufferingInProgress=
!1};c.prototype.flush=function(){this._workQueue.addCommand(new x(this._flushBufferReport,this))};c.prototype._bufferReport=function(a){if(!this._isDestroyed){if(a=a[Q]){var b=a.sessionData.sessionId();this._reportBuffer[b]=this._reportBuffer[b]||[];this._reportBuffer[b].push(a)}this._isBufferingInProgress||(this._isBufferingInProgress=!0,a={},a[U]=!0,a[F]=1,this._channel.command(p,a))}};c.prototype._flushBufferReport=function(){if(!this._isDestroyed){for(var a in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(a)){var b=
q(f(g(this._reportBuffer[a]))),c=b;if(c)for(var d=0;d<c.length;d++){var e=c[d],u=e.sessionData.sessionId();this._tsHistory[u]=this._tsHistory[u]||{};var t=e.eventData.type()+"."+(e.assetData.type()==H.TYPE_AD?e.assetData.adData().adId():e.assetData.videoId());this._tsHistory[u].hasOwnProperty(t)&&e.eventData.prevTs(this._tsHistory[u][t]);this._tsHistory[u][t]=e.eventData.ts()}for(c=0;c<b.length;c++)d={},d[Q]=b[c],this._channel.trigger(new C(D,d))}this._reportBuffer={};a=this._channel.request(L);b=
this._tsHistory[a]||{};this._tsHistory={};this._tsHistory[a]=b;this._isBufferingInProgress=!1}};c.prototype._onContextReportAvailable=function(a){this._workQueue.addCommand(new x(this._bufferReport,this,[a.data]))};c.prototype._onClockFlushFilterTick=function(a){this.flush()};c.prototype._installEventListeners=function(){this._channel.on(J,this._onContextReportAvailable,this);this._channel.on(h,this._onClockFlushFilterTick,this)};c.prototype._uninstallEventListeners=function(){this._channel.off(null,
null,this)};var J="context:report_available",D="filter:data_available",h="clock:flush_filter.tick",U="reset",Q="report",F="repeat_count",p="clock:flush_filter.resume",G=250,R=250,L="session_id",E="ah::ReportFilter";b.filter.ReportFilter=c})(a.ADB.core,b);(function(a,b){function c(a,b){this._onFail={fn:a,ctx:b}}var g=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case "videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");
if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case "streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");
break;case "videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case "playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");
if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case "playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case "rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");
if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case "trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");
if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case "podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case "podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");
if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case "adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case "adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");
if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case "chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");
break;case "chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case "chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");
if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0};c.prototype._fail=function(a){a=new g("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,a),!1};b.context.InputDataValidator=c})(a.ADB.va,b);(function(a,b){function c(a,b){if(!b)throw Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw Error("Reference to the context object cannot be NULL");
this._context=a}var g=b.model.Report;c.prototype.createReportForItem=function(a){return this._logger.debug(f,"Creating report for item: "+a.eventData.type()),new g(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var f="ah::ReportFactory";b.context.ReportFactory=c})(a.ADB.core,b);(function(a,b,c,g){function f(a,b){if(!a)throw Error("Reference to the channel object cannot be NULL");if(this._channel=a,
!b)throw Error("Reference to the logger object cannot be NULL");this._logger=b;this._lastInBandItem=null;this._autoComputedStartupTime=0;this._reportingInterval=Aa;this._cuserData=this._sessionData=this._qosData=this._streamData=this._assetData=null;this._adobeAnalyticsData=new C;this._serviceProviderData=new t;this._userData=new H;this._aamData=new J;this._doNotOverrideEventDuration=this._isDestroyed=this._isVideoComplete=this._isTrackingSessionActive=!1;this._reportFactory=new R(this,this._logger);
this._inputDataValidator=new L(function(a){this._logger.error(E,a.getMessage()+" | "+a.getDetails());this._channel.trigger(new x(z,a))},this);this._trackExternalErrors=!0;this._installEventListeners()}var q=c.md5,k=c.ObjectUtils,x=a.Event,u=g.model.SessionDao,C=g.model.AdobeAnalyticsDao,t=g.model.ServiceProviderDao,H=g.model.UserDao,J=g.model.AudienceManagerDao,D=g.model.EventDao,h=g.model.AssetDao,U=g.model.StreamDao,Q=g.model.QoSDao,F=g.model.AdDao,p=g.model.ChapterDao,G=g.model.TrackItem,R=g.context.ReportFactory,
L=g.context.InputDataValidator;f.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners())};f.prototype._onApiAnalyticsStart=function(a){this._logger.debug(E,"#_onApiAnalyticsStart()");a=a.data;this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._userData.visitorId(a.vid),this._userData.analyticsVisitorId(a.aid),this._userData.marketingCloudVisitorId(a.mid),this._aamData.audienceManagerBlob(a.blob),
this._aamData.audienceManagerLocationHint(a.loc_hint),a.customerIDs&&(this._cuserData=a.customerIDs),this._updateQoSInfo(a),a=new G(this,D.EVENT_TYPE_AA_START,a.playhead,null,a._eventData[P]),a.assetData.adData(null),a.assetData.type(h.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(a))};f.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(E,"#_onApiAnalyticsAdStart()");a=a.data;this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(a,["playhead"])&&
(this._updateQoSInfo(a),a=new G(this,D.EVENT_TYPE_AA_AD_START,a.playhead,null,a._eventData[P]),this._sendHit(a))};f.prototype._onApiVideoLoad=function(a){a=a.data;this._logger.debug(E,"#_onApiVideoLoad(rsid="+a.rsid+", aa_trackingServer="+a.trackingServer+")");this._resetInternalState();this._inputDataValidator.validateFields(a,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)};f.prototype._onApiVideoUnload=function(a){if(this._logger.debug(E,
"#_onApiVideoUnload()"),!this._isTrackingSessionActive)return void this._logger.debug(E,"#_onApiVideoUnload() > No active tracking session.");this._isTrackingSessionActive=!1};f.prototype._onApiVideoStart=function(a){a=a.data;if(this._logger.debug(E,"#_onApiVideoStart(id="+a.videoId+", name="+a.videoName+", length="+a.videoLength+", type="+a.streamType+", playerName="+a.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength",
"playhead","playerName"])){this._lastInBandItem=null;this._adobeAnalyticsData.reportSuiteId(a.rsid);this._adobeAnalyticsData.trackingServer(a.trackingServer);this._adobeAnalyticsData.ssl(Number(a.useSsl));this._serviceProviderData.ovp(a.ovp);this._serviceProviderData.sdk(a.sdk);this._serviceProviderData.channel(a.channel);this._serviceProviderData.libVersion(a.version);this._serviceProviderData.apiLevel(a.apiLvl);this._serviceProviderData.playerName(a.playerName);this._assetData.adData(null);this._assetData.chapterData(null);
this._assetData.videoId(a.videoId);this._assetData.length(a.videoLength);this._assetData.type(h.TYPE_MAIN_CONTENT);this._assetData.publisher(a.publisher);this._assetData.name(a.videoName);this._streamData.type(a.streamType);this._updateQoSInfo(a);var b=a.metaNielsen?k.merge(a.metaVideo,a.metaNielsen):a.metaVideo;a=new G(this,D.EVENT_TYPE_START,a.playhead,b,a._eventData[P]);this._sendHit(a)}};f.prototype._onApiVideoResume=function(a){a=a.data;if(this._logger.debug(E,"#_onApiVideoResume(id="+a.videoId+
", name="+a.videoName+", length="+a.videoLength+", type="+a.streamType+", playerName="+a.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playhead","playerName"]))this._assetData.videoId(a.videoId),this._assetData.length(a.videoLength),this._assetData.type(h.TYPE_MAIN_CONTENT),this._assetData.name(a.videoName),this._streamData.type(a.streamType),a=new G(this,D.EVENT_TYPE_RESUME,a.playhead,null,a._eventData[P]),this._sendHit(a)};
f.prototype._onApiVideoSessionEnd=function(a){this._logger.debug(E,"#_onApiVideoSessionEnd()");a=a.data;this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(a,["playhead"])&&(a=new G(this,D.EVENT_TYPE_END,a.playhead,null,a._eventData[P]),a.assetData.adData(null),a.assetData.type(h.TYPE_MAIN_CONTENT),this._sendHit(a))};f.prototype._onApiVideoComplete=function(a){this._logger.debug(E,"#_onApiVideoComplete()");a=a.data;this._checkCall("_onApiVideoComplete")&&(a=new G(this,
D.EVENT_TYPE_COMPLETE,this._assetData.length(),null,a._eventData[P]),this._sendHit(a),this._isVideoComplete=!0)};f.prototype._onApiVideoSkip=function(a){this._logger.debug(E,"#_onApiVideoSkip()");a=a.data;this._checkCall("_onApiVideoSkip")&&(a=new G(this,D.EVENT_TYPE_SKIP,a.playhead,null,a._eventData[P]),this._sendHit(a),this._isVideoComplete=!0)};f.prototype._onApiPlay=function(a){this._logger.debug(E,"#_onApiPlay()");a=a.data;this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(a,
["playhead"])&&(this._updateQoSInfo(a),a=new G(this,D.EVENT_TYPE_PLAY,a.playhead,null,a._eventData[P]),this._sendHit(a))};f.prototype._onApiPause=function(a){this._logger.debug(E,"#_onApiPause()");a=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(a,["playhead"])){this._updateQoSInfo(a);var b=new G(this,a.playheadStalled?D.EVENT_TYPE_STALL:D.EVENT_TYPE_PAUSE,a.playhead,null,a._eventData[P]);a._eventData.hasOwnProperty(T)&&(b.filterReport=a._eventData[T]);this._sendHit(b)}};
f.prototype._onApiBufferStart=function(a){this._logger.debug(E,"#_onApiBufferStart()");a=a.data;this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),a=new G(this,D.EVENT_TYPE_BUFFER,a.playhead,null,a._eventData[P]),this._sendHit(a))};f.prototype._onApiSeekStart=function(a){this._logger.debug(E,"#_onApiSeekStart()")};f.prototype._onApiSeekComplete=function(a){this._logger.debug(E,"#_onApiSeekComplete()");a=a.data;if(this._checkCall("_onApiSeekComplete")&&
this._inputDataValidator.validateFields(a,["playhead"])){var b=this._assetData.adData(),n=this._assetData.chapterData();if(a.isInAd){if(!this._inputDataValidator.validateFields(a,["adId","adPosition","podPosition","podPlayerName"]))return;var c=q(this._assetData.videoId())+"_"+a.podPosition;b&&b.podId()==c&&parseInt(b.podPosition(),10)==a.adPosition||(b=new F,b.adId(a.adId),b.adName(a.adName),b.adLength(a.adLength),b.podId(c),b.resolver(a.podPlayerName),b.podPosition(a.adPosition+""),b.podName(a.podName),
b.podOffset(a.podSecond),b.sid(this._generateSessionId()),this._assetData.adData(b));this._assetData.type(h.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(h.TYPE_MAIN_CONTENT);a.isInChapter?!this._inputDataValidator.validateFields(a,["chapterPosition","chapterLength","chapterOffset"])||n&&a.chapterPosition==n.position()||(n=new p,n.id(q(this._assetData.videoId())+"_"+a.chapterPosition),n.name(a.chapterName),n.length(a.chapterLength),n.position(a.chapterPosition),n.offset(a.chapterOffset),
n.sid(this._generateSessionId()),this._assetData.chapterData(n)):this._assetData.chapterData(null)}};f.prototype._onApiAdStart=function(a){a=a.data;if(this._logger.debug(E,"#_onApiAdStart(id="+a.adId+", player_name="+a.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+a.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(a,["playhead","podPosition","podPlayerName","adId","adPosition"])){var b=new F;b.adId(a.adId);b.adName(a.adName);b.adLength(a.adLength);
b.resolver(a.podPlayerName);b.podId(q(this._assetData.videoId())+"_"+a.podPosition);b.podPosition(a.adPosition+"");b.podName(a.podName);b.podOffset(a.podSecond);b.sid(this._generateSessionId());this._assetData.adData(b);this._assetData.type(h.TYPE_AD);this._updateQoSInfo(a);b=k.merge(a.metaVideo,a.metaAd);b=a.metaNielsen?k.merge(b,a.metaNielsen):b;b=new G(this,D.EVENT_TYPE_START,a.playhead,b,a._eventData[P]);this._sendHit(b);a.adGranularTracking&&this._updateReportingInterval(a.adTrackingInterval?
a.adTrackingInterval:this._reportingInterval,!0)}};f.prototype._onApiAdComplete=function(a){this._logger.debug(E,"#_onApiAdComplete()");a=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(a,["playhead"])){if(this._assetData.type()!=h.TYPE_AD)return void this._logger.warn(E,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(a);a=new G(this,D.EVENT_TYPE_COMPLETE,a.playhead,null,a._eventData[P]);this._sendHit(a);
this._assetData.adData(null);this._assetData.type(h.TYPE_MAIN_CONTENT);this._updateReportingInterval(this._reportingInterval,!1)}};f.prototype._onApiAdSkip=function(a){this._logger.debug(E,"#_onApiAdSkip()");a=a.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(a,["playhead"])){if(this._assetData.type()!=h.TYPE_AD)return void this._logger.warn(E,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(a);a=new G(this,D.EVENT_TYPE_SKIP,
a.playhead,null,a._eventData[P]);this._sendHit(a);this._assetData.adData(null);this._assetData.type(h.TYPE_MAIN_CONTENT);this._updateReportingInterval(this._reportingInterval,!1)}};f.prototype._onApiChapterStart=function(a){a=a.data;if(this._logger.debug(E,"#_onApiChapterStart(name="+a.chapterName+", length="+a.chapterLength+", position="+a.chapterPosition+", chapter_offset="+a.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(a,["playhead","chapterPosition",
"chapterOffset","chapterLength"])){var b=new p;b.id(q(this._assetData.videoId())+"_"+a.chapterPosition);b.name(a.chapterName);b.length(a.chapterLength);b.position(a.chapterPosition);b.offset(a.chapterOffset);b.sid(this._generateSessionId());this._assetData.chapterData(b);this._updateQoSInfo(a);b=k.merge(a.metaVideo,a.metaChapter);a=new G(this,D.EVENT_TYPE_CHAPTER_START,a.playhead,b,a._eventData[P]);a.assetData.adData(null);a.assetData.type(h.TYPE_MAIN_CONTENT);this._sendHit(a)}};f.prototype._onApiChapterComplete=
function(a){this._logger.debug(E,"#_onApiChapterComplete()");a=a.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(a,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(E,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(a);a=new G(this,D.EVENT_TYPE_CHAPTER_COMPLETE,a.playhead,null,a._eventData[P]);a.assetData.adData(null);a.assetData.type(h.TYPE_MAIN_CONTENT);
this._sendHit(a);this._assetData.chapterData(null)}};f.prototype._onApiChapterSkip=function(a){this._logger.debug(E,"#_onApiChapterSkip()");a=a.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(a,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(E,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(a);a=new G(this,D.EVENT_TYPE_CHAPTER_SKIP,a.playhead,null,a._eventData[P]);
a.assetData.adData(null);a.assetData.type(h.TYPE_MAIN_CONTENT);this._sendHit(a);this._assetData.chapterData(null)}};f.prototype._onApiBitrateChange=function(a){this._logger.debug(E,"#_onApiBitrateChange()");a=a.data;this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),a=new G(this,D.EVENT_TYPE_BITRATE_CHANGE,a.playhead,null,a._eventData[P]),this._sendHit(a))};f.prototype._onApiTrackError=function(a){a=a.data;if(this._logger.debug(E,
"#_onApiTrackError(source="+a._eventData.source+", err_id="+a._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(E,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||a._eventData.source===y){this._updateQoSInfo(a);var b=new G(this,D.EVENT_TYPE_ERROR,0,null,a._eventData[P]);b.eventData.id(a._eventData.error_id);b.eventData.source(a._eventData.source);this._sendHit(b)}};f.prototype._onApiTrackInternalError=function(a){a=a.data;this._logger.debug(E,
"#_onApiTrackInternalError(source="+a.source+", err_id="+a.error_id+")");this._updateQoSInfo(a);var b=new G(this,D.EVENT_TYPE_ERROR,0);b.eventData.id(a.error_id);b.eventData.source(a.source);this._sendHit(b)};f.prototype._onApiQuantumEnd=function(a){this._logger.debug(E,"#_onApiQuantumEnd(interval="+this._channel.request(Z)+")");var b=a.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(b,["playhead"])&&(a=this._lastInBandItem)&&(this._updateQoSInfo(b),b=new G(this,
a.eventData.type(),b.playhead,a.meta,a.callback),b.filterReport=a.filterReport,this._sendHit(b,!0))};f.prototype._onNetworkCheckStatusComplete=function(a){a=a.data;this._trackExternalErrors=a[Y];(this._reportingInterval=a[aa])||(this._reportingInterval=Aa);this._logger.debug(E,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")};f.prototype._onResetSessionId=function(a){a=this._generateSessionId();this._sessionData=new u;this._sessionData.sessionId(a);this._logger.debug(E,
"#_resetSessionId(new sessionId="+a+")")};f.prototype._installEventListeners=function(){this._channel.on(I,this._onApiAnalyticsStart,this);this._channel.on(ca,this._onApiAnalyticsAdStart,this);this._channel.on(X,this._onApiVideoLoad,this);this._channel.on(fa,this._onApiVideoUnload,this);this._channel.on(N,this._onApiVideoStart,this);this._channel.on(ga,this._onApiVideoComplete,this);this._channel.on(wa,this._onApiVideoSkip,this);this._channel.on(na,this._onApiVideoResume,this);this._channel.on(pa,
this._onApiVideoSessionEnd,this);this._channel.on(ia,this._onApiAdStart,this);this._channel.on(m,this._onApiAdComplete,this);this._channel.on(ma,this._onApiAdSkip,this);this._channel.on(ka,this._onApiPlay,this);this._channel.on(qa,this._onApiPause,this);this._channel.on(da,this._onApiBufferStart,this);this._channel.on(la,this._onApiSeekStart,this);this._channel.on(ba,this._onApiSeekComplete,this);this._channel.on(ea,this._onApiChapterStart,this);this._channel.on(oa,this._onApiChapterComplete,this);
this._channel.on(ta,this._onApiChapterSkip,this);this._channel.on(ha,this._onApiBitrateChange,this);this._channel.on(ra,this._onApiTrackError,this);this._channel.on(W,this._onApiTrackInternalError,this);this._channel.on(ya,this._onApiQuantumEnd,this);this._channel.on(Ca,this._onNetworkCheckStatusComplete,this);this._channel.on(O,this._onResetSessionId,this);this._channel.reply(V,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)};f.prototype._uninstallEventListeners=
function(){this._channel.off(null,null,this)};f.prototype._resetInternalState=function(){this._logger.debug(E,"#_resetInternalState()");this._isVideoComplete=this._isTrackingSessionActive=!1;this._autoComputedStartupTime=0;this._lastInBandItem=null;this._streamData=new U;this._qosData=new Q;this._sessionData=new u;this._assetData=new h;this._cuserData=null};f.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1E9*Math.random())};f.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||
0);this._qosData.fps(a.fps||0);this._qosData.droppedFrames(a.droppedFrames||0);null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)};f.prototype._checkCall=function(a){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===a||(this._logger.warn(E,"#"+a+"() > The video content already completed."),
!1):(this._logger.warn(E,"#"+a+"() > No active tracking session."),!1)};f.prototype._updateReportingInterval=function(a,b){var c={};c[n]=!!b;c[aa]=a;this._channel.trigger(new x(Da,c))};f.prototype._updateLastInBandItem=function(a){var b=this._lastInBandItem,n=(new Date).getTime(),c=b.assetData.type()===h.TYPE_AD||a.assetData.type()===h.TYPE_AD,d=1E3*Math.abs(a.eventData.playhead()-b.eventData.playhead()),I=Math.abs(n-b.eventData.ts()),e=Math.abs(d-I),f=I;f>ja?(this._logger.warn(E," Resetting duration in lastInBandItem["+
b.assetData.type()+":"+b.eventData.type()+"] call to 0 as calculated duration ("+f+")exceeds 10mins"),f=0):b.eventData.type()==D.EVENT_TYPE_PLAY&&!c&&!this._doNotOverrideEventDuration&&e>za&&(f=Math.min(d,I),this._logger.warn(E," Resetting duration in lastInBandItem["+b.assetData.type()+":"+b.eventData.type()+"] call to "+f+" as calculated error delta ("+e+")exceeds 2sec"));this._doNotOverrideEventDuration=!1;b.eventData.duration(f);b.eventData.ts(n);b.eventData.playhead(a.eventData.playhead());b.qosData.startupTime(a.qosData.startupTime());
b.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden};f.prototype._createAndSendReport=function(a){a=this._reportFactory.createReportForItem(a);a.qosData.isStartupTimeOverridden||a.qosData.startupTime(this._autoComputedStartupTime);var b={};if(b[S]=a,this._channel.trigger(new x(Ba,b)),a.eventData.type()==D.EVENT_TYPE_START||a.eventData.type()==D.EVENT_TYPE_PLAY||a.eventData.type()==D.EVENT_TYPE_PAUSE||a.eventData.type()==D.EVENT_TYPE_STALL||a.eventData.type()==D.EVENT_TYPE_BUFFER)a=
{},a[K]=!0,this._channel.command(r,a)};f.prototype._sendHit=function(a,b){switch(a.eventData.type()){case D.EVENT_TYPE_START:case D.EVENT_TYPE_PLAY:case D.EVENT_TYPE_PAUSE:case D.EVENT_TYPE_STALL:case D.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==D.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==h.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),
b&&this._lastInBandItem.eventData.type()==a.eventData.type()||this._createAndSendReport(a)):this._createAndSendReport(a);this._lastInBandItem=a;break;case D.EVENT_TYPE_COMPLETE:case D.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(a),this._createAndSendReport(this._lastInBandItem)),a.eventData.type()!==D.EVENT_TYPE_SKIP&&this._createAndSendReport(a),a.assetData.type()==h.TYPE_MAIN_CONTENT){this._lastInBandItem=null;var n={};n[K]=!0;this._channel.command($,n)}else a.assetData.type()==
h.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(h.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case D.EVENT_TYPE_CHAPTER_START:case D.EVENT_TYPE_CHAPTER_COMPLETE:case D.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(a),this._createAndSendReport(this._lastInBandItem));a.eventData.type()!==D.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(a);this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==
D.EVENT_TYPE_CHAPTER_START?new p(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(a)}};var E="ah::Context",y="sourceErrorSDK",z="error",r="clock:reporting.resume",$="clock:reporting.pause",Z="reporting_interval",V="session_id",O="reset_session_id",P="callback",T="filter_report",S="report",K="reset",Y="track_external_errors",aa="reporting_interval",n="do_not_override_interval",I="api:aa_start",
ca="api:aa_ad_start",X="api:video_load",fa="api:video_unload",N="api:video_start",ga="api:video_complete",wa="api:video_skip",na="api:video_resume",pa="api:video_session_end",ia="api:ad_start",m="api:ad_complete",ma="api:ad_skip",ka="api:play",qa="api:pause",da="api:buffer_start",la="api:seek_start",ba="api:seek_complete",ea="api:chapter_start",oa="api:chapter_complete",ta="api:chapter_skip",ra="api:track_error",W="api:track_internal_error",ha="api:bitrate_change",ya="api:quantum_end",Ba="context:report_available",
Ca="net:check_status_complete",Da="reporting:update_interval",ja=6E5,za=2E3,Aa=10;g.context.Context=f})(a.ADB.core,a.ADB.va,a.ADB.va.utils,b);(function(a){a.AdobeHeartbeatPluginConfig=function(a,b){this.trackingServer=a;this.publisher=b;this.ssl=!1;this.sdk=this.ovp="unknown";this.__isPrimetime=this.debugLogging=this.quietMode=!1;this.__psdkVersion=null}})(b);(function(a){function b(){}b.prototype.onError=function(a){};a.AdobeHeartbeatPluginDelegate=b})(b);(function(a,b,c){function g(a){g.__super__.constructor.call(this,
U);this._radio=new x(this._logger);this._channel=this._radio.channel(y);this._delegate=a;this._context=new t(this._channel,this._logger);this._filter=new H(this._channel,this._logger);this._network=new J(this._channel,this._logger);this._setupDataResolver()}var f=a.Event,q=a.Trigger,k=a.plugin.ParamMapping,x=a.radio.Radio,u=b.ErrorInfo,C=b.Version,t=c.context.Context,H=c.filter.ReportFilter,J=c.network.Network,D=c.clock.Clock,h=c.AdobeHeartbeatPluginConfig;a.extend(g,a.plugin.BasePlugin);g.prototype.configure=
function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof h))throw Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=a;this._config.debugLogging?this._logger.enable():this._logger.disable();this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");a=this._config.trackingServer+
"/settings/";var b={};b[ra]=this._config.trackingServer;b[W]=a;b[ha]=this._config.publisher;b[ya]=this._config.quietMode;b[Ba]=this._config.ssl;this._channel.trigger(new f(za,b));this._isConfigured=!0};g.prototype.bootstrap=function(a){g.__super__.bootstrap.call(this,a);this._channel.on(z,this._onError,this);this._clock=new D(this._pluginManager,this._channel,this._logger);this._channel.command(sa);this._channel.trigger(new f(eb));this._registerCommands();this._registerBehaviours()};g.prototype._teardown=
function(){this._logger.debug(this._logTag,"#_teardown()");this._radio.shutdown();this._context.destroy();this._clock.destroy();this._filter.destroy();this._network.destroy()};g.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):g.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)};g.prototype._cmdAnalyticsError=function(a){this._errorInfo||
(this._errorInfo=new u("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))};g.prototype._cmdAnalyticsStart=function(a){if(this._canProcess()){var b={};b[Ca]=a.visitorOptedOut;this._channel.trigger(new f(Aa,b));this._channel.trigger(new f(Da,a))}};g.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new f(ja,a))};g.prototype._cmdVideoLoad=function(a){this._errorInfo=null;
this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new f(Ea,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new f(Pa,a)),this._isTrackingSessionActive=!0)};g.prototype._cmdVideoUnload=function(a){this._errorInfo=null;this._canProcess()&&(this._channel.trigger(new f(Ea,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),
this._isTrackingSessionActive=!1)};g.prototype._cmdVideoSessionEnd=function(a){this._canProcess()&&this._channel.trigger(new f(Ka,a))};g.prototype._cmdVideoStart=function(a){this._canProcess()&&(this._channel.trigger(new f(Qa,a)),this._filter.flush())};g.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new f(Fa,a))};g.prototype._cmdVideoSkip=function(a){this._canProcess()&&this._channel.trigger(new f(ua,a))};g.prototype._cmdVideoResume=function(a){this._canProcess()&&
this._channel.trigger(new f(Ga,a))};g.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))};g.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new f(Ia,a)),this._isPaused=!0,this._runIdleTimer(!0))};g.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new f(Sa,a)),this._resumePlaybackIfPossible(a))};g.prototype._cmdAdComplete=function(a){this._canProcess()&&(this._channel.trigger(new f(xa,a)),a.isInAdBreak||
this._resumePlaybackIfPossible(a))};g.prototype._cmdAdSkip=function(a){this._canProcess()&&(this._channel.trigger(new f(Ha,a)),a.isInAdBreak||this._resumePlaybackIfPossible(a))};g.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new f(La,a)),this._isBuffering=!0,this._runIdleTimer(!0))};g.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new f(Ia,a)):this._resumePlaybackIfPossible(a))};g.prototype._cmdSeekStart=
function(a){this._canProcess()&&(this._channel.trigger(new f(Va,a)),this._channel.trigger(new f(Ia,a)),this._isSeeking=!0,this._runIdleTimer(!0))};g.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._channel.trigger(new f(Wa,a)),this._isSeeking=!1,this._resumePlaybackIfPossible(a))};g.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new f(Ta,a))};g.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new f(Ua,a))};g.prototype._cmdChapterSkip=
function(a){this._canProcess()&&this._channel.trigger(new f(Na,a))};g.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new f(Oa,a))};g.prototype._cmdTrackError=function(a){this._canProcess()&&this._channel.trigger(new f(Ma,a))};g.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new f(Ya,a))};g.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(da),this._channel.trigger(new f(Ka,a)),this._filter.flush(),
this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(ka))};g.prototype._onError=function(a){this._errorInfo=a.data;a={};a[oa]=Za;a[ta]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails();this._channel.trigger(new f(Ja,a));this._runReportingTimer(!1);this._trigger(z,this._errorInfo);this._delegate&&this._delegate.onError(this._errorInfo)};g.prototype._runIdleTimer=function(a){var b={};b[ea]=!0;a?this._channel.command(cb,b):this._channel.command(db,
b)};g.prototype._runFlushFilterTimer=function(a){var b={};b[ea]=!0;a?this._channel.command(ab,b):this._channel.command(bb,b)};g.prototype._runReportingTimer=function(a){var b={};b[ea]=!0;a?this._channel.command(Xa,b):this._channel.command($a,b)};g.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError);this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart);this._pluginManager.comply(this,"handleAnalyticsAdStart",
this._cmdAnalyticsAdStart);this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload);this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd);this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete);this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip);this._pluginManager.comply(this,
"handleVideoResume",this._cmdVideoResume);this._pluginManager.comply(this,"handlePlay",this._cmdPlay);this._pluginManager.comply(this,"handlePause",this._cmdPause);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete);this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip);this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart);this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete);
this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart);this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete);this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart);this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete);this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip);this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange);this._pluginManager.comply(this,"handleTrackError",
this._cmdTrackError);this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick);this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)};g.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new q(p,Z),this,"handleVideoLoad",[new k(F,"rsid","rsid"),new k(F,"tracking_server","trackingServer")]);this._pluginManager.registerBehaviour(new q(p,V),this,"handleVideoUnload");this._pluginManager.registerBehaviour(new q(p,O),this,"handleVideoSessionEnd",
[new k(p,"video.playhead","playhead")]);this._pluginManager.registerBehaviour(new q(p,P),this,"handleVideoStart",[new k(p,"video.id","videoId"),new k(p,"video.name","videoName"),new k(p,"video.length","videoLength"),new k(p,"video.playhead","playhead"),new k(p,"video.playerName","playerName"),new k(p,"video.streamType","streamType"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime"),new k(F,"rsid","rsid"),
new k(F,"tracking_server","trackingServer"),new k(F,"channel","channel"),new k(F,"meta.video.*","metaVideo"),new k(F,"ssl","useSsl"),new k(G,"meta","metaNielsen"),new k(Q,"publisher","publisher"),new k(Q,"sdk","sdk"),new k(Q,"ovp","ovp"),new k(Q,"version","version"),new k(Q,"api_level","apiLvl")]);this._pluginManager.registerBehaviour(new q(p,S),this,"handleVideoComplete",[new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime",
"startupTime")]);this._pluginManager.registerBehaviour(new q(p,K),this,"handleVideoSkip",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,T),this,"handleVideoResume",[new k(p,"video.id","videoId"),new k(p,"video.name","videoName"),new k(p,"video.length","videoLength"),new k(p,"video.playhead","playhead"),new k(p,"video.playerName",
"playerName"),new k(p,"video.streamType","streamType")]);this._pluginManager.registerBehaviour(new q(p,Y),this,"handlePlay",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,aa),this,"handlePause",[new k(p,"video.playhead","playhead"),new k(p,"video.playheadStalled","playheadStalled"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames",
"droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,I),this,"handleAdStart",[new k(p,"video.playhead","playhead"),new k(p,"ad.id","adId"),new k(p,"ad.name","adName"),new k(p,"ad.length","adLength"),new k(p,"ad.position","adPosition"),new k(p,"ad.granularTracking","adGranularTracking"),new k(p,"ad.trackingInterval","adTrackingInterval"),new k(p,"pod.name","podName"),new k(p,"pod.playerName","podPlayerName"),new k(p,
"pod.position","podPosition"),new k(p,"pod.startTime","podSecond"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime"),new k(F,"meta.video.*","metaVideo"),new k(F,"meta.ad.*","metaAd"),new k(G,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new q(p,ca),this,"handleAdComplete",[new k(p,"video.playhead","playhead"),new k(p,"ad.isInAdBreak","isInAdBreak"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames",
"droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,X),this,"handleAdSkip",[new k(p,"video.playhead","playhead"),new k(p,"ad.isInAdBreak","isInAdBreak"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,fa),this,"handleBufferStart",[new k(p,"video.playhead","playhead"),new k(p,
"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,N),this,"handleBufferComplete",[new k(p,"video.playhead","playhead"),new k(p,"video.playheadStalled","playheadStalled"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,ga),this,
"handleSeekStart",[new k(p,"video.playhead","playhead")]);this._pluginManager.registerBehaviour(new q(p,wa),this,"handleSeekComplete",[new k(p,"video.playhead","playhead"),new k(p,"ad.isInAd","isInAd"),new k(p,"ad.id","adId"),new k(p,"ad.position","adPosition"),new k(p,"pod.playerName","podPlayerName"),new k(p,"pod.position","podPosition"),new k(p,"chapter.isInChapter","isInChapter"),new k(p,"chapter.position","chapterPosition"),new k(p,"chapter.name","chapterName"),new k(p,"chapter.length","chapterLength"),
new k(p,"chapter.startTime","chapterOffset"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,na),this,"handleChapterStart",[new k(p,"video.playhead","playhead"),new k(p,"chapter.position","chapterPosition"),new k(p,"chapter.name","chapterName"),new k(p,"chapter.length","chapterLength"),new k(p,"chapter.startTime","chapterOffset"),new k(p,"qos.fps","fps"),
new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime"),new k(F,"meta.video.*","metaVideo"),new k(F,"meta.chapter.*","metaChapter"),new k(G,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new q(p,pa),this,"handleChapterComplete",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,
ia),this,"handleChapterSkip",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,m),this,"handleBitrateChange",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,
ma),this,"handleTrackError");this._pluginManager.registerBehaviour(new q(R,la),this,"handleClockReportingTick",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(p,n),this,"handleClockReportingTick",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate",
"bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(R,ba),this,"handleIdleTick",[new k(p,"video.playhead","playhead")]);this._pluginManager.registerBehaviour(new q(Q,da),this,"handleClockReportingTick",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(F,z),this,"handleAnalyticsError");
this._pluginManager.registerBehaviour(new q(F,r),this,"handleAnalyticsStart",[new k(F,"vid","vid"),new k(F,"aid","aid"),new k(F,"mid","mid"),new k(F,"customerIDs","customerIDs"),new k(F,"visitorOptedOut","visitorOptedOut"),new k(F,"blob","blob"),new k(F,"loc_hint","loc_hint"),new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new q(F,
$),this,"handleAnalyticsAdStart",[new k(p,"video.playhead","playhead"),new k(p,"qos.fps","fps"),new k(p,"qos.droppedFrames","droppedFrames"),new k(p,"qos.bitrate","bitrate"),new k(p,"qos.startupTime","startupTime")])};g.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return C.getVersion()};a.api_level=function(){return C.getApiLevel()};a.tracking_server=function(){return b._config?b._config.trackingServer:null};a.publisher=function(){return b._config?b._config.publisher:
null};a.quiet_mode=function(){return!!b._config&&b._config.quietMode};a.ovp=function(){return b._config?b._config.ovp:null};a.sdk=function(){return b._config?b._config.sdk:null};a.is_primetime=function(){return!!b._config&&b._config.__isPrimetime};a.psdk_version=function(){return b._config?b._config.__psdkVersion:null};a.session_id=function(){return b._channel.request(L)};this._dataResolver=function(b){if(!b||0==b.length)return null;for(var n=null,c=0;c<b.length;c++){var d=b[c],n=n||{};n[d]=a.hasOwnProperty(d)?
a[d].call(this):null}return n}};g.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new f(Ra,a)))};g.prototype._resumePlaybackFromIdle=function(){this._trigger(da);this._filter.clear();this._channel.trigger(new f(E));this._trigger(qa);this._runReportingTimer(!0);this._runFlushFilterTimer(!0)};var U="adobe-heartbeat",
Q=U,F="adobe-analytics",p="player",G="nielsen",R="service.clock",L="session_id",E="reset_session_id",y="heartbeat-channel",z="error",r="aa_start",$="sc_ad_start",Z="video_load",V="video_unload",O="video_session_end",P="video_start",T="video_resume",S="video_complete",K="video_skip",Y="play",aa="pause",n="content_start",I="ad_start",ca="ad_complete",X="ad_skip",fa="buffer_start",N="buffer_complete",ga="seek_start",wa="seek_complete",na="chapter_start",pa="chapter_complete",ia="chapter_skip",m="bitrate_change",
ma="track_error",ka="video_idle_start",qa="video_idle_resume",da="quantum_close",la="heartbeat.reporting.tick",ba="heartbeat.idle.tick",ea="reset",oa="source",ta="error_id",ra="tracking_server",W="check_status_server",ha="publisher",ya="quiet_mode",Ba="ssl",Ca="visitor_opt_out",Da="api:aa_start",ja="api:aa_ad_start",za="api:config",Aa="api:update_visitor_optout",Pa="api:video_load",Ea="api:video_unload",Qa="api:video_start",Fa="api:video_complete",ua="api:video_skip",Ga="api:video_resume",Ka="api:video_session_end",
Sa="api:ad_start",xa="api:ad_complete",Ha="api:ad_skip",Ra="api:play",Ia="api:pause",La="api:buffer_start",Va="api:seek_start",Wa="api:seek_complete",Ta="api:chapter_start",Ua="api:chapter_complete",Na="api:chapter_skip",Ma="api:track_error",Ja="api:track_internal_error",Oa="api:bitrate_change",Ya="api:quantum_end",Za="sourceErrorHeartbeat",sa="clock:check_status.resume",Xa="clock:reporting.resume",$a="clock:reporting.pause",ab="clock:flush_filter.resume",bb="clock:flush_filter.pause",cb="clock:idle.resume",
db="clock:idle.pause",eb="clock:check_status.get_settings";c.AdobeHeartbeatPlugin=g})(a.ADB.core,a.ADB.va,b);a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=b)}(this);!function(a){if(void 0===b)var b={};!function(a,b){function c(a,b){this._onFail={fn:a,ctx:b}}var g=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case "videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");
if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case "streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");
break;case "playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case "videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");
if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case "podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case "podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");
if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case "adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case "adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");
if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case "adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+
d)}}return!0};c.prototype._fail=function(a){a=new g("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,a),!1};b.InputDataValidator=c}(a.ADB.va,b);(function(a){a.AdobeAnalyticsPluginConfig=function(){this.channel="";this.debugLogging=!1}})(b);(function(a){function b(){}b.prototype.onError=function(a){};a.AdobeAnalyticsPluginDelegate=b})(b);(function(a,b,c,g){function f(a,b){if(f.__super__.constructor.call(this,Q),!a)throw Error("The reference to the AppMeasurement object cannot be NULL.");
if(a.unsupportedBrowser)throw Error("AppMeasurement is not supported in current browser.");this._appMeasurement=a;this._delegate=b;this._videoMetadata={};this._adMetadata={};this._chapterMetadata={};this._errorInfo=null;this._workQueue=new C(!0,L);this._inputDataValidator=new U(function(a){this._errorInfo=a;this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(E,a);b._delegate&&b._delegate.onError(b._errorInfo)},0)},this);this._appMeasurement.isReadyToTrack();
this._setupDataResolver()}var q=a.Trigger,k=a.plugin.ParamMapping,x=a.radio.Channel,u=a.radio.Command,C=a.radio.CommandQueue,t=b.ErrorInfo,H=c.md5,J=c.StringUtils,D=c.ObjectUtils,h=g.AdobeAnalyticsPluginConfig,U=g.InputDataValidator;a.extend(f,a.plugin.BasePlugin);f.prototype.configure=function(a){if(!a)throw Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof h))throw Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a;this._config.debugLogging?
this._logger.enable():this._logger.disable();this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")};f.prototype.bootstrap=function(a){f.__super__.bootstrap.call(this,a);this._registerCommands();this._registerBehaviours()};f.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,
[]);f.__super__.setup.call(this)};f.prototype.setVideoMetadata=function(a){this._videoMetadata=D.clone(a)};f.prototype.setAdMetadata=function(a){this._adMetadata=D.clone(a)};f.prototype.setChapterMetadata=function(a){this._chapterMetadata=D.clone(a)};f.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):f.__super__._canProcess.call(this)};f.prototype._cmdVideoLoad=function(a){this._errorInfo=null};f.prototype._cmdVideoStart=
function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()");this._canProcess()&&this._workQueue.addCommand(new u(this._executeOpen,this,[a]))};f.prototype._cmdAdStart=function(a){this._logger.debug(this._logTag,"#_cmdAdStart()");this._canProcess()&&this._workQueue.addCommand(new u(this._executeOpenAd,this,[a]))};f.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new t("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(E,this._errorInfo),this._delegate&&
this._delegate.onError(this._errorInfo))};f.prototype._track=function(a){if(!this._appMeasurement.visitorOptedOut){var b=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars="";this._appMeasurement.track(a);this._appMeasurement.linkTrackVars=b}};f.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+
a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playerName"])){var b={},n;for(n in a.metaVideo)a.metaVideo.hasOwnProperty(n)&&(b[n]=a.metaVideo[n]);if(a.metaNielsen)for(n in a.metaNielsen)a.metaNielsen.hasOwnProperty(n)&&(b[n]=a.metaNielsen[n]);b["a.contentType"]=a.streamType;b["a.media.name"]=a.videoId;b["a.media.friendlyName"]=a.videoName||"";b["a.media.length"]=Math.floor(a.videoLength)||"0.0";b["a.media.playerName"]=
a.playerName;b["a.media.channel"]=a.channel||"";b["a.media.view"]=!0;b["a.media.vsid"]=a.sessionId;n={};n.contextData=b;n.pev3=y;n.pe=a.isPrimetime?$:r;this._track(n);var c=this;setTimeout(function(){c._trigger(O,a)},0)}};f.prototype._executeOpenAd=function(a){var b=H(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", streamType="+a.streamType+", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+
a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,"videoId streamType playerName adId adLength podPlayerName adPosition".split(" "))){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond;var n,c={};for(n in a.metaVideo)a.metaVideo.hasOwnProperty(n)&&(c[n]=a.metaVideo[n]);for(n in a.metaAd)a.metaAd.hasOwnProperty(n)&&(c[n]=a.metaAd[n]);if(a.metaNielsen)for(n in a.metaNielsen)a.metaNielsen.hasOwnProperty(n)&&(c[n]=a.metaNielsen[n]);
c["a.contentType"]=a.streamType;c["a.media.name"]=a.videoId;c["a.media.playerName"]=a.playerName;c["a.media.channel"]=a.channel||"";c["a.media.vsid"]=a.sessionId;c["a.media.friendlyName"]=a.videoName||"";c["a.media.length"]=Math.floor(a.videoLength)||"0.0";c["a.media.ad.name"]=a.adId;c["a.media.ad.friendlyName"]=a.adName||"";c["a.media.ad.podFriendlyName"]=a.podName||"";c["a.media.ad.length"]=Math.floor(a.adLength)||"0.0";c["a.media.ad.playerName"]=a.podPlayerName;c["a.media.ad.pod"]=b;c["a.media.ad.podPosition"]=
Math.floor(a.adPosition)||"0.0";c["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0";c["a.media.ad.view"]=!0;b={};b.contextData=c;b.pev3=z;b.pe=a.isPrimetime?V:Z;this._track(b);var d=this;setTimeout(function(){d._trigger(P,a)},0)}};f.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account};a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer};
a.ssl=function(){return b._appMeasurement.ssl};a.vid=function(){return b._appMeasurement.visitorID};a.aid=function(){return b._appMeasurement.analyticsVisitorID};a.mid=function(){return b._appMeasurement.marketingCloudVisitorID};a.blob=function(){return b._appMeasurement.audienceManagerBlob};a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""};a.customerIDs=function(){var a={},c=b._appMeasurement.visitor.getCustomerIDs(),
d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?a[d+".as"]=e[f]:a[d+"."+f]=e[f]);a[d+".as"]||(a[d+".as"]="0")}}return a};a.visitorOptedOut=function(){return!!b._appMeasurement.visitorOptedOut};a.channel=function(){return b._config?b._config.channel:null};a.meta=function(a){a=a.split(".");if(2>a.length)return null;var c=a.shift();switch(a=a.join("."),c){case "video":return a==x.WILDCARD?b._videoMetadata:b._videoMetadata[a];
case "ad":return a==x.WILDCARD?b._adMetadata:b._adMetadata[a];case "chapter":return a==x.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}};this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d],c=c||{};J.startsWith(e,"meta.")?c[e]=a.meta(e.split("meta.")[1]):c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}};f.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);
this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)};f.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new q(G,T),this,"handleVideoLoad");this._pluginManager.registerBehaviour(new q(G,S),this,"handleVideoStart",[new k(G,"video.id","videoId"),new k(G,"video.streamType","streamType"),new k(G,"video.name",
"videoName"),new k(G,"video.length","videoLength"),new k(G,"video.playerName","playerName"),new k(G,"video.streamType","streamType"),new k(R,"is_primetime","isPrimetime"),new k(R,"session_id","sessionId"),new k(F,"channel","channel"),new k(F,"meta.video.*","metaVideo"),new k(p,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new q(G,K),this,"handleAdStart",[new k(G,"video.id","videoId"),new k(G,"video.streamType","streamType"),new k(G,"video.playhead","playhead"),new k(G,"video.playerName",
"playerName"),new k(G,"video.name","videoName"),new k(G,"video.length","videoLength"),new k(G,"ad.id","adId"),new k(G,"ad.length","adLength"),new k(G,"ad.position","adPosition"),new k(G,"ad.name","adName"),new k(G,"pod.name","podName"),new k(G,"pod.position","podPosition"),new k(G,"pod.playerName","podPlayerName"),new k(G,"pod.startTime","podSecond"),new k(R,"is_primetime","isPrimetime"),new k(R,"session_id","sessionId"),new k(F,"channel","channel"),new k(F,"meta.video.*","metaVideo"),new k(F,"meta.ad.*",
"metaAd"),new k(p,"meta","metaNielsen")]);this._pluginManager.registerBehaviour(new q(R,E),this,"handleHeartbeatPluginError")};f.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"[Init] #_onAppMeasurementReady");this._workQueue.resume()};var Q="adobe-analytics",F=Q,p="nielsen",G="player",R="adobe-heartbeat",L=2E3,E="error",y="video",z="videoAd",r="ms_s",$="msp_s",Z="msa_s",V="mspa_s",O="aa_start",P="sc_ad_start",T="video_load",S="video_start",K="ad_start";g.AdobeAnalyticsPlugin=
f})(a.ADB.core,a.ADB.va,a.ADB.va.utils,b);(function(a){a.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",
STREAM_FORMAT:"a.media.format"};a.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}})(b);a.ADB.va.plugins.aa||(a.ADB.va.plugins.aa=b)}(this);!function(a){!function(a,d){function e(){this._processAction=!0;this._store={}}function c(a){if(!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a;this._rules=[]}
e.prototype.setRuleName=function(a){this._ruleName=a};e.prototype.getRuleName=function(a,b){return this._ruleName};e.prototype.setData=function(a,b){this._store[a]=b};e.prototype.getData=function(a){return this._store[a]};e.prototype.shouldProcessAction=function(){return this._processAction};e.prototype.stopProcessingAction=function(){this._processAction=!1};e.prototype.startProcessingAction=function(){this._processAction=!0};c.createContext=function(){return new e};c.createPredicate=function(a,b,
c){return{fn:a,expectedValue:b,msg:c}};c.prototype.registerRule=function(a,b,c,d,e){this._rules.push({name:a,desc:b,preconditions:c,actions:d,scope:e})};c.prototype.registerEnterExitAction=function(a,b){this._enterAction=a;this._exitAction=b};c.prototype._handleFailure=function(a,b){this._logger.error(g,a.desc+" -  "+b.msg)};c.prototype._getRule=function(a){for(var b=0;b<this._rules.length;++b)if(this._rules[b].name===a)return this._rules[b];return null};c.prototype.processRule=function(a,b){var d=
!0,e=this._getRule(a);if(e){var u=e.scope;b||(b=c.createContext());b.setRuleName(a);for(var C=!1,t=0;t<e.preconditions.length;++t){var H=e.preconditions[t];if(C=!!H.fn.call(u,b)!==H.expectedValue){this._handleFailure(e,H);break}}if(C)d=!1;else{b.startProcessingAction();this._enterAction&&this._enterAction.call(u,b);for(t=0;t<e.actions.length;++t){C=e.actions[t];if(!b.shouldProcessAction()){this._logger.info(g,"Stopping actions for "+e.desc);break}C.call(u,b)}this._exitAction&&b.shouldProcessAction()&&
this._exitAction.call(u,b)}}else this._logger.warn(g,"No registered event found for ruleName "+a),d=!1;return d};var g="RuleEngine";d._RuleEngine=c}(a.ADB.core,a.ADB.va);(function(a,d){function e(a,b,c){this.taskFn=a;this.scope=b;this.remainingInterval=this.interval=c}function c(a){if(!a)throw Error("Reference to the logger object cannot be NULL");this._logger=a;this._tasks=[];this._pausedTasks=[]}e.prototype.elapsedTime=function(a){this.remainingInterval-=a};e.prototype.shouldExecute=function(){return 0>=
this.remainingInterval};e.prototype.execute=function(){this.taskFn.call(this.scope)};c.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()};c.prototype._runTasksForTime=function(a){var b=[],c=a-this._lastTickTime;this._lastTickTime=a;for(a=0;a<this._tasks.length;){var d=this._tasks[a];d.elapsedTime(c);d.shouldExecute()?(b.push(d),this._tasks.splice(a,1)):++a}this._checkStopTimer();for(a=0;a<b.length;++a)b[a].execute()};c.prototype._onTick=function(){var a=this._getCurrentTimeInMS();
this._runTasksForTime(a)};c.prototype._startTimer=function(){var a=this;this._timer||(this._logger.info(g,"#startTimer()"),a._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval(function(){a._onTick()},f))};c.prototype._stopTimer=function(){this._timer&&(this._logger.info(g,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)};c.prototype._checkStartTimer=function(){0<this._tasks.length&&this._startTimer()};c.prototype._checkStopTimer=function(){0===this._tasks.length&&
this._stopTimer()};c.prototype._removeTask=function(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return a.splice(c,1),!0;return!1};c.prototype.scheduleTask=function(a,b,c){if(this._logger.info(g,"#scheduleTask()"),!a)throw Error("Reference to the taskFn cannot be NULL");a=new e(a,b,c);return this._tasks.push(a),this._checkStartTimer(),a};c.prototype.cancelTask=function(a){this._logger.info(g,"#cancelTask()");this._removeTask(this._tasks,a);this._checkStopTimer()};c.prototype.pauseTask=function(a){this._logger.info(g,
"#pauseTask()");this._removeTask(this._tasks,a)&&this._pausedTasks.push(a);this._checkStopTimer()};c.prototype.resumeTask=function(a){this._logger.info(g,"#resumeTask()");this._removeTask(this._pausedTasks,a)&&this._tasks.push(a);this._checkStartTimer()};c.prototype.clearTasks=function(){this._stopTimer();this._tasks=[];this._pausedTasks=[]};var g="TaskScheduler",f=250;d._TaskScheduler=c})(a.ADB.core,a.ADB.va);(function(a){function d(){this.playerName=this.appVersion=this.ovp=this.channel=this.trackingServer=
void 0;this.debugLogging=this.ssl=!1}a.MediaHeartbeatConfig=d;a.MediaHeartbeatConfig.sharedInstance=new d})(a.ADB.va);(function(a){function d(){this.data={}}var e=a.plugins.videoplayer.VideoInfo,c=a.plugins.videoplayer.AdBreakInfo,g=a.plugins.videoplayer.AdInfo,f=a.plugins.videoplayer.ChapterInfo,q=a.plugins.videoplayer.QoSInfo;d.MEDIAINFO_KEY_NAME="a.name";d.MEDIAINFO_KEY_VIDEOID="a.videoId";d.MEDIAINFO_KEY_ADID="a.adId";d.MEDIAINFO_KEY_LENGTH="a.length";d.MEDIAINFO_KEY_PLAYHEAD="a.playhead";d.MEDIAINFO_KEY_STREAMTYPE=
"a.streamType";d.MEDIAINFO_KEY_POSITION="a.position";d.MEDIAINFO_KEY_STARTTIME="a.startTime";d.MEDIAINFO_KEY_BITRATE="a.bitrate";d.MEDIAINFO_KEY_FPS="a.fps";d.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames";d.MEDIAINFO_KEY_STARTUPTIME="a.startupTime";d.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata";d.prototype.setValue=function(a,b){this.data[a]=b};d.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null};d.prototype.createVideoInfo=function(){var a=new e;return a.id=null!=
this.getValue(d.MEDIAINFO_KEY_VIDEOID)?this.getValue(d.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(d.MEDIAINFO_KEY_NAME)?this.getValue(d.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(d.MEDIAINFO_KEY_LENGTH)?this.getValue(d.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(d.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(d.MEDIAINFO_KEY_PLAYHEAD):0,a.streamType=null!=this.getValue(d.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(d.MEDIAINFO_KEY_STREAMTYPE):"",a};d.prototype.createAdBreakInfo=function(){var a=
new c;return a.name=null!=this.getValue(d.MEDIAINFO_KEY_NAME)?this.getValue(d.MEDIAINFO_KEY_NAME):"",a.position=null!=this.getValue(d.MEDIAINFO_KEY_POSITION)?this.getValue(d.MEDIAINFO_KEY_POSITION):0,a.startTime=null!=this.getValue(d.MEDIAINFO_KEY_STARTTIME)?this.getValue(d.MEDIAINFO_KEY_STARTTIME):0,a};d.prototype.createAdInfo=function(){var a=new g;return a.id=null!=this.getValue(d.MEDIAINFO_KEY_ADID)?this.getValue(d.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(d.MEDIAINFO_KEY_NAME)?this.getValue(d.MEDIAINFO_KEY_NAME):
"",a.length=null!=this.getValue(d.MEDIAINFO_KEY_LENGTH)?this.getValue(d.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(d.MEDIAINFO_KEY_POSITION)?this.getValue(d.MEDIAINFO_KEY_POSITION):0,a};d.prototype.createChapterInfo=function(){var a=new f;return a.name=null!=this.getValue(d.MEDIAINFO_KEY_NAME)?this.getValue(d.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(d.MEDIAINFO_KEY_LENGTH)?this.getValue(d.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(d.MEDIAINFO_KEY_STARTTIME)?this.getValue(d.MEDIAINFO_KEY_STARTTIME):
0,a.position=null!=this.getValue(d.MEDIAINFO_KEY_POSITION)?this.getValue(d.MEDIAINFO_KEY_POSITION):0,a};d.prototype.createQoSInfo=function(){var a=new q;return a.bitrate=null!=this.getValue(d.MEDIAINFO_KEY_BITRATE)?this.getValue(d.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(d.MEDIAINFO_KEY_FPS)?this.getValue(d.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=this.getValue(d.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(d.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(d.MEDIAINFO_KEY_STARTUPTIME)?
this.getValue(d.MEDIAINFO_KEY_STARTUPTIME):0,a};d.prototype.isEqual=function(a){if(this===a)return!0;if(!a||"object"!=typeof a||"function"!=typeof a.getValue)return!1;for(var b=[d.MEDIAINFO_KEY_NAME,d.MEDIAINFO_KEY_VIDEOID,d.MEDIAINFO_KEY_ADID,d.MEDIAINFO_KEY_LENGTH,d.MEDIAINFO_KEY_PLAYHEAD,d.MEDIAINFO_KEY_STREAMTYPE,d.MEDIAINFO_KEY_POSITION,d.MEDIAINFO_KEY_STARTTIME,d.MEDIAINFO_KEY_BITRATE,d.MEDIAINFO_KEY_FPS,d.MEDIAINFO_KEY_DROPPEDFRAMES,d.MEDIAINFO_KEY_STARTUPTIME,d.MEDIAINFO_KEY_TIMEDMETADATA],
c=0;c<b.length;++c){var e=b[c];if(this.getValue(e)!==a.getValue(e))return!1}return!0};a.MediaObject=d})(a.ADB.va);(function(a,d){function e(a){e.__super__.constructor.call(this);this._heartbeat=a}function c(a){c.__super__.constructor.call(this);this._heartbeat=a}function g(a){g.__super__.constructor.call(this);this._heartbeat=a}function f(a){f.__super__.constructor.call(this);this._heartbeat=a}a.extend(e,d.plugins.aa.AdobeAnalyticsPluginDelegate);e.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)};
a.extend(c,d.plugins.ah.AdobeHeartbeatPluginDelegate);c.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)};a.extend(g,d.HeartbeatDelegate);g.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)};a.extend(f,d.plugins.videoplayer.VideoPlayerPluginDelegate);f.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),
this._heartbeat._videoInfo):null};f.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null};f.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null};f.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null};f.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=
this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null};d._MediaAnalyticsPluginDelegate=e;d._MediaHeartbeatPluginDelegate=c;d._ADBMediaHeartbeatDelegate=g;d._MediaHeartbeatVideoPlayerPluginDelegate=f})(a.ADB.core,a.ADB.va);(function(a,d){function e(){}function c(a){c.__super__.constructor.call(this);this._heartbeat=a}var g=d.MediaHeartbeatConfig;d.plugins.nielsen&&(e.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",
e.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",e.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",g.prototype.nielsenConfigKey=void 0,g.prototype.nielsenAppInfo=void 0,a.extend(c,d.plugins.nielsen.NielsenPluginDelegate),c.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var a=this._heartbeat._currentMediaObject.getValue(e.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof a)return a}return null},c.prototype.getAdMetadataInfo=
function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var a=this._heartbeat._currentAdObject.getValue(e.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof a)return a}return null},c.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var a=this._heartbeat._currentMediaObject.getValue(e.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof a)return a}return null},c.prototype.onError=function(a){this._heartbeat&&this._heartbeat._onDelegateError(a)},
d._MediaHeartbeatNielsen=e,d._MediaHeartbeatNielsenPluginDelegate=c)})(a.ADB.core,a.ADB.va);(function(b,d){function e(){}function c(b,c,e){if(this._appMeasurement=e||a.s,!this._appMeasurement)throw Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!b)throw Error("MediaHeartbeat needs a valid delegate object.");
if(!c||"object"!=typeof c||!c.trackingServer)throw Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=c;this._delegate=b;this._debugLogging=d.MediaHeartbeat._debugLogging||this._config.debugLogging;this._logger=new g;this._debugLogging?this._logger.enable():this._logger.disable();this._ruleEngine=new p(this._logger);this._taskScheduler=new G(this._logger);this._resetState();this._setupRules()}var g=b.Logger,f=d.plugins.videoplayer.AssetType,q=d.MediaObject,k=
d.Heartbeat,M=d.HeartbeatConfig,u=d._ADBMediaHeartbeatDelegate,C=d.plugins.videoplayer.VideoPlayerPlugin,t=d.plugins.videoplayer.VideoPlayerPluginConfig,H=d._MediaHeartbeatVideoPlayerPluginDelegate,J=d.plugins.aa.AdobeAnalyticsPlugin,D=d.plugins.aa.AdobeAnalyticsPluginConfig,h=d._MediaAnalyticsPluginDelegate,U=d.plugins.ah.AdobeHeartbeatPlugin,Q=d.plugins.ah.AdobeHeartbeatPluginConfig,F=d._MediaHeartbeatPluginDelegate,p=d._RuleEngine,G=d._TaskScheduler,R=d.utils.ObjectUtils;if(e.prototype.getCurrentPlaybackTime=
function(){return null},e.prototype.getQoSObject=function(){return null},c.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},c.StreamType={VOD:"vod",LIVE:"live",
LINEAR:"linear"},c.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},c.VideoMetadataKeys=d.plugins.aa.VideoMetadataKeys,c.AdMetadataKeys=d.plugins.aa.AdMetadataKeys,c.createMediaObject=function(a,b,c,d){var e=new q;e.setValue(q.MEDIAINFO_KEY_VIDEOID,b);e.setValue(q.MEDIAINFO_KEY_NAME,a);e.setValue(q.MEDIAINFO_KEY_LENGTH,c);e.setValue(q.MEDIAINFO_KEY_PLAYHEAD,
0);return e.setValue(q.MEDIAINFO_KEY_STREAMTYPE,d||f.ASSET_TYPE_VOD),e},c.createAdBreakObject=function(a,b,c){var d=new q;return d.setValue(q.MEDIAINFO_KEY_NAME,a),d.setValue(q.MEDIAINFO_KEY_POSITION,b),d.setValue(q.MEDIAINFO_KEY_STARTTIME,c),d},c.createAdObject=function(a,b,c,d){var e=new q;return e.setValue(q.MEDIAINFO_KEY_NAME,a),e.setValue(q.MEDIAINFO_KEY_ADID,b),e.setValue(q.MEDIAINFO_KEY_POSITION,c),e.setValue(q.MEDIAINFO_KEY_LENGTH,d),e},c.createChapterObject=function(a,b,c,d){var e=new q;
return e.setValue(q.MEDIAINFO_KEY_NAME,a),e.setValue(q.MEDIAINFO_KEY_POSITION,b),e.setValue(q.MEDIAINFO_KEY_LENGTH,c),e.setValue(q.MEDIAINFO_KEY_STARTTIME,d),e},c.createQoSObject=function(a,b,c,d){var e=new q;return e.setValue(q.MEDIAINFO_KEY_BITRATE,a),e.setValue(q.MEDIAINFO_KEY_FPS,c),e.setValue(q.MEDIAINFO_KEY_DROPPEDFRAMES,d),e.setValue(q.MEDIAINFO_KEY_STARTUPTIME,b),e},c.createTimedMetadataObject=function(a){var b=new q;return b.setValue(q.MEDIAINFO_KEY_TIMEDMETADATA,a),b},c.version=function(){return d.Version.getVersion()},
c.prototype.trackSessionStart=function(a,b){this._logger.info(r,"#::trackSessionStart()");var c=p.createContext();c.setData($,a);c.setData(T,this._cleanContextData(b));this._processRule(y.SessionStart,c)},c.prototype.trackPlay=function(){this._logger.info(r,"#::trackPlay()");this._processRule(y.Play)},c.prototype.trackPause=function(){this._logger.info(r,"#::trackPause()");this._processRule(y.Pause)},c.prototype.trackComplete=function(){this._logger.info(r,"#::trackComplete()");this._processRule(y.VideoComplete)},
c.prototype.trackSessionEnd=function(){this._logger.info(r,"#::trackSessionEnd()");this._processRule(y.SessionEnd)},c.prototype.trackError=function(a){this._logger.info(r,"#::trackError()");var b=p.createContext();b.setData(S,a);this._processRule(y.Error,b)},c.prototype.trackEvent=function(a,b,d){this._logger.info(r,"#::trackEvent() - "+a);var e=p.createContext();switch(a){case c.Event.AdBreakStart:e.setData(Z,b);e.setData(T,this._cleanContextData(d));a=y.AdBreakStart;break;case c.Event.AdBreakComplete:a=
y.AdBreakComplete;break;case c.Event.AdStart:e.setData(V,b);e.setData(T,this._cleanContextData(d));a=y.AdStart;break;case c.Event.AdComplete:a=y.AdComplete;break;case c.Event.AdSkip:a=y.AdSkip;break;case c.Event.SeekStart:a=y.SeekStart;break;case c.Event.SeekComplete:a=y.SeekComplete;break;case c.Event.ChapterStart:e.setData(O,b);e.setData(T,this._cleanContextData(d));a=y.ChapterStart;break;case c.Event.ChapterComplete:a=y.ChapterComplete;break;case c.Event.ChapterSkip:a=y.ChapterSkip;break;case c.Event.BufferStart:a=
y.BufferStart;break;case c.Event.BufferComplete:a=y.BufferComplete;break;case c.Event.BitrateChange:a=y.BitrateChange;break;case c.Event.TimedMetadataUpdate:a=y.TimedMetadataUpdate;e.setData(P,b);break;default:return void this._logger.error(r,"Incorrect event name.")}this._processRule(a,e)},d.plugins.nielsen){var L=d._MediaHeartbeatNielsen;c.MediaObjectKey.NielsenContentMetadata=L.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA;c.MediaObjectKey.NielsenAdMetadata=L.MEDIAHEARTBEAT_NIELSEN_AD_METADATA;c.MediaObjectKey.NielsenChannelMetadata=
L.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA;c.prototype.nielsenLoadMetadata=function(a){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(a)}}c.prototype._setState=function(a,b){this._mediaState[a]=b};c.prototype._isInState=function(a){return this._mediaState[a]};c.prototype._isInSession=function(a){return this._isInState(E.Session)};c.prototype._isInMedia=function(a){return this._isInState(E.Media)};c.prototype._isInAd=function(a){return this._isInState(E.Ad)};c.prototype._isInAdBreak=function(a){return this._isInState(E.AdBreak)};
c.prototype._isInChapter=function(a){return this._isInState(E.Chapter)};c.prototype._isInPlay=function(a){return this._isInState(E.PlayPause)};c.prototype._isInPause=function(a){return!this._isInState(E.PlayPause)};c.prototype._isInBuffer=function(a){return this._isInState(E.Buffer)};c.prototype._isInSeek=function(a){return this._isInState(E.Seek)};c.prototype._isPlatformTrackingSupported=function(a){return!this._appMeasurement.unsupportedBrowser};c.prototype._isValidMediaObject=function(a){if((a=
a.getData($))&&a instanceof q){var b=a.getValue(c.MediaObjectKey.VideoResumed);null!=b&&"boolean"!=typeof b&&this._logger.warn(r,"Ignoring value set for MediaHeartbeat.MediaObjectKey.VideoResumed in MediaObject as we expect a boolean value");b=a.getValue(c.MediaObjectKey.PrerollTrackingWaitingTime);null==b||("string"!=typeof b&&"number"!=typeof b||isNaN(b))&&this._logger.warn(r,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds.");
a=a.getValue(c.MediaObjectKey.StandardVideoMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(r,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardVideoMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1};c.prototype._isValidAdBreakObject=function(a){return(a=a.getData(Z))&&a instanceof q};c.prototype._isDifferentAdBreakObject=function(a){a=a.getData(Z);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(a))};c.prototype._isValidAdObject=
function(a){if((a=a.getData(V))&&a instanceof q){var b=a.getValue(Y);null!=b&&"boolean"!=typeof b&&this._logger.warn(r,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");a=a.getValue(c.MediaObjectKey.StandardAdMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(r,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1};c.prototype._isDifferentAdObject=
function(a){a=a.getData(V);return!(this._currentAdObject&&this._currentAdObject.isEqual(a))};c.prototype._isValidChapterObject=function(a){return(a=a.getData(O))&&a instanceof q};c.prototype._isDifferentChapterObject=function(a){a=a.getData(O);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(a))};c.prototype._isValidTimedMetadataObject=function(a){return(a=a.getData(P))&&a instanceof q?(a=a.getValue(q.MEDIAINFO_KEY_TIMEDMETADATA))&&"string"==typeof a:!1};c.prototype._deferredTrackPlay=
function(){this._prerollWaitEnabled&&(this._logger.info(r,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(y.Play))};c.prototype._cmdEnterAction=function(a){var b=a.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(b){case y.SeekStart:case y.BufferStart:this._logger.info(r,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event");this._taskScheduler.cancelTask(this._playTaskHandle);this._playTaskHandle=
null;break;case y.SeekComplete:case y.BufferComplete:this._logger.info(r,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event");this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case y.Play:this._logger.info(r,"Dropping API:trackPlay as we already have a API:trackPlay scheduled.");a.stopProcessingAction();break;case y.Pause:this._logger.info(r,"Cancelling scheduled API:trackPlay because of API:trackPause call.");this._taskScheduler.cancelTask(this._playTaskHandle);
this._playTaskHandle=null;this._prerollWaitEnabled=!1;break;case y.AdBreakStart:this._logger.info(r,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(b){case y.Play:this._logger.info(r,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms.");this._playReceived=!0;this._playTaskHandle=
this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);a.stopProcessingAction();break;case y.AdBreakStart:this._logger.info(r,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}};c.prototype._cmdExitAction=function(a){var b=a.getRuleName();this._playAfterAdStart&&(b===y.AdStart?(this._cmdPlay(a),this._playAfterAdStart=!1):b===y.AdBreakComplete&&(this._playAfterAdStart=!1));b!==y.AdStart||this._isInState(E.FPlayPause)||this._cmdPlay(a)};
c.prototype._cmdConfigure=function(a){this._resetState();this._configureAdobeAnalyticsPlugin();this._configureAdobeHearbeatPlugin();this._configureVideoPlayerPlugin();this._configureOtherPlugins();this._configureHeartbeat()};c.prototype._cmdSessionStart=function(a){var b=a.getData($);a=a.getData(T);this._currentMediaObject=b;this._videoInfo=b.createVideoInfo();this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var d=b.getValue(c.MediaObjectKey.StandardVideoMetadata);d&&
"object"==typeof d&&(a||(a={}),R.append(a,this._cleanContextData(d)));d=b.getValue(c.MediaObjectKey.VideoResumed);"boolean"==typeof d&&(this._videoInfo.resumed=d);b=b.getValue(c.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof b&&"number"!=typeof b||isNaN(b)||(this._prerollWaitTime=Number(b),0>=this._prerollWaitTime&&(this._prerollWaitEnabled=!1));this._aaPlugin.setVideoMetadata(a);this._playerPlugin.trackVideoLoad();this._playerPlugin.trackSessionStart();this._setState(E.Session,!0);this._setState(E.Media,
!0)};c.prototype._cmdVideoEnd=function(a){a=a.getRuleName()===y.VideoComplete;if(this._isInState(E.Media)){var b=this._heartbeat,c=this._playerPlugin;this._playerPlugin.trackComplete(function(){c&&c.trackVideoUnload();b&&b.destroy()},a)}this._setState(E.Media,!1)};c.prototype._cmdHandleMediaComplete=function(a){this._isInMedia(a)||(this._logger.info(r,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(a),a.stopProcessingAction())};c.prototype._cmdSessionEnd=function(a){this._setState(E.Session,
!1);this._resetState()};c.prototype._cmdBufferStart=function(a){this._playerPlugin.trackBufferStart();this._setState(E.Buffer,!0)};c.prototype._cmdBufferComplete=function(a){this._isInState(E.Buffer)&&this._playerPlugin.trackBufferComplete();this._setState(E.Buffer,!1)};c.prototype._cmdSeekStart=function(a){this._playerPlugin.trackSeekStart();this._setState(E.Seek,!0)};c.prototype._cmdSeekComplete=function(a){this._isInState(E.Seek)&&this._playerPlugin.trackSeekComplete();this._setState(E.Seek,!1)};
c.prototype._cmdPlay=function(a){this._playerPlugin.trackPlay();this._setState(E.PlayPause,!0);this._setState(E.FPlayPause,!0)};c.prototype._cmdPause=function(a){this._playerPlugin.trackPause();this._setState(E.PlayPause,!1);this._setState(E.FPlayPause,!0)};c.prototype._cmdAdBreakStart=function(a){this._currentAdBreakObject=a=a.getData(Z);this._adBreakInfo=a.createAdBreakInfo();this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"";this._setState(E.AdBreak,!0)};c.prototype._cmdAdBreakComplete=
function(a){this._adBreakInfo=this._currentAdBreakObject=null;this._setState(E.AdBreak,!1)};c.prototype._cmdAdStart=function(a){var b=a.getData(V);a=a.getData(T);this._currentAdObject=b;this._adInfo=b.createAdInfo();var d=b.getValue(Y);"boolean"==typeof d&&(this._adInfo.granularTracking=d);(b=b.getValue(c.MediaObjectKey.StandardAdMetadata))&&"object"==typeof b&&(a||(a={}),R.append(a,this._cleanContextData(b)));this._aaPlugin.setAdMetadata(a);this._playerPlugin.trackAdStart();this._setState(E.Ad,!0)};
c.prototype._cmdAdComplete=function(a){this._adInfo=this._currentAdObject=null;this._isInState(E.Ad)&&this._playerPlugin.trackAdComplete();this._setState(E.Ad,!1)};c.prototype._cmdAdSkip=function(a){this._adInfo=this._currentAdObject=null;this._isInState(E.Ad)&&this._playerPlugin.trackAdSkip();this._setState(E.Ad,!1)};c.prototype._cmdChapterStart=function(a){var b=a.getData(O);a=a.getData(T);this._currentChapterObject=b;this._chapterInfo=b.createChapterInfo();this._aaPlugin.setChapterMetadata(a);
this._playerPlugin.trackChapterStart();this._setState(E.Chapter,!0)};c.prototype._cmdChapterComplete=function(a){this._chapterInfo=this._currentChapterObject=null;this._isInState(E.Chapter)&&this._playerPlugin.trackChapterComplete();this._setState(E.Chapter,!1)};c.prototype._cmdChapterSkip=function(a){this._chapterInfo=this._currentChapterObject=null;this._isInState(E.Chapter)&&this._playerPlugin.trackChapterSkip();this._setState(E.Chapter,!1)};c.prototype._cmdError=function(a){(a=a.getData(S))||
(a="unknown_error_id");this._playerPlugin.trackVideoPlayerError(a)};c.prototype._cmdBitrate=function(a){this._playerPlugin.trackBitrateChange()};c.prototype._cmdTimedMetadataUpdate=function(a){a=a.getData(P).getValue(q.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(a)};c.prototype._processRule=function(a,b){return this._ruleEngine.processRule(a,b)};c.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction);this._ruleEngine.registerRule(y.SessionStart,
"API:trackSessionStart",[p.createPredicate(this._isPlatformTrackingSupported,!0,z.ErrUnSupportedPlatform),p.createPredicate(this._isInSession,!1,z.ErrInSession),p.createPredicate(this._isValidMediaObject,!0,z.ErrInvalidMediaObject)],[this._cmdConfigure,this._cmdSessionStart],this);this._ruleEngine.registerRule(y.SessionEnd,"API:trackSessionEnd",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,
this._cmdSessionEnd],this);this._ruleEngine.registerRule(y.VideoComplete,"API:trackComplete",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this);this._ruleEngine.registerRule(y.Error,"API:trackError",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia)],[this._cmdError],this);this._ruleEngine.registerRule(y.Play,
"API:trackPlay",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this);this._ruleEngine.registerRule(y.Pause,"API:trackPause",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInBuffer,!1,z.ErrInBuffer),p.createPredicate(this._isInSeek,!1,z.ErrInSeek)],[this._cmdPause],this);this._ruleEngine.registerRule(y.BufferStart,
"API:trackEvent(BufferStart)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInBuffer,!1,z.ErrInBuffer),p.createPredicate(this._isInSeek,!1,z.ErrInSeek)],[this._cmdBufferStart],this);this._ruleEngine.registerRule(y.BufferComplete,"API:trackEvent(BufferComplete)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInBuffer,
!0,z.ErrNotInBuffer)],[this._cmdBufferComplete],this);this._ruleEngine.registerRule(y.SeekStart,"API:trackEvent(SeekStart)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInSeek,!1,z.ErrInSeek),p.createPredicate(this._isInBuffer,!1,z.ErrInBuffer)],[this._cmdSeekStart],this);this._ruleEngine.registerRule(y.SeekComplete,"API:trackEvent(SeekComplete)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),
p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInSeek,!0,z.ErrNotInSeek)],[this._cmdSeekComplete],this);this._ruleEngine.registerRule(y.AdBreakStart,"API:trackEvent(AdBreakStart)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isValidAdBreakObject,!0,z.ErrInvalidAdBreakObject),p.createPredicate(this._isDifferentAdBreakObject,!0,z.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,
this._cmdAdBreakStart],this);this._ruleEngine.registerRule(y.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInAdBreak,!0,z.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this);this._ruleEngine.registerRule(y.AdStart,"API:trackEvent(AdStart)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),
p.createPredicate(this._isInAdBreak,!0,z.ErrNotInAdBreak),p.createPredicate(this._isValidAdObject,!0,z.ErrInvalidAdObject),p.createPredicate(this._isDifferentAdObject,!0,z.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this);this._ruleEngine.registerRule(y.AdComplete,"API:trackEvent(AdComplete)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInAdBreak,!0,z.ErrNotInAdBreak),p.createPredicate(this._isInAd,
!0,z.ErrNotInAd)],[this._cmdAdComplete],this);this._ruleEngine.registerRule(y.AdSkip,"API:trackEvent(AdSkip)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInAdBreak,!0,z.ErrNotInAdBreak),p.createPredicate(this._isInAd,!0,z.ErrNotInAd)],[this._cmdAdSkip],this);this._ruleEngine.registerRule(y.ChapterStart,"API:trackEvent(ChapterStart)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,
!0,z.ErrNotInMedia),p.createPredicate(this._isValidChapterObject,!0,z.ErrInvalidChapterObject),p.createPredicate(this._isDifferentChapterObject,!0,z.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this);this._ruleEngine.registerRule(y.ChapterComplete,"API:trackEvent(ChapterComplete)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInChapter,!0,z.ErrNotInChapter)],[this._cmdChapterComplete],
this);this._ruleEngine.registerRule(y.ChapterSkip,"API:trackEvent(ChapterSkip)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isInChapter,!0,z.ErrNotInChapter)],[this._cmdChapterSkip],this);this._ruleEngine.registerRule(y.BitrateChange,"API:trackEvent(BitrateChange)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia)],[this._cmdBitrate],this);this._ruleEngine.registerRule(y.TimedMetadataUpdate,
"API:trackEvent(TimedMetadataUpdate)",[p.createPredicate(this._isInSession,!0,z.ErrNotInSession),p.createPredicate(this._isInMedia,!0,z.ErrNotInMedia),p.createPredicate(this._isValidTimedMetadataObject,!0,z.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this)};c.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new J(this._appMeasurement,new h(this));var a=new D;a.channel=this._config.channel?this._config.channel:"";a.debugLogging=d.MediaHeartbeat._debugLogging||this._config.debugLogging;
this._aaPlugin.configure(a);this._plugins.push(this._aaPlugin)};c.prototype._configureAdobeHearbeatPlugin=function(){var a=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new U(new F(this));a=new Q(this._config.trackingServer,a);a.debugLogging=d.MediaHeartbeat._debugLogging||this._config.debugLogging;a.ovp=this._config.ovp?this._config.ovp:"";a.ssl=this._config.ssl;a.sdk=this._config.appVersion?this._config.appVersion:"";var b=this._primetimeTVSDKVersion();
b&&0<b.length&&(a.__primetime=!0,a.__psdkVersion=b);this._ahPlugin.configure(a);this._plugins.push(this._ahPlugin)};c.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new C(new H(this));var a=new t;a.debugLogging=d.MediaHeartbeat._debugLogging||this._config.debugLogging;this._playerPlugin.configure(a);this._plugins.push(this._playerPlugin)};c.prototype._configureOtherPlugins=function(){if(d.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=
new d.plugins.nielsen.NielsenPlugin(new d._MediaHeartbeatNielsenPluginDelegate(this));var a=new d.plugins.nielsen.NielsenPluginConfig;a.debugLogging=d.MediaHeartbeat._debugLogging||this._config.debugLogging;a.appInfo=this._config.nielsenAppInfo;a.configKey=this._config.nielsenConfigKey;this._nielsenPlugin.configure(a);this._plugins.push(this._nielsenPlugin)}};c.prototype._configureHeartbeat=function(){var a=new M;a.debugLogging=d.MediaHeartbeat._debugLogging||this._config.debugLogging;this._heartbeat=
new k(new u(this),this._plugins);this._heartbeat.configure(a)};c.prototype._resetState=function(){this._taskScheduler.clearTasks();this._mediaState={};this._plugins=[];this._chapterInfo=this._adInfo=this._adBreakInfo=this._videoInfo=this._currentChapterObject=this._currentAdObject=this._currentAdBreakObject=this._currentMediaObject=this._heartbeat=this._nielsenPlugin=this._ahPlugin=this._aaPlugin=this._playerPlugin=null;this._prerollWaitEnabled=!0;this._prerollWaitTime=aa;this._playReceived=!1;this._playTaskHandle=
null;this._playAfterAdStart=!1};c.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(K):null};c.prototype._cleanContextData=function(a){if(null==a||"object"!=typeof a)return null;var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];"number"!=typeof d&&"string"!=typeof d&&"boolean"!=typeof d||(b[c]=d)}return b};c.prototype._onDelegateError=function(a){this._logger.error(r,a.getMessage()+" | "+a.getDetails())};var E={Session:0,Media:1,AdBreak:2,
Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8},y={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19},z={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',
ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',
ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',
ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',
ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.'},r="MediaHeartbeat",$="key_media_object",Z="key_adbreak_object",V="key_ad_object",O="key_chapter_object",P="key_timed_metadata_object",T="key_custom_metadata",S="key_error_id",K="a.__pttvsdkVersion",Y="granular_ad_tracking",aa=250;d._MediaHeartbeatErrorMessage=z;d.MediaHeartbeatDelegate=
e;d.MediaHeartbeat=c;d.MediaHeartbeat._debugLogging=!1})(a.ADB.core,a.ADB.va);a.ADB||(a.ADB={});a.ADB.core||(a.ADB.core=core);a.ADB.va||(a.ADB.va=va);a.ADB.va.plugins||(a.ADB.va.plugins={})}(this)}).call(a);return a.ADB});var A=!0,B=!1;
function Visitor(a,x){if(!a)throw"Visitor requires Adobe Marketing Cloud Org ID";var b=this;b.version="1.6.0";var d=window,e=d.Visitor;e.version=b.version;d.s_c_in||(d.s_c_il=[],d.s_c_in=0);b._c="Visitor";b._il=d.s_c_il;b._in=d.s_c_in;b._il[b._in]=b;d.s_c_in++;b.ia={Ca:[]};var c=d.document,g=e.pb;g||(g=null);var f=e.qb;f||(f=void 0);var q=e.Ia;q||(q=A);var k=e.Ga;k||(k=B);b.ea=function(a){var b=0,c,d;if(a)for(c=0;c<a.length;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b&=b;return b};b.v=function(a){var b="0123456789",
c="",d="",e,f=8,u=10,t=10;if(1==a){b+="ABCDEF";for(a=0;16>a;a++)e=Math.floor(Math.random()*f),c+=b.substring(e,e+1),e=Math.floor(Math.random()*f),d+=b.substring(e,e+1),f=16;return c+"-"+d}for(a=0;19>a;a++)e=Math.floor(Math.random()*u),c+=b.substring(e,e+1),0==a&&9==e?u=3:(1==a||2==a)&&10!=u&&2>e?u=10:2<a&&(u=10),e=Math.floor(Math.random()*t),d+=b.substring(e,e+1),0==a&&9==e?t=3:(1==a||2==a)&&10!=t&&2>e?t=10:2<a&&(t=10);return c+d};b.Ka=function(){var a;!a&&d.location&&(a=d.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a=
"";else{var b=a.split("."),c=b.length-1,e=c-1;1<c&&2>=b[c].length&&(2==b[c-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,".indexOf(","+
b[c]+","))&&e--;if(0<e)for(a="";c>=e;)a=b[c]+(a?".":"")+a,c--}return a};b.cookieRead=function(a){a=encodeURIComponent(a);var b=(";"+c.cookie).split(" ").join(";"),d=b.indexOf(";"+a+"="),e=0>d?d:b.indexOf(";",d+1);return 0>d?"":decodeURIComponent(b.substring(d+2+a.length,0>e?b.length:e))};b.cookieWrite=function(a,d,e){var f=b.cookieLifetime,u;d=""+d;f=f?(""+f).toUpperCase():"";e&&"SESSION"!=f&&"NONE"!=f?(u=""!=d?parseInt(f?f:0,10):-60)?(e=new Date,e.setTime(e.getTime()+1E3*u)):1==e&&(e=new Date,u=
e.getYear(),e.setYear(u+2+(1900>u?1900:0))):e=0;return a&&"NONE"!=f?(c.cookie=encodeURIComponent(a)+"="+encodeURIComponent(d)+"; path=/;"+(e?" expires="+e.toGMTString()+";":"")+(b.cookieDomain?" domain="+b.cookieDomain+";":""),b.cookieRead(a)==d):0};b.g=g;b.K=function(a,b){try{"function"==typeof a?a.apply(d,b):a[1].apply(a[0],b)}catch(c){}};b.Oa=function(a,c){c&&(b.g==g&&(b.g={}),b.g[a]==f&&(b.g[a]=[]),b.g[a].push(c))};b.q=function(a,c){if(b.g!=g){var d=b.g[a];if(d)for(;0<d.length;)b.K(d.shift(),
c)}};b.J=function(a,b){var c=encodeURIComponent("d_fieldgroup")+"="+encodeURIComponent(b);if(-1===a.indexOf("?"))return a+"?"+c;var d=a.split("?"),e=d[0]+"?",d=d[1].split("&");d.splice(1,0,c);return e+d.join("&")};b.j=g;b.Ma=function(a,c,d,e){c=b.J(c,a);e.url=b.J(e.url,a);e.k=b.J(e.k,a);e===Object(e)&&e.k&&"XMLHttpRequest"===b.ka.C.D?b.ka.$a(e,d,a):b.useCORSOnly||b.ha(a,c,d)};b.ha=function(a,d,e){var f=0,u=0,t;if(d&&c){for(t=0;!f&&2>t;){try{f=(f=c.getElementsByTagName(0<t?"HEAD":"head"))&&0<f.length?
f[0]:0}catch(C){f=0}t++}if(!f)try{c.body&&(f=c.body)}catch(h){f=0}if(f)for(t=0;!u&&2>t;){try{u=c.createElement(0<t?"SCRIPT":"script")}catch(k){u=0}t++}}d&&f&&u?(u.type="text/javascript",u.src=d,f.firstChild?f.insertBefore(u,f.firstChild):f.appendChild(u),f=b.loadTimeout,y.e[a]={requestStart:y.o(),url:d,sa:f,qa:y.va(),ra:0},e&&(b.j==g&&(b.j={}),b.j[a]=setTimeout(function(){e(A)},f)),b.ia.Ca.push(d)):e&&e()};b.Ja=function(a){b.j!=g&&b.j[a]&&(clearTimeout(b.j[a]),b.j[a]=0)};b.fa=k;b.ga=k;b.isAllowed=
function(){!b.fa&&(b.fa=q,b.cookieRead(b.cookieName)||b.cookieWrite(b.cookieName,"T",1))&&(b.ga=q);return b.ga};b.b=g;b.d=g;var M=e.Hb;M||(M="MC");var u=e.Mb;u||(u="MCMID");var C=e.Ib;C||(C="MCCIDH");var t=e.Lb;t||(t="MCSYNCS");var H=e.Jb;H||(H="MCIDTS");var J=e.Kb;J||(J="MCOPTOUT");var D=e.Fb;D||(D="A");var h=e.Cb;h||(h="MCAID");var U=e.Gb;U||(U="AAM");var Q=e.Eb;Q||(Q="MCAAMLH");var F=e.Db;F||(F="MCAAMB");var p=e.Nb;p||(p="NONE");b.M=0;b.da=function(){if(!b.M){var a=b.version;b.audienceManagerServer&&
(a+="|"+b.audienceManagerServer);b.audienceManagerServerSecure&&(a+="|"+b.audienceManagerServerSecure);b.M=b.ea(a)}return b.M};b.ja=k;b.f=function(){if(!b.ja){b.ja=q;var a=b.da(),c=k,d=b.cookieRead(b.cookieName),e,f,u,t,D=new Date;b.b==g&&(b.b={});if(d&&"T"!=d)for(d=d.split("|"),d[0].match(/^[\-0-9]+$/)&&(parseInt(d[0],10)!=a&&(c=q),d.shift()),1==d.length%2&&d.pop(),a=0;a<d.length;a+=2)if(e=d[a].split("-"),f=e[0],u=d[a+1],1<e.length?(t=parseInt(e[1],10),e=0<e[1].indexOf("s")):(t=0,e=k),c&&(f==C&&
(u=""),0<t&&(t=D.getTime()/1E3-60)),f&&u&&(b.c(f,u,1),0<t&&(b.b["expire"+f]=t+(e?"s":""),D.getTime()>=1E3*t||e&&!b.cookieRead(b.sessionCookieName))))b.d||(b.d={}),b.d[f]=q;!b.a(h)&&(d=b.cookieRead("s_vi"))&&(d=d.split("|"),1<d.length&&0<=d[0].indexOf("v1")&&(u=d[1],a=u.indexOf("["),0<=a&&(u=u.substring(0,a)),u&&u.match(/^[0-9a-fA-F\-]+$/)&&b.c(h,u)))}};b.Qa=function(){var a=b.da(),c,d;for(c in b.b)!Object.prototype[c]&&b.b[c]&&"expire"!=c.substring(0,6)&&(d=b.b[c],a+=(a?"|":"")+c+(b.b["expire"+c]?
"-"+b.b["expire"+c]:"")+"|"+d);b.cookieWrite(b.cookieName,a,1)};b.a=function(a,c){return b.b==g||!c&&b.d&&b.d[a]?g:b.b[a]};b.c=function(a,c,d){b.b==g&&(b.b={});b.b[a]=c;d||b.Qa()};b.La=function(a,c){var d=b.a(a,c);return d?d.split("*"):g};b.Pa=function(a,c,d){b.c(a,c?c.join("*"):"",d)};b.wb=function(a,c){var d=b.La(a,c);if(d){var e={},f;for(f=0;f<d.length;f+=2)e[d[f]]=d[f+1];return e}return g};b.yb=function(a,c,d){var e=g,f;if(c)for(f in e=[],c)Object.prototype[f]||(e.push(f),e.push(c[f]));b.Pa(a,
e,d)};b.m=function(a,c,d){var e=new Date;e.setTime(e.getTime()+1E3*c);b.b==g&&(b.b={});b.b["expire"+a]=Math.floor(e.getTime()/1E3)+(d?"s":"");0>c?(b.d||(b.d={}),b.d[a]=q):b.d&&(b.d[a]=k);d&&(b.cookieRead(b.sessionCookieName)||b.cookieWrite(b.sessionCookieName,"1"))};b.ca=function(a){a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=p)),!a||a!=p&&!a.match(/^[0-9a-fA-F\-]+$/))&&(a="");return a};b.i=function(a,c){b.Ja(a);
b.h!=g&&(b.h[a]=k);y.e[a]&&(y.e[a].nb=y.o(),y.I(a));if(a==M){var d=b.a(u);if(!d){d="object"==typeof c&&c.mid?c.mid:b.ca(c);if(!d){if(b.B){b.getAnalyticsVisitorID(g,k,q);return}d=b.v()}b.c(u,d)}d&&d!=p||(d="");"object"==typeof c&&((c.d_region||c.dcs_region||c.d_blob||c.blob)&&b.i(U,c),b.B&&c.mid&&b.i(D,{id:c.id}));b.q(u,[d])}if(a==U&&"object"==typeof c){d=604800;c.id_sync_ttl!=f&&c.id_sync_ttl&&(d=parseInt(c.id_sync_ttl,10));var e=b.a(Q);e||((e=c.d_region)||(e=c.dcs_region),e&&(b.m(Q,d),b.c(Q,e)));
e||(e="");b.q(Q,[e]);e=b.a(F);if(c.d_blob||c.blob)(e=c.d_blob)||(e=c.blob),b.m(F,d),b.c(F,e);e||(e="");b.q(F,[e]);!c.error_msg&&b.z&&b.c(C,b.z)}a==D&&((d=b.a(h))||((d=b.ca(c))?d!==p&&b.m(F,-1):d=p,b.c(h,d)),d&&d!=p||(d=""),b.q(h,[d]));b.idSyncDisableSyncs?E.wa=q:(E.wa=k,d={},d.ibs=c.ibs,d.subdomain=c.subdomain,E.kb(d));if(c===Object(c)){var t;b.isAllowed()&&(t=b.a(J));t||(t=p,c.d_optout&&c.d_optout instanceof Array&&(t=c.d_optout.join(",")),d=parseInt(c.d_ottl,10),isNaN(d)&&(d=7200),b.m(J,d,A),b.c(J,
t));b.q(J,[t])}};b.h=g;b.r=function(a,c,d,e,f){var t="",C;if(b.isAllowed()&&(b.f(),t=b.a(a),!t&&(a==u||a==J?C=M:a==Q||a==F?C=U:a==h&&(C=D),C)))return!c||b.h!=g&&b.h[C]||(b.h==g&&(b.h={}),b.h[C]=q,b.Ma(C,c,function(c,d){if(!b.a(a))if(y.e[C]&&(y.e[C].timeout=y.o(),y.e[C].eb=!!c,y.I(C)),d!==Object(d)||b.useCORSOnly){var e="";a==u?e=b.v():C==U&&(e={error_msg:"timeout"});b.i(C,e)}else b.ha(C,d.url,d.G)},f)),b.Oa(a,d),c||b.i(C,{id:p}),"";a!=u&&a!=h||t!=p||(t="",e=q);d&&e&&b.K(d,[t]);return t};b._setMarketingCloudFields=
function(a){b.f();b.i(M,a)};b.setMarketingCloudVisitorID=function(a){b._setMarketingCloudFields(a)};b.B=k;b.getMarketingCloudVisitorID=function(a,c){if(b.isAllowed()){b.marketingCloudServer&&0>b.marketingCloudServer.indexOf(".demdex.net")&&(b.B=q);var d=b.w("_setMarketingCloudFields");return b.r(u,d.url,a,c,d)}return""};b.Na=function(){b.getAudienceManagerBlob()};e.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2};b.u={};b.ba=k;b.z="";b.setCustomerIDs=function(a){if(b.isAllowed()&&a){b.f();var c,
d;for(c in a)if(!Object.prototype[c]&&(d=a[c]))if("object"==typeof d){var e={};d.id&&(e.id=d.id);d.authState!=f&&(e.authState=d.authState);b.u[c]=e}else b.u[c]={id:d};a=b.getCustomerIDs();var e=b.a(C),u="";e||(e=0);for(c in a)Object.prototype[c]||(d=a[c],u+=(u?"|":"")+c+"|"+(d.id?d.id:"")+(d.authState?d.authState:""));b.z=b.ea(u);b.z!=e&&(b.ba=q,b.Na())}};b.getCustomerIDs=function(){b.f();var a={},c,d;for(c in b.u)Object.prototype[c]||(d=b.u[c],a[c]||(a[c]={}),d.id&&(a[c].id=d.id),a[c].authState=
d.authState!=f?d.authState:e.AuthState.UNKNOWN);return a};b._setAnalyticsFields=function(a){b.f();b.i(D,a)};b.setAnalyticsVisitorID=function(a){b._setAnalyticsFields(a)};b.getAnalyticsVisitorID=function(a,c,d){if(b.isAllowed()){var e="";d||(e=b.getMarketingCloudVisitorID(function(){b.getAnalyticsVisitorID(a,q)}));if(e||d){var f=d?b.marketingCloudServer:b.trackingServer,t="";b.loadSSL&&(d?b.marketingCloudServerSecure&&(f=b.marketingCloudServerSecure):b.trackingServerSecure&&(f=b.trackingServerSecure));
var C={};if(f){var f="http"+(b.loadSSL?"s":"")+"://"+f+"/id",e="d_visid_ver="+b.version+"&mcorgid="+encodeURIComponent(b.marketingCloudOrgID)+(e?"&mid="+encodeURIComponent(e):"")+(b.idSyncDisable3rdPartySyncing?"&d_coppa=true":""),g=["s_c_il",b._in,"_set"+(d?"MarketingCloud":"Analytics")+"Fields"],t=f+"?"+e+"&callback=s_c_il%5B"+b._in+"%5D._set"+(d?"MarketingCloud":"Analytics")+"Fields";C.k=f+"?"+e;C.oa=g}C.url=t;return b.r(d?u:h,t,a,c,C)}}return""};b._setAudienceManagerFields=function(a){b.f();b.i(U,
a)};b.w=function(a){var c=b.audienceManagerServer,d="",e=b.a(u),f=b.a(F,q),t=b.a(h),t=t&&t!=p?"&d_cid_ic=AVID%01"+encodeURIComponent(t):"";b.loadSSL&&b.audienceManagerServerSecure&&(c=b.audienceManagerServerSecure);if(c){var d=b.getCustomerIDs(),C,g;if(d)for(C in d)Object.prototype[C]||(g=d[C],t+="&d_cid_ic="+encodeURIComponent(C)+"%01"+encodeURIComponent(g.id?g.id:"")+(g.authState?"%01"+g.authState:""));a||(a="_setAudienceManagerFields");c="http"+(b.loadSSL?"s":"")+"://"+c+"/id";e="d_visid_ver="+
b.version+"&d_rtbd=json&d_ver=2"+(!e&&b.B?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(b.marketingCloudOrgID)+"&d_nsid="+(b.idSyncContainerID||0)+(e?"&d_mid="+encodeURIComponent(e):"")+(b.idSyncDisable3rdPartySyncing?"&d_coppa=true":"")+(f?"&d_blob="+encodeURIComponent(f):"")+t;f=["s_c_il",b._in,a];d=c+"?"+e+"&d_cb=s_c_il%5B"+b._in+"%5D."+a;return{url:d,k:c+"?"+e,oa:f}}return{url:d}};b.getAudienceManagerLocationHint=function(a,c){if(b.isAllowed()&&b.getMarketingCloudVisitorID(function(){b.getAudienceManagerLocationHint(a,
q)})){var d=b.a(h);d||(d=b.getAnalyticsVisitorID(function(){b.getAudienceManagerLocationHint(a,q)}));if(d)return d=b.w(),b.r(Q,d.url,a,c,d)}return""};b.getAudienceManagerBlob=function(a,c){if(b.isAllowed()&&b.getMarketingCloudVisitorID(function(){b.getAudienceManagerBlob(a,q)})){var d=b.a(h);d||(d=b.getAnalyticsVisitorID(function(){b.getAudienceManagerBlob(a,q)}));if(d){var d=b.w(),e=d.url;b.ba&&b.m(F,-1);return b.r(F,e,a,c,d)}}return""};b.s="";b.A={};b.N="";b.O={};b.getSupplementalDataID=function(a,
c){b.s||c||(b.s=b.v(1));var d=b.s;b.N&&!b.O[a]?(d=b.N,b.O[a]=q):d&&(b.A[a]&&(b.N=b.s,b.O=b.A,b.s=d=c?"":b.v(1),b.A={}),d&&(b.A[a]=q));return d};e.OptOut={GLOBAL:"global"};b.getOptOut=function(a,c){if(b.isAllowed()){var d=b.w("_setMarketingCloudFields");return b.r(J,d.url,a,c,d)}return""};b.isOptedOut=function(a,c,d){return b.isAllowed()?(c||(c=e.OptOut.GLOBAL),(d=b.getOptOut(function(d){b.K(a,[d==e.OptOut.GLOBAL||0<=d.indexOf(c)])},d))?d==e.OptOut.GLOBAL||0<=d.indexOf(c):g):k};var G={p:!!d.postMessage,
Fa:1,aa:864E5};b.rb=G;b.ma={postMessage:function(a,b,c){var d=1;b&&(G.p?c.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):b&&(c.location=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a))},V:function(a,b){var c;try{if(G.p)if(a&&(c=function(c){if("string"===typeof b&&c.origin!==b||"[object Function]"===Object.prototype.toString.call(b)&&b(c.origin)===B)return B;a(c)}),window.addEventListener)window[a?"addEventListener":"removeEventListener"]("message",c,B);else window[a?"attachEvent":"detachEvent"]("onmessage",
c)}catch(d){}}};var R={na:function(){if(c.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},k)};if(c.attachEvent)return function(a,b,c){a.attachEvent("on"+b,function(a){"function"===typeof c&&c(a)})}}(),map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||a===g)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=Array(d),f=0;f<d;f++)f in c&&(e[f]=b.call(b,c[f],f,c));return e},
Za:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)}};b.xb=R;var L={C:function(){var a="none",b=q;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?a="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?a="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(b=k),0<Object.prototype.toString.call(window.ob).indexOf("Constructor")&&
(b=k));return{D:a,Ab:b}}(),ab:function(){return"none"===this.C.D?g:new window[this.C.D]},$a:function(a,c,d){var e=this;c&&(a.G=c);try{var f=this.ab();f.open("get",a.k+"&ts="+(new Date).getTime(),A);"XMLHttpRequest"===this.C.D&&(f.withCredentials=q,f.timeout=b.loadTimeout,f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.onreadystatechange=function(){if(4===this.readyState&&200===this.status)a:{var b;try{if(b=JSON.parse(this.responseText),b!==Object(b)){e.n(a,null,"Response is not JSON");
break a}}catch(c){e.n(a,c,"Error parsing response as JSON");break a}try{for(var d=a.oa,f=window,n=0;n<d.length;n++)f=f[d[n]];f(b)}catch(I){e.n(a,I,"Error forming callback function")}}});f.onerror=function(b){e.n(a,b,"onerror")};f.ontimeout=function(b){e.n(a,b,"ontimeout")};f.send();y.e[d]={requestStart:y.o(),url:a.k,sa:f.timeout,qa:y.va(),ra:1};b.ia.Ca.push(a.k)}catch(u){this.n(a,u,"try-catch")}},n:function(a,c,d){b.CORSErrors.push({Bb:a,error:c,description:d});a.G&&("ontimeout"===d?a.G(A):a.G(B,
a))}};b.ka=L;var E={Ha:3E4,$:649,Ea:k,id:g,S:g,ua:function(a){if("string"===typeof a)return a=a.split("/"),a[0]+"//"+a[2]},l:g,url:g,bb:function(){var a="http://fast.",d="?d_nsid="+b.idSyncContainerID+"#"+encodeURIComponent(c.location.href);this.l||(this.l="nosubdomainreturned");b.loadSSL&&(a=b.idSyncSSLUseAkamai?"https://fast.":"https://");a=a+this.l+".demdex.net/dest5.html"+d;this.S=this.ua(a);this.id="destination_publishing_iframe_"+this.l+"_"+b.idSyncContainerID;return a},Ta:function(){var a=
"?d_nsid="+b.idSyncContainerID+"#"+encodeURIComponent(c.location.href);"string"===typeof b.L&&b.L.length&&(this.id="destination_publishing_iframe_"+(new Date).getTime()+"_"+b.idSyncContainerID,this.S=this.ua(b.L),this.url=b.L+a)},wa:g,ta:k,X:k,F:g,Ob:g,jb:g,Pb:g,W:k,H:[],hb:[],ib:[],ya:G.p?15:100,T:[],fb:[],pa:q,Ba:k,Aa:function(){return!b.idSyncDisable3rdPartySyncing&&(this.ta||b.tb)&&this.l&&"nosubdomainreturned"!==this.l&&this.url&&!this.X},Q:function(){function a(){d=document.createElement("iframe");
d.sandbox="allow-scripts allow-same-origin";d.title="Adobe ID Syncing iFrame";d.id=c.id;d.style.cssText="display: none; width: 0; height: 0;";d.src=c.url;c.jb=q;b();document.body.appendChild(d)}function b(){R.na(d,"load",function(){d.className="aamIframeLoaded";c.F=q;c.t()})}this.X=q;var c=this,d=document.getElementById(this.id);d?"IFRAME"!==d.nodeName?(this.id+="_2",a()):"aamIframeLoaded"!==d.className?b():(this.F=q,this.xa=d,this.t()):a();this.xa=d},t:function(a){var c=this;a===Object(a)&&this.T.push(a);
(this.Ba||!G.p||this.F)&&this.T.length&&(this.I(this.T.shift()),this.t());!b.idSyncDisableSyncs&&this.F&&this.H.length&&!this.W&&(this.Ea||(this.Ea=q,setTimeout(function(){c.ya=G.p?15:150},this.Ha)),this.W=q,this.Da())},I:function(a){var b=encodeURIComponent,c,d,e,f,u;if((c=a.ibs)&&c instanceof Array&&(d=c.length))for(e=0;e<d;e++)f=c[e],u=[b("ibs"),b(f.id||""),b(f.tag||""),R.Za(f.url||[],","),b(f.ttl||""),"","",f.fireURLSync?"true":"false"],this.pa?this.P(u.join("|")):f.fireURLSync&&this.Ua(f,u.join("|"));
this.fb.push(a)},Ua:function(a,c){b.f();var d=b.a(t),e=k,f=k,u=Math.ceil((new Date).getTime()/G.aa);d?(d=d.split("*"),f=this.lb(d,a.id,u),e=f.Xa,f=f.Ya,e&&f)||(this.P(c),d.push(a.id+"-"+(u+Math.ceil(a.ttl/60/24))),this.gb(d),b.c(t,d.join("*"))):(this.P(c),b.c(t,a.id+"-"+(u+Math.ceil(a.ttl/60/24))))},lb:function(a,b,c){var d=k,e=k,f,u,t;for(u=0;u<a.length;u++)f=a[u],t=parseInt(f.split("-")[1],10),f.match("^"+b+"-")?(d=q,c<t?e=q:(a.splice(u,1),u--)):c>=t&&(a.splice(u,1),u--);return{Xa:d,Ya:e}},gb:function(a){if(a.join("*").length>
this.$)for(a.sort(function(a,b){return parseInt(a.split("-")[1],10)-parseInt(b.split("-")[1],10)});a.join("*").length>this.$;)a.shift()},P:function(a){var c=encodeURIComponent;this.H.push((b.ub?c("---destpub-debug---"):c("---destpub---"))+a)},Da:function(){var a=this,c;this.H.length?(c=this.H.shift(),b.ma.postMessage(c,this.url,this.xa.contentWindow),this.hb.push(c),setTimeout(function(){a.Da()},this.ya)):this.W=k},V:function(a){var b=/^---destpub-to-parent---/;"string"===typeof a&&b.test(a)&&(b=
a.replace(b,"").split("|"),"canSetThirdPartyCookies"===b[0]&&(this.pa="true"===b[1]?q:k,this.Ba=q,this.t()),this.ib.push(a))},kb:function(a){this.url===g&&(this.l="string"===typeof b.la&&b.la.length?b.la:a.subdomain||"",this.url=this.bb());a.ibs instanceof Array&&a.ibs.length&&(this.ta=q);this.Aa()&&(b.idSyncAttachIframeASAP?this.Ra():(e.Z||"complete"===c.readyState||"loaded"===c.readyState)&&this.Q());"function"===typeof b.idSyncIDCallResult?b.idSyncIDCallResult(a):this.t(a);"function"===typeof b.idSyncAfterIDCallResult&&
b.idSyncAfterIDCallResult(a)},Sa:function(a,c){return b.vb||!a||c-a>G.Fa},Ra:function(){function a(){b.X||(document.body?b.Q():setTimeout(a,30))}var b=this;a()}};b.sb=E;b.timeoutMetricsLog=[];var y={Wa:window.performance&&window.performance.timing?1:0,za:window.performance&&window.performance.timing?window.performance.timing:g,Y:g,R:g,e:{},U:[],send:function(a){if(b.takeTimeoutMetrics&&a===Object(a)){var c=[],d=encodeURIComponent,e;for(e in a)a.hasOwnProperty(e)&&c.push(d(e)+"="+d(a[e]));a="http"+
(b.loadSSL?"s":"")+"://dpm.demdex.net/event?d_visid_ver="+b.version+"&d_visid_stg_timeout="+b.loadTimeout+"&"+c.join("&")+"&d_orgid="+d(b.marketingCloudOrgID)+"&d_timingapi="+this.Wa+"&d_winload="+this.cb()+"&d_ld="+this.o();(new Image).src=a;b.timeoutMetricsLog.push(a)}},cb:function(){this.R===g&&(this.R=this.za?this.Y-this.za.navigationStart:this.Y-e.Va);return this.R},o:function(){return(new Date).getTime()},I:function(a){var b=this.e[a],c={};c.d_visid_stg_timeout_captured=b.sa;c.d_visid_cors=
b.ra;c.d_fieldgroup=a;c.d_settimeout_overriden=b.qa;b.timeout?b.eb?(c.d_visid_timedout=1,c.d_visid_timeout=b.timeout-b.requestStart,c.d_visid_response=-1):(c.d_visid_timedout="n/a",c.d_visid_timeout="n/a",c.d_visid_response="n/a"):(c.d_visid_timedout=0,c.d_visid_timeout=-1,c.d_visid_response=b.nb-b.requestStart);c.d_visid_url=b.url;e.Z?this.send(c):this.U.push(c);delete this.e[a]},mb:function(){for(var a=0,b=this.U.length;a<b;a++)this.send(this.U[a])},va:function(){return"function"===typeof setTimeout.toString?
-1<setTimeout.toString().indexOf("[native code]")?0:1:-1}};b.zb=y;0>a.indexOf("@")&&(a+="@AdobeOrg");b.marketingCloudOrgID=a;b.cookieName="AMCV_"+a;b.sessionCookieName="AMCVS_"+a;b.cookieDomain=b.Ka();b.cookieDomain==d.location.hostname&&(b.cookieDomain="");b.loadSSL=0<=d.location.protocol.toLowerCase().indexOf("https");b.loadTimeout=3E4;b.CORSErrors=[];b.marketingCloudServer=b.audienceManagerServer="dpm.demdex.net";if(x&&"object"==typeof x){for(var z in x)!Object.prototype[z]&&(b[z]=x[z]);b.idSyncContainerID=
b.idSyncContainerID||0;b.f();L=b.a(H);z=Math.ceil((new Date).getTime()/G.aa);!b.idSyncDisableSyncs&&E.Sa(L,z)&&(b.m(F,-1),b.c(H,z));b.getMarketingCloudVisitorID();b.getAudienceManagerLocationHint();b.getAudienceManagerBlob()}if(!b.idSyncDisableSyncs){E.Ta();R.na(window,"load",function(){e.Z=q;y.Y=y.o();y.mb();var a=E;a.Aa()&&a.Q()});try{b.ma.V(function(a){E.V(a.data)},E.S)}catch(r){}}}
Visitor.getInstance=function(a,x){var b,d=window.s_c_il,e;0>a.indexOf("@")&&(a+="@AdobeOrg");if(d)for(e=0;e<d.length;e++)if((b=d[e])&&"Visitor"==b._c&&b.marketingCloudOrgID==a)return b;return new Visitor(a,x)};(function(){function a(){x.Z=b}var x=window.Visitor,b=x.Ia,d=x.Ga;b||(b=A);d||(d=B);window.addEventListener?window.addEventListener("load",a):window.attachEvent&&window.attachEvent("onload",a);x.Va=(new Date).getTime()})();
function AppMeasurement(){var a=this;a.version="2.1.0";var x=window;x.s_c_in||(x.s_c_il=[],x.s_c_in=0);a._il=x.s_c_il;a._in=x.s_c_in;a._il[a._in]=a;x.s_c_in++;a._c="s_c";var b=x.AppMeasurement.Ob;b||(b=null);var d=x,e,c;try{for(e=d.parent,c=d.location;e&&e.location&&c&&""+e.location!=""+c&&d.location&&""+e.location!=""+d.location&&e.location.host==c.host;)d=e,e=d.parent}catch(g){}a.P=function(a){try{console.log(a)}catch(b){}};a.La=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,c){return!a||
0>a.indexOf(b)?a:a.split(b).join(c)};a.escape=function(b){var c,d;if(!b)return b;b=encodeURIComponent(b);for(c=0;7>c;c++)d="+~!*()'".substring(c,c+1),0<=b.indexOf(d)&&(b=a.replace(b,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return b};a.unescape=function(b){if(!b)return b;b=0<=b.indexOf("+")?a.replace(b,"+"," "):b;try{return decodeURIComponent(b)}catch(c){}return unescape(b)};a.vb=function(){var b=x.location.hostname,c=a.fpCookieDomainPeriods,d;c||(c=a.cookieDomainPeriods);if(b&&!a.cookieDomain&&
!/^[0-9.]+$/.test(b)&&(c=c?parseInt(c):2,c=2<c?c:2,d=b.lastIndexOf("."),0<=d)){for(;0<=d&&1<c;)d=b.lastIndexOf(".",d-1),c--;a.cookieDomain=0<d?b.substring(d):b}return a.cookieDomain};a.c_r=a.cookieRead=function(b){b=a.escape(b);var c=" "+a.d.cookie,d=c.indexOf(" "+b+"="),e=0>d?d:c.indexOf(";",d);b=0>d?"":a.unescape(c.substring(d+2+b.length,0>e?c.length:e));return"[[B]]"!=b?b:""};a.c_w=a.cookieWrite=function(b,c,d){var e=a.vb(),f=a.cookieLifetime,g;c=""+c;f=f?(""+f).toUpperCase():"";d&&"SESSION"!=
f&&"NONE"!=f&&((g=""!=c?parseInt(f?f:0):-60)?(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return b&&"NONE"!=f?(a.d.cookie=a.escape(b)+"="+a.escape(""!=c?c:"[[B]]")+"; path=/;"+(d&&"SESSION"!=f?" expires="+d.toGMTString()+";":"")+(e?" domain="+e+";":""),a.cookieRead(b)==c):0};a.K=[];a.ia=function(b,c,d){if(a.Ea)return 0;a.maxDelay||(a.maxDelay=250);var e=0,f=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,h=["webkitvisibilitychange",
"visibilitychange"];g||(g=a.d.webkitVisibilityState);if(g&&"prerender"==g){if(!a.ja)for(a.ja=1,d=0;d<h.length;d++)a.d.addEventListener(h[d],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&(a.ja=0,a.delayReady())});e=1;f=0}else d||a.p("_d")&&(e=1);e&&(a.K.push({m:b,a:c,t:f}),a.ja||setTimeout(a.delayReady,a.maxDelay));return e};a.delayReady=function(){var b=(new Date).getTime(),c=0,d;for(a.p("_d")?c=1:a.xa();0<a.K.length;){d=a.K.shift();if(c&&!d.t&&d.t>b){a.K.unshift(d);
setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Ea=1;a[d.m].apply(a,d.a);a.Ea=0}};a.setAccount=a.sa=function(b){var c,d;if(!a.ia("setAccount",arguments))if(a.account=b,a.allAccounts)for(c=a.allAccounts.concat(b.split(",")),a.allAccounts=[],c.sort(),d=0;d<c.length;d++)0!=d&&c[d-1]==c[d]||a.allAccounts.push(c[d]);else a.allAccounts=b.split(",")};a.foreachVar=function(b,c){var d,e,f,g,h="";f=e="";if(a.lightProfileID)d=a.O,(h=a.lightTrackVars)&&(h=","+h+","+a.na.join(",")+",");else{d=a.g;if(a.pe||
a.linkType)h=a.linkTrackVars,e=a.linkTrackEvents,a.pe&&(f=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[f]&&(h=a[f].Mb,e=a[f].Lb));h&&(h=","+h+","+a.G.join(",")+",");e&&h&&(h+=",events,")}c&&(c=","+c+",");for(e=0;e<d.length;e++)f=d[e],(g=a[f])&&(!h||0<=h.indexOf(","+f+","))&&(!c||0<=c.indexOf(","+f+","))&&b(f,g)};a.r=function(b,c,d,e,f){var g="",h,k,q,x,p=0;"contextData"==b&&(b="c");if(c){for(h in c)if(!(Object.prototype[h]||f&&h.substring(0,f.length)!=f)&&c[h]&&(!d||0<=d.indexOf(","+(e?e+
".":"")+h+","))){q=!1;if(p)for(k=0;k<p.length;k++)h.substring(0,p[k].length)==p[k]&&(q=!0);if(!q&&(""==g&&(g+="&"+b+"."),k=c[h],f&&(h=h.substring(f.length)),0<h.length))if(q=h.indexOf("."),0<q)k=h.substring(0,q),q=(f?f:"")+k+".",p||(p=[]),p.push(q),g+=a.r(k,c,d,e,q);else if("boolean"==typeof k&&(k=k?"true":"false"),k){if("retrieveLightData"==e&&0>f.indexOf(".contextData."))switch(q=h.substring(0,4),x=h.substring(4),h){case "transactionID":h="xact";break;case "channel":h="ch";break;case "campaign":h=
"v0";break;default:a.La(x)&&("prop"==q?h="c"+x:"eVar"==q?h="v"+x:"list"==q?h="l"+x:"hier"==q&&(h="h"+x,k=k.substring(0,255)))}g+="&"+a.escape(h)+"="+a.escape(k)}}""!=g&&(g+="&."+b)}return g};a.usePostbacks=0;a.yb=function(){var c="",d,e,f,g,k,h,q,x,F="",p="",G=g="";if(a.lightProfileID)d=a.O,(F=a.lightTrackVars)&&(F=","+F+","+a.na.join(",")+",");else{d=a.g;if(a.pe||a.linkType)F=a.linkTrackVars,p=a.linkTrackEvents,a.pe&&(g=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[g]&&(F=a[g].Mb,p=a[g].Lb));
F&&(F=","+F+","+a.G.join(",")+",");p&&(p=","+p+",",F&&(F+=",events,"));a.events2&&(G+=(""!=G?",":"")+a.events2)}if(a.visitor&&a.visitor.getCustomerIDs){g=b;if(k=a.visitor.getCustomerIDs())for(e in k)Object.prototype[e]||(f=k[e],"object"==typeof f&&(g||(g={}),f.id&&(g[e+".id"]=f.id),f.authState&&(g[e+".as"]=f.authState)));g&&(c+=a.r("cid",g))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r("d",a.AudienceManagement.getEventCallConfigParams()));for(e=0;e<d.length;e++){g=d[e];k=a[g];f=g.substring(0,
4);h=g.substring(4);k||("events"==g&&G?(k=G,G=""):"marketingCloudOrgID"==g&&a.visitor&&(k=a.visitor.marketingCloudOrgID));if(k&&(!F||0<=F.indexOf(","+g+","))){switch(g){case "customerPerspective":g="cp";break;case "marketingCloudOrgID":g="mcorgid";break;case "supplementalDataID":g="sdid";break;case "timestamp":g="ts";break;case "dynamicVariablePrefix":g="D";break;case "visitorID":g="vid";break;case "marketingCloudVisitorID":g="mid";break;case "analyticsVisitorID":g="aid";break;case "audienceManagerLocationHint":g=
"aamlh";break;case "audienceManagerBlob":g="aamb";break;case "authState":g="as";break;case "pageURL":g="g";255<k.length&&(a.pageURLRest=k.substring(255),k=k.substring(0,255));break;case "pageURLRest":g="-g";break;case "referrer":g="r";break;case "vmk":case "visitorMigrationKey":g="vmt";break;case "visitorMigrationServer":g="vmf";a.ssl&&a.visitorMigrationServerSecure&&(k="");break;case "visitorMigrationServerSecure":g="vmf";!a.ssl&&a.visitorMigrationServer&&(k="");break;case "charSet":g="ce";break;
case "visitorNamespace":g="ns";break;case "cookieDomainPeriods":g="cdp";break;case "cookieLifetime":g="cl";break;case "variableProvider":g="vvp";break;case "currencyCode":g="cc";break;case "channel":g="ch";break;case "transactionID":g="xact";break;case "campaign":g="v0";break;case "latitude":g="lat";break;case "longitude":g="lon";break;case "resolution":g="s";break;case "colorDepth":g="c";break;case "javascriptVersion":g="j";break;case "javaEnabled":g="v";break;case "cookiesEnabled":g="k";break;case "browserWidth":g=
"bw";break;case "browserHeight":g="bh";break;case "connectionType":g="ct";break;case "homepage":g="hp";break;case "events":G&&(k+=(""!=k?",":"")+G);if(p)for(h=k.split(","),k="",f=0;f<h.length;f++)q=h[f],x=q.indexOf("="),0<=x&&(q=q.substring(0,x)),x=q.indexOf(":"),0<=x&&(q=q.substring(0,x)),0<=p.indexOf(","+q+",")&&(k+=(k?",":"")+h[f]);break;case "events2":k="";break;case "contextData":c+=a.r("c",a[g],F,g);k="";break;case "lightProfileID":g="mtp";break;case "lightStoreForSeconds":g="mtss";a.lightProfileID||
(k="");break;case "lightIncrementBy":g="mti";a.lightProfileID||(k="");break;case "retrieveLightProfiles":g="mtsr";break;case "deleteLightProfiles":g="mtsd";break;case "retrieveLightData":a.retrieveLightProfiles&&(c+=a.r("mts",a[g],F,g));k="";break;default:a.La(h)&&("prop"==f?g="c"+h:"eVar"==f?g="v"+h:"list"==f?g="l"+h:"hier"==f&&(g="h"+h,k=k.substring(0,255)))}k&&(c+="&"+g+"="+("pev"!=g.substring(0,3)?a.escape(k):k))}"pev3"==g&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if("undefined"!=
""+a.Rb||"undefined"!=""+a.Hb&&"HTML"!=(""+a.Hb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Ha=function(a){var b=x.location,c=a.href?a.href:"",d,e,f;d=c.indexOf(":");e=c.indexOf("?");f=c.indexOf("/");c&&(0>d||0<=e&&d>e||0<=f&&d>f)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:"",d=b.pathname.lastIndexOf("/"),c=(e?e+"//":"")+(a.host?
a.host:b.host?b.host:"")+("/"!=c.substring(0,1)?b.pathname.substring(0,0>d?0:d)+"/":"")+c);return c};a.L=function(b){var c=a.D(b),d,e,f="",g=0;return c&&(d=b.protocol,e=b.onclick,!b.href||"A"!=c&&"AREA"!=c||e&&d&&!(0>d.toLowerCase().indexOf("javascript"))?e?(f=a.replace(a.replace(a.replace(a.replace(""+e,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==c||"SUBMIT"==c?(b.value?f=b.value:b.innerText?f=b.innerText:b.textContent&&(f=b.textContent),g=3):"IMAGE"==c&&b.src&&(f=b.src):f=a.Ha(b),f)?{id:f.substring(0,
100),type:g}:0};a.Pb=function(b){for(var c=a.D(b),d=a.L(b);b&&!d&&"BODY"!=c;)if(b=b.parentElement?b.parentElement:b.parentNode)c=a.D(b),d=a.L(b);d&&"BODY"!=c||(b=0);b&&(c=b.onclick?""+b.onclick:"",0<=c.indexOf(".tl(")||0<=c.indexOf(".trackLink("))&&(b=0);return b};a.Gb=function(){var b,c,d=a.linkObject,e=a.linkType,f=a.linkURL,g,h;a.oa=1;d||(a.oa=0,d=a.clickObject);if(d){b=a.D(d);for(c=a.L(d);d&&!c&&"BODY"!=b;)if(d=d.parentElement?d.parentElement:d.parentNode)b=a.D(d),c=a.L(d);c&&"BODY"!=b||(d=0);
if(d&&!a.linkObject){var k=d.onclick?""+d.onclick:"";if(0<=k.indexOf(".tl(")||0<=k.indexOf(".trackLink("))d=0}}else a.oa=1;!f&&d&&(f=a.Ha(d));f&&!a.linkLeaveQueryString&&(g=f.indexOf("?"),0<=g&&(f=f.substring(0,g)));if(!e&&f){var q=0,F=0,p;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(k=f.toLowerCase(),g=k.indexOf("?"),h=k.indexOf("#"),0<=g?0<=h&&h<g&&(g=h):g=h,0<=g&&(k=k.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),h=0;h<g.length;h++)(p=g[h])&&k.substring(k.length-(p.length+
1))=="."+p&&(e="d");if(a.trackExternalLinks&&!e&&(k=f.toLowerCase(),a.Ka(k)&&(a.linkInternalFilters||(a.linkInternalFilters=x.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),q=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(h=0;h<g.length;h++)p=g[h],0<=k.indexOf(p)&&(F=1);F?q&&(e="e"):q||(e="e")}}a.linkObject=d;a.linkURL=f;a.linkType=e;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(e=a.pageName,f=1,d=d.sourceIndex,
e||(e=a.pageURL,f=0),x.s_objectID&&(c.id=x.s_objectID,d=c.type=1),e&&c&&c.id&&b&&(a.e="&pid="+a.escape(e.substring(0,255))+(f?"&pidt="+f:"")+"&oid="+a.escape(c.id.substring(0,100))+(c.type?"&oidt="+c.type:"")+"&ot="+b+(d?"&oi="+d:"")))};a.zb=function(){var b=a.oa,c=a.linkType,d=a.linkURL,e=a.linkName;c&&(d||e)&&(c=c.toLowerCase(),"d"!=c&&"e"!=c&&(c="o"),a.pe="lnk_"+c,a.pev1=d?a.escape(d):"",a.pev2=e?a.escape(e):"",b=1);a.abort&&(b=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var c={},
d=0,f=a.cookieRead("s_sq"),g=f?f.split("&"):0,h,k,q,f=0;if(g)for(h=0;h<g.length;h++)k=g[h].split("="),e=a.unescape(k[0]).split(","),k=a.unescape(k[1]),c[k]=e;e=a.account.split(",");h={};for(q in a.contextData)q&&!Object.prototype[q]&&"a.activitymap."==q.substring(0,14)&&(h[q]=a.contextData[q],a.contextData[q]="");a.e=a.r("c",h)+(a.e?a.e:"");if(b||a.e){b&&!a.e&&(f=1);for(k in c)if(!Object.prototype[k])for(q=0;q<e.length;q++)for(f&&(g=c[k].join(","),g==a.account&&(a.e+=("&"!=k.charAt(0)?"&":"")+k,c[k]=
[],d=1)),h=0;h<c[k].length;h++)g=c[k][h],g==e[q]&&(f&&(a.e+="&u="+a.escape(g)+("&"!=k.charAt(0)?"&":"")+k+"&u=0"),c[k].splice(h,1),d=1);b||(d=1);if(d){f="";h=2;!b&&a.e&&(f=a.escape(e.join(","))+"="+a.escape(a.e),h=1);for(k in c)!Object.prototype[k]&&0<h&&0<c[k].length&&(f+=(f?"&":"")+a.escape(c[k].join(","))+"="+a.escape(k),h--);a.cookieWrite("s_sq",f)}}}return b};a.Ab=function(){if(!a.Kb){var b=new Date,c=d.location,e,f,g="",k="",h="",q="1.2",x=a.cookieWrite("s_cc","true",0)?"Y":"N",F="",p="";if(b.setUTCDate&&
(q="1.3",(0).toPrecision&&(q="1.5",b=[],b.forEach))){q="1.6";f=0;e={};try{f=new Iterator(e),f.next&&(q="1.7",b.reduce&&(q="1.8",q.trim&&(q="1.8.1",Date.parse&&(q="1.8.2",Object.create&&(q="1.8.5")))))}catch(G){}}e=screen.width+"x"+screen.height;g=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;k=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;h=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),
F=a.b.Qb(c)?"Y":"N"}catch(M){}try{a.b.addBehavior("#default#clientCaps"),p=a.b.connectionType}catch(L){}a.resolution=e;a.colorDepth=f;a.javascriptVersion=q;a.javaEnabled=g;a.cookiesEnabled=x;a.browserWidth=k;a.browserHeight=h;a.connectionType=p;a.homepage=F;a.Kb=1}};a.Q={};a.loadModule=function(b,c){var d=a.Q[b];if(!d){d=x["AppMeasurement_Module_"+b]?new x["AppMeasurement_Module_"+b](a):{};a.Q[b]=a[b]=d;d.cb=function(){return d.hb};d.ib=function(c){if(d.hb=c)a[b+"_onLoad"]=c,a.ia(b+"_onLoad",[a,d],
1)||c(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.cb,set:d.ib}):d._olc=1}catch(e){d._olc=1}}c&&(a[b+"_onLoad"]=c,a.ia(b+"_onLoad",[a,d],1)||c(a,d))};a.p=function(b){var c,d;for(c in a.Q)if(!Object.prototype[c]&&(d=a.Q[c])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[b]&&d[b]()))return 1;return 0};a.Cb=function(){var b=Math.floor(1E13*Math.random()),c=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),e=
a.cookieRead(d);if(c){c*=100;e&&(e=parseInt(e));if(!e){if(!a.cookieWrite(d,b))return 0;e=b}if(e%1E4>c)return 0}return 1};a.R=function(b,c){var d,e,f,g,h,k;for(d=0;2>d;d++)for(e=0<d?a.Aa:a.g,f=0;f<e.length;f++)if(g=e[f],(h=b[g])||b["!"+g]){if(!c&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(k in a[g])h[k]||(h[k]=a[g][k]);a[g]=h}};a.Ua=function(b,c){var d,e,f,g;for(d=0;2>d;d++)for(e=0<d?a.Aa:a.g,f=0;f<e.length;f++)g=e[f],b[g]=a[g],c||b[g]||(b["!"+g]=1)};a.ub=function(a){var b,c,d,e,f,g=0,k,
q="",x="";if(a&&255<a.length&&(b=""+a,c=b.indexOf("?"),0<c&&(k=b.substring(c+1),b=b.substring(0,c),e=b.toLowerCase(),d=0,"http://"==e.substring(0,7)?d+=7:"https://"==e.substring(0,8)&&(d+=8),c=e.indexOf("/",d),0<c&&(e=e.substring(d,c),f=b.substring(c),b=b.substring(0,c),0<=e.indexOf("google")?g=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(g=",p,ei,"),g&&k)))){if((a=k.split("&"))&&1<a.length){for(d=0;d<a.length;d++)e=a[d],c=e.indexOf("="),0<c&&0<=g.indexOf(","+e.substring(0,c)+",")?
q+=(q?"&":"")+e:x+=(x?"&":"")+e;q&&x?k=q+"&"+x:x=""}c=253-(k.length-x.length)-b.length;a=b+(0<c?f.substring(0,c):"")+"?"+k}return a};a.$a=function(b){var c=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];c||(c=a.d.webkitVisibilityState);if(c&&"prerender"==c){if(b)for(c=0;c<d.length;c++)a.d.addEventListener(d[c],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState);"visible"==c&&b()});return!1}return!0};a.ea=!1;a.I=!1;a.kb=function(){a.I=!0;a.j()};a.ca=!1;a.V=!1;
a.gb=function(b){a.marketingCloudVisitorID=b;a.V=!0;a.j()};a.fa=!1;a.W=!1;a.lb=function(b){a.visitorOptedOut=b;a.W=!0;a.j()};a.Z=!1;a.S=!1;a.Wa=function(b){a.analyticsVisitorID=b;a.S=!0;a.j()};a.ba=!1;a.U=!1;a.Ya=function(b){a.audienceManagerLocationHint=b;a.U=!0;a.j()};a.aa=!1;a.T=!1;a.Xa=function(b){a.audienceManagerBlob=b;a.T=!0;a.j()};a.Za=function(b){a.maxDelay||(a.maxDelay=250);return a.p("_d")?(b&&setTimeout(function(){b()},a.maxDelay),!1):!0};a.da=!1;a.H=!1;a.xa=function(){a.H=!0;a.j()};a.isReadyToTrack=
function(){var c=!0,d=a.visitor,e,f,g;a.ea||a.I||(a.$a(a.kb)?a.I=!0:a.ea=!0);if(a.ea&&!a.I)return!1;d&&d.isAllowed()&&(a.ca||a.marketingCloudVisitorID||!d.getMarketingCloudVisitorID||(a.ca=!0,a.marketingCloudVisitorID=d.getMarketingCloudVisitorID([a,a.gb]),a.marketingCloudVisitorID&&(a.V=!0)),a.fa||a.visitorOptedOut||!d.isOptedOut||(a.fa=!0,a.visitorOptedOut=d.isOptedOut([a,a.lb]),a.visitorOptedOut!=b&&(a.W=!0)),a.Z||a.analyticsVisitorID||!d.getAnalyticsVisitorID||(a.Z=!0,a.analyticsVisitorID=d.getAnalyticsVisitorID([a,
a.Wa]),a.analyticsVisitorID&&(a.S=!0)),a.ba||a.audienceManagerLocationHint||!d.getAudienceManagerLocationHint||(a.ba=!0,a.audienceManagerLocationHint=d.getAudienceManagerLocationHint([a,a.Ya]),a.audienceManagerLocationHint&&(a.U=!0)),a.aa||a.audienceManagerBlob||!d.getAudienceManagerBlob||(a.aa=!0,a.audienceManagerBlob=d.getAudienceManagerBlob([a,a.Xa]),a.audienceManagerBlob&&(a.T=!0)),c=a.ca&&!a.V&&!a.marketingCloudVisitorID,d=a.Z&&!a.S&&!a.analyticsVisitorID,e=a.ba&&!a.U&&!a.audienceManagerLocationHint,
f=a.aa&&!a.T&&!a.audienceManagerBlob,g=a.fa&&!a.W,c=c||d||e||f||g?!1:!0);a.da||a.H||(a.Za(a.xa)?a.H=!0:a.da=!0);a.da&&!a.H&&(c=!1);return c};a.o=b;a.u=0;a.callbackWhenReadyToTrack=function(c,d,e){var f;f={};f.pb=c;f.ob=d;f.mb=e;a.o==b&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.jb(),a.o!=b))for(;0<a.o.length;)c=a.o.shift(),c.ob.apply(c.pb,c.mb)};a.jb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.eb=function(c){var d,e,f=b,g=b;if(!a.isReadyToTrack()){d=
[];if(c!=b)for(e in f={},c)f[e]=c[e];g={};a.Ua(g,!0);d.push(f);d.push(g);a.callbackWhenReadyToTrack(a,a.track,d);return!0}return!1};a.wb=function(){var b=a.cookieRead("s_fid"),c="",d="",e;e=8;var f=4;if(!b||0>b.indexOf("-")){for(b=0;16>b;b++)e=Math.floor(Math.random()*e),c+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*f),d+="0123456789ABCDEF".substring(e,e+1),e=f=16;b=c+"-"+d}a.cookieWrite("s_fid",b,1)||(b=0);return b};a.t=a.track=function(b,c){var e,f=new Date,g="s"+Math.floor(f.getTime()/
108E5)%10+Math.floor(1E13*Math.random()),k=f.getYear(),k="t="+a.escape(f.getDate()+"/"+f.getMonth()+"/"+(1900>k?k+1900:k)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState());a.p("_s");a.eb(b)||(c&&a.R(c),b&&(e={},a.Ua(e,0),a.R(b)),a.Cb()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.wb()),a.Gb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&
(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1E3)),f=x.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Va||(f=a.Util.getQueryParam("adobe_mc_ref",null,null,!0),a.referrer=f||void 0===f?void 0===f?"":f:d.document.referrer),a.Va=1,a.referrer=a.ub(a.referrer),a.p("_g")),a.zb()&&!a.abort&&(a.visitor&&!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?
!1:!0)),a.Ab(),k+=a.yb(),a.Fb(g,k),a.p("_t"),a.referrer=""))),b&&a.R(e,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=x.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.za=[];a.registerPreTrackCallback=function(b){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);"function"==typeof b?a.za.push([b,c]):a.debugTracking&&a.P("DEBUG: Non function type passed to registerPreTrackCallback")};a.bb=function(b){a.wa(a.za,
b)};a.ya=[];a.registerPostTrackCallback=function(b){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);"function"==typeof b?a.ya.push([b,c]):a.debugTracking&&a.P("DEBUG: Non function type passed to registerPostTrackCallback")};a.ab=function(b){a.wa(a.ya,b)};a.wa=function(b,c){if("object"==typeof b)for(var d=0;d<b.length;d++){var e=b[d][0],f=b[d][1];f.unshift(c);if("function"==typeof e)try{e.apply(null,f)}catch(g){a.debugTracking&&a.P(g.message)}}};a.tl=a.trackLink=function(b,c,d,e,f){a.linkObject=
b;a.linkType=c;a.linkName=d;f&&(a.l=b,a.A=f);return a.track(e)};a.trackLight=function(b,c,d,e){a.lightProfileID=b;a.lightStoreForSeconds=c;a.lightIncrementBy=d;return a.track(e)};a.clearVars=function(){var b,c;for(b=0;b<a.g.length;b++)if(c=a.g[b],"prop"==c.substring(0,4)||"eVar"==c.substring(0,4)||"hier"==c.substring(0,4)||"list"==c.substring(0,4)||"channel"==c||"events"==c||"eventList"==c||"products"==c||"productList"==c||"purchaseID"==c||"transactionID"==c||"state"==c||"zip"==c||"campaign"==c)a[c]=
void 0};a.tagContainerMarker="";a.Fb=function(b,c){var d,e=a.trackingServer;d="";var f=a.dc,g="sc.",h=a.visitorNamespace;e?a.trackingServerSecure&&a.ssl&&(e=a.trackingServerSecure):(h||(h=a.account,e=h.indexOf(","),0<=e&&(h=h.substring(0,e)),h=h.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),f=f?(""+f).toLowerCase():"d1","2o7.net"==d&&("d1"==f?f="112":"d2"==f&&(f="122"),g=""),e=h+"."+f+"."+g+d);d=a.ssl?"https://":"http://";f=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=
e+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(f?"10":"1")+"/JS-"+a.version+(a.Jb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+b+"?AQB=1&ndh=1&pf=1&"+(f?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+c+"&AQE=1";a.bb(d);a.sb(d);a.ka()};a.Ta=/{(%?)(.*?)(%?)}/;a.Nb=RegExp(a.Ta.source,"g");a.tb=function(b){if("object"==typeof b.dests)for(var c=0;c<b.dests.length;++c){var d=b.dests[c];if("string"==typeof d.c&&"aa."==d.id.substr(0,3))for(var e=d.c.match(a.Nb),f=0;f<e.length;++f){var g=
e[f],h=g.match(a.Ta),k="";"%"==h[1]&&"timezone_offset"==h[2]?k=(new Date).getTimezoneOffset():"%"==h[1]&&"timestampz"==h[2]&&(k=a.xb());d.c=d.c.replace(g,a.escape(k))}}};a.xb=function(){var b=new Date,c=new Date(6E4*Math.abs(b.getTimezoneOffset()));return a.k(4,b.getFullYear())+"-"+a.k(2,b.getMonth()+1)+"-"+a.k(2,b.getDate())+"T"+a.k(2,b.getHours())+":"+a.k(2,b.getMinutes())+":"+a.k(2,b.getSeconds())+(0<b.getTimezoneOffset()?"-":"+")+a.k(2,c.getUTCHours())+":"+a.k(2,c.getUTCMinutes())};a.k=function(a,
b){return(Array(a+1).join(0)+b).slice(-a)};a.ta={};a.doPostbacks=function(b){if("object"==typeof b)if(a.tb(b),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(b);else if("object"==typeof b&&"object"==typeof b.dests)for(var c=0;c<b.dests.length;++c){var d=b.dests[c];"object"==typeof d&&"string"==typeof d.c&&"string"==typeof d.id&&"aa."==d.id.substr(0,
3)&&(a.ta[d.id]=new Image,a.ta[d.id].alt="",a.ta[d.id].src=d.c)}};a.sb=function(b){a.i||a.Bb();a.i.push(b);a.ma=a.C();a.Ra()};a.Bb=function(){a.i=a.Db();a.i||(a.i=[])};a.Db=function(){var b,c;if(a.ra()){try{(c=x.localStorage.getItem(a.pa()))&&(b=x.JSON.parse(c))}catch(d){}return b}};a.ra=function(){var b=!0;a.trackOffline&&a.offlineFilename&&x.localStorage&&x.JSON||(b=!1);return b};a.Ia=function(){var b=0;a.i&&(b=a.i.length);a.q&&b++;return b};a.ka=function(){if(!a.q||(a.B&&a.B.complete&&a.B.F&&a.B.va(),
!a.q))if(a.Ja=b,a.qa)a.ma>a.N&&a.Pa(a.i),a.ua(500);else{var c=a.nb();if(0<c)a.ua(c);else if(c=a.Fa())a.q=1,a.Eb(c),a.Ib(c)}};a.ua=function(b){a.Ja||(b||(b=0),a.Ja=setTimeout(a.ka,b))};a.nb=function(){var b;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;b=a.C()-a.Oa;return a.offlineThrottleDelay<b?0:a.offlineThrottleDelay-b};a.Fa=function(){if(0<a.i.length)return a.i.shift()};a.Eb=function(b){if(a.debugTracking){var c="AppMeasurement Debug: "+b;b=b.split("&");var d;for(d=0;d<b.length;d++)c+=
"\n\t"+a.unescape(b[d]);a.P(c)}};a.fb=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.Y=!1;var f;try{f=JSON.parse('{"x":"y"}')}catch(q){f=null}f&&"y"==f.x?(a.Y=!0,a.X=function(a){return JSON.parse(a)}):x.$&&x.$.parseJSON?(a.X=function(a){return x.$.parseJSON(a)},a.Y=!0):a.X=function(){return null};a.Ib=function(c){var d,e,f;a.fb()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(d=new XMLHttpRequest,"withCredentials"in d?e=1:d=0),d||"undefined"==typeof XDomainRequest||(d=
new XDomainRequest,e=2),d&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.Y?d.Ba=!0:d=0));!d&&a.Sa&&(c=c.substring(0,2047));!d&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(d=a.d.createElement("SCRIPT"))&&"async"in d&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(d.type="text/javascript",d.setAttribute("async","async"),e=3):d=0);d||(d=new Image,d.alt="",d.abort||"undefined"===typeof x.InstallTrigger||
(d.abort=function(){d.src=b}));d.Da=function(){try{d.F&&(clearTimeout(d.F),d.F=0)}catch(a){}};d.onload=d.va=function(){a.ab(c);d.Da();a.rb();a.ga();a.q=0;a.ka();if(d.Ba){d.Ba=!1;try{a.doPostbacks(a.X(d.responseText))}catch(b){}}};d.onabort=d.onerror=d.Ga=function(){d.Da();(a.trackOffline||a.qa)&&a.q&&a.i.unshift(a.qb);a.q=0;a.ma>a.N&&a.Pa(a.i);a.ga();a.ua(500)};d.onreadystatechange=function(){4==d.readyState&&(200==d.status?d.va():d.Ga())};a.Oa=a.C();if(1==e||2==e){var g=c.indexOf("?");f=c.substring(0,
g);g=c.substring(g+1);g=g.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==e?(d.open("POST",f,!0),d.send(g)):2==e&&(d.open("POST",f),d.send(g))}else if(d.src=c,3==e){if(a.Ma)try{f.removeChild(a.Ma)}catch(k){}f.firstChild?f.insertBefore(d,f.firstChild):f.appendChild(d);a.Ma=a.B}d.F=setTimeout(function(){d.F&&(d.complete?d.va():(a.trackOffline&&d.abort&&d.abort(),d.Ga()))},5E3);a.qb=c;a.B=x["s_i_"+a.replace(a.account,",","_")]=d;if(a.useForcedLinkTracking&&a.J||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=
250),a.ha=setTimeout(a.ga,a.forcedLinkTrackingTimeout)};a.rb=function(){if(a.ra()&&!(a.Na>a.N))try{x.localStorage.removeItem(a.pa()),a.Na=a.C()}catch(b){}};a.Pa=function(b){if(a.ra()){a.Ra();try{x.localStorage.setItem(a.pa(),x.JSON.stringify(b)),a.N=a.C()}catch(c){}}};a.Ra=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>a.offlineLimit;)a.Fa()}};a.forceOffline=function(){a.qa=!0};a.forceOnline=function(){a.qa=!1};a.pa=function(){return a.offlineFilename+
"-"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.Ka=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(b){var c,d,e;a.Jb=b;for(c=0;c<a._il.length;c++)if((d=a._il[c])&&"s_l"==d._c&&d.tagContainerName==b){a.R(d);if(d.lmq)for(c=0;c<d.lmq.length;c++)e=d.lmq[c],a.loadModule(e.n);if(d.ml)for(e in d.ml)if(a[e])for(c in b=a[e],e=d.ml[e],e)!Object.prototype[c]&&("function"!=
typeof e[c]||0>(""+e[c]).indexOf("s_c_il"))&&(b[c]=e[c]);if(d.mmq)for(c=0;c<d.mmq.length;c++)e=d.mmq[c],a[e.m]&&(b=a[e.m],b[e.f]&&"function"==typeof b[e.f]&&(e.a?b[e.f].apply(b,e.a):b[e.f].apply(b)));if(d.tq)for(c=0;c<d.tq.length;c++)a.track(d.tq[c]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(b,c,d,e){var f,g="";c||(c=a.pageURL?a.pageURL:x.location);d=d?d:"&";if(!b||!c)return g;c=""+c;f=c.indexOf("?");if(0>
f)return g;c=d+c.substring(f+1)+d;if(!e||!(0<=c.indexOf(d+b+d)||0<=c.indexOf(d+b+"="+d))){f=c.indexOf(d+b+"=");if(0>f)return g;c=c.substring(f+d.length+b.length+1);f=c.indexOf(d);0<=f&&(c=c.substring(0,f));0<c.length&&(g=a.unescape(c));return g}}};a.G="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");
a.g=a.G.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.na="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.O=a.na.slice(0);a.Aa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" ");
for(e=0;250>=e;e++)76>e&&(a.g.push("prop"+e),a.O.push("prop"+e)),a.g.push("eVar"+e),a.O.push("eVar"+e),6>e&&a.g.push("hier"+e),4>e&&a.g.push("list"+e);e="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" ");a.g=a.g.concat(e);a.G=a.G.concat(e);a.ssl=0<=x.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=
0;a.offlineFilename="AppMeasurement.offline";a.Oa=0;a.ma=0;a.N=0;a.Na=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=x;a.d=x.document;try{if(a.Sa=!1,navigator){var k=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName||0<=k.indexOf("MSIE ")||0<=k.indexOf("Trident/")&&0<=k.indexOf("Windows NT 6"))a.Sa=!0}}catch(M){}a.ga=function(){a.ha&&(x.clearTimeout(a.ha),a.ha=b);a.l&&a.J&&a.l.dispatchEvent(a.J);a.A&&("function"==typeof a.A?a.A():
a.l&&a.l.href&&(a.d.location=a.l.href));a.l=a.J=a.A=0};a.Qa=function(){a.b=a.d.body;a.b?(a.v=function(b){var c,d,e,f,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||b&&b["s_fe_"+a._in])){if(a.Ca)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.v,!1);else{a.b.removeEventListener("click",a.v,!0);a.Ca=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=b.srcElement?b.srcElement:b.target;try{if(!a.clickObject||a.M&&a.M==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||
a.clickObject.parentNode))a.clickObject=0;else{var h=a.M=a.clickObject;a.la&&(clearTimeout(a.la),a.la=0);a.la=setTimeout(function(){a.M==h&&(a.M=0)},1E4);e=a.Ia();a.track();if(e<a.Ia()&&a.useForcedLinkTracking&&b.target){for(f=b.target;f&&f!=a.b&&"A"!=f.tagName.toUpperCase()&&"AREA"!=f.tagName.toUpperCase();)f=f.parentNode;if(f&&(g=f.href,a.Ka(g)||(g=0),d=f.target,b.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||x.name&&d==x.name))){try{c=a.d.createEvent("MouseEvents")}catch(k){c=
new x.MouseEvent}if(c){try{c.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}catch(q){c=0}c&&(c["s_fe_"+a._in]=c.s_fe=1,b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),b.preventDefault(),a.l=b.target,a.J=c)}}}}}catch(F){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&
a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&x.MouseEvent)&&(a.Ca=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.v,!0)),a.b.addEventListener("click",a.v,!1))):setTimeout(a.Qa,30)};a.Qa();a.loadModule("ActivityMap")}
function s_gi(a){var x,b=window.s_c_il,d,e,c=a.split(","),g,f,q=0;if(b)for(d=0;!q&&d<b.length;){x=b[d];if("s_c"==x._c&&(x.account||x.oun))if(x.account&&x.account==a)q=1;else for(e=x.account?x.account:x.oun,e=x.allAccounts?x.allAccounts:e.split(","),g=0;g<c.length;g++)for(f=0;f<e.length;f++)c[g]==e[f]&&(q=1);d++}q||(x=new AppMeasurement);x.setAccount?x.setAccount(a):x.sa&&x.sa(a);return x}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);
function s_pgicq(){var a=window,x=a.s_giq,b,d,e;if(x)for(b=0;b<x.length;b++)d=x[b],e=s_gi(d.oun),e.setAccount(d.un),e.setTagContainer(d.tagContainerName);a.s_giq=0}s_pgicq();
!function(a,x){void 0!==a.Conviva||a.ConvivaLoading||(a.ConvivaLoading=!0,a.Conviva=x(),delete a.ConvivaLoading)}(this,function(){var a={};return function(){var x={};!function(){var b=a.Client=function(n,I){var g=this;this.defaultGatewayURLError=!1;this._systemFactory=this._sessionFactory=this._logger=null;this._globalSessionKey=-1;this._config=this._exceptionCatcher=this._systemSettings=this._settings=null;this._id=-1;this._released=!1;(function(a,b){if(!(a instanceof d))throw Error("clientSettings parameter should be an instance of ClientSettings.");
if(!(b instanceof c))throw Error("systemFactory parameter should be an instance of SystemFactory.");a.gatewayUrl!=d._httpsProtocol+d.defaultProductionGatewayDNS&&a.gatewayUrl!=d._httpProtocol+d.defaultProductionGatewayDNS||(this.defaultGatewayURLError=!0);this._settings=a.clone();this._systemFactory=b;this._systemFactory.configure("SDK",this._settings);this._exceptionCatcher=this._systemFactory.buildExceptionCatcher();this._exceptionCatcher.runProtected("Client.init",function(){g._id=V.uinteger32();
g._logger=g._systemFactory.buildLogger();g._logger.setModuleName("Client");g.defaultGatewayURLError&&g._logger.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored");g._logger.info("init(): url="+g._settings.gatewayUrl+" customerKey="+g._settings.customerKey);g._config=g._systemFactory.buildConfig();g._config.load();g._sessionFactory=g._systemFactory.buildSessionFactory(g,g._settings,g._config);g._logger.info("init(): done.")},function(a){throw Error("Client constructor failed: "+
a.message);})}).apply(this,arguments);this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){g._logger.info("release()");g._sessionFactory.cleanup();g._sessionFactory=null;g._globalSessionKey=-1;g._logger=null;g._id=-1;g._exceptionCatcher=null;g._settings=null;g._systemSettings=null;g._systemFactory=null;g._released=!0})};this.createSession=function(a){var c=b.NO_SESSION_KEY;return this._released?c:null==a||a instanceof e?(this._exceptionCatcher.runProtected("Client.createSession",
function(){c=g._sessionFactory.makeVideoSession(a,F.SESSION_TYPE.VIDEO)}),c):(g._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),c)};this.createAdSession=function(a,c){var d=b.NO_SESSION_KEY;return this._released?d:null==c||c instanceof e?(this._exceptionCatcher.runProtected("Client.createAdSession",function(){var b=g._sessionFactory.getVideoSession(a);null!=b&&((null==c.applicationName||null==c.viewerId)&&(null==c.viewerId&&null!=b._contentMetadata.viewerId&&
(c.viewerId=b._contentMetadata.viewerId),null==c.applicationName&&null!=b._contentMetadata.applicationName&&(c.applicationName=b._contentMetadata.applicationName)),c.custom["c3.csid"]=r.ToString(b._id));d=g._sessionFactory.makeVideoSession(c,F.SESSION_TYPE.AD)}),d):(g._logger.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter"),d)};this.reportError=function(b,c,d){return this._released?void 0:r.isValidString(c)?d!==a.Client.ErrorSeverity.FATAL&&d!==a.Client.ErrorSeverity.WARNING?
void this._logger.error("reportError(): invalid error severity: "+d):void this._exceptionCatcher.runProtected("Client.reportError",function(){var a=g._sessionFactory.getVideoSession(b);null!=a&&a.reportError(c,d)}):void this._logger.error("reportError(): invalid error message string: "+c)};this.updateContentMetadata=function(a,b){return this._released?void 0:b instanceof e?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){var c=g._sessionFactory.getVideoSession(a);
if(null!=c){var d=b.clone();c.updateContentMetadata(d)}}):void g._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter")};this.detachPlayer=function(a){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var b=g._sessionFactory.getVideoSession(a);null!=b&&b.detachPlayer()})};this.attachPlayer=function(a,b){return this._released?void 0:b instanceof f?void this._exceptionCatcher.runProtected("Client.attachPlayer",
function(){var c=g._sessionFactory.getVideoSession(a);null!=c&&c.attachPlayer(b)}):void g._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter")};this.contentPreload=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var b=g._sessionFactory.getVideoSession(a);null!=b&&b.contentPreload()})};this.contentStart=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var b=
g._sessionFactory.getVideoSession(a);null!=b&&b.contentStart()})};this.sendCustomEvent=function(a,c,d){return this._released?void 0:r.isValidString(c)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){if(a==b.NO_SESSION_KEY){if(0>g._globalSessionKey){var n=new e;g._globalSessionKey=g._sessionFactory.makeGlobalSession(n,null)}a=g._globalSessionKey}var n=r.sanitizeStringToStringObject(d),f=g._sessionFactory.getSession(a);null!=f&&f.sendCustomEvent(c,n)}):void g._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")};
this.adStart=function(a,c,d,e){return this._released?void 0:c!==b.AdStream.CONTENT&&c!==b.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+c):d!==b.AdPlayer.CONTENT&&d!==b.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+d):e!==b.AdPosition.BUMPER&&e!==b.AdPosition.PREROLL&&e!==b.AdPosition.MIDROLL&&e!==b.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+
e):void this._exceptionCatcher.runProtected("Client.adStart",function(){var b=g._sessionFactory.getVideoSession(a);null!=b&&b.adStart(c,d,e)})};this.adEnd=function(a){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var b=g._sessionFactory.getVideoSession(a);null!=b&&b.adEnd()})};this.cleanupSession=function(a){return this._released?void 0:a===b.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",
function(){null!=g._sessionFactory.getVideoSession(a)&&g._sessionFactory.cleanupSession(a)})};this.getAttachedPlayer=function(a){var c=null;return this._released?c:a===b.NO_SESSION_KEY?(this._logger.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"),c):(this._exceptionCatcher.runProtected("Client.getAttachedPlayer",function(){var b=g._sessionFactory.getVideoSession(a);null!=b&&(c=b.getPlayerStateManager())}),c)};this.isPlayerAttached=function(a){return this._released?!1:null!==this.getAttachedPlayer(a)?
!0:!1};this.getPlayerStateManager=function(){if(this._released)throw Error("This instance of Conviva.Client has been released.");return new f(this._systemFactory)};this.releasePlayerStateManager=function(a){if(this._released)throw Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){a instanceof f&&a.release()})};this.getSettings=function(){return this._settings};this.getId=function(){return this._id}};b.version=
"2.141.0.35966";b.NO_SESSION_KEY=-2;b.AdPosition={BUMPER:"BUMPER",PREROLL:"PREROLL",MIDROLL:"MIDROLL",POSTROLL:"POSTROLL"};b.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"};b.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"};b.ErrorSeverity={FATAL:0,WARNING:1};b.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",UNKNOWN:"Unknown"};b.AdTechnology={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"};b.AdType={BLACKOUT_SLATE:"Blackout slate",
TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"};b.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"};var d=a.ClientSettings=function(a){var b=this;this._customerKey=null;r.defGet(this,"customerKey",function(){return this._customerKey});r.defSet(this,"customerKey",function(a){r.isValidString(a)&&(this._customerKey=a)});this._heartbeatInterval=d.defaultProductionHeartbeatInterval;r.defGet(this,
"heartbeatInterval",function(){return this._heartbeatInterval});r.defSet(this,"heartbeatInterval",function(a){if("number"==typeof a){var b=r.NumberToUnsignedInt(a);b===a&&(this._heartbeatInterval=b)}});this._gatewayUrl=null;r.defGet(this,"gatewayUrl",function(){return this._gatewayUrl});r.defSet(this,"gatewayUrl",function(a){r.isValidString(a)&&(this._gatewayUrl=a)});(function(a){if(!r.isValidString(a))throw Error("customerKey must be valid");this.customerKey=a}).apply(this,arguments);this.equals=
function(a){return this.customerKey===a.customerKey&&this.gatewayUrl===a.gatewayUrl&&this.heartbeatInterval===a.heartbeatInterval};this.clone=function(){var a=new d(this.customerKey),c;a:{c=this.gatewayUrl;if(r.isValidString(c)){var e=c.split("://");if("cws.conviva.com"!=e[1]&&("https"==e[0]||"http"==e[0]))break a}c="https://"+b.customerKey+"."+d.defaultProductionGatewayDNS}return a.gatewayUrl=c,a.heartbeatInterval=this.heartbeatInterval,a}};d.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com";
d.defaultProductionGatewayUrl="https://cws.conviva.com";d.defaultProductionGatewayDNS="cws.conviva.com";d.defaultDevelopmentGatewayDNS="conviva.testonly.conviva.com";d._httpsProtocol="https://";d._httpProtocol="http://";d.defaultDevelopmentHeartbeatInterval=5;d.defaultProductionHeartbeatInterval=20;var e=a.ContentMetadata=function(){this._assetName=null;r.defGet(this,"assetName",function(){return this._assetName});r.defSet(this,"assetName",function(a){"string"==typeof a&&(this._assetName=a)});this._custom=
{};r.defGet(this,"custom",function(){return this._custom});r.defSet(this,"custom",function(a){"object"==typeof a&&(this._custom=r.sanitizeStringToStringObject(a))});this._defaultBitrateKbps=-2;r.defGet(this,"defaultBitrateKbps",function(){return this._defaultBitrateKbps});r.defSet(this,"defaultBitrateKbps",function(a){this._defaultBitrateKbps=O.sanitizeSpecialIntegerValue(a)});this._defaultResource=null;r.defGet(this,"defaultResource",function(){return this._defaultResource});r.defSet(this,"defaultResource",
function(a){"string"==typeof a&&(this._defaultResource=a)});this._viewerId=null;r.defGet(this,"viewerId",function(){return this._viewerId});r.defSet(this,"viewerId",function(a){"string"==typeof a&&(this._viewerId=a)});this._applicationName=null;r.defGet(this,"applicationName",function(){return this._applicationName});r.defSet(this,"applicationName",function(a){"string"==typeof a&&(this._applicationName=a)});this._streamUrl=null;r.defGet(this,"streamUrl",function(){return this._streamUrl});r.defSet(this,
"streamUrl",function(a){"string"==typeof a&&(this._streamUrl=a)});this._streamType=e.StreamType.UNKNOWN;r.defGet(this,"streamType",function(){return this._streamType});r.defSet(this,"streamType",function(a){a!==e.StreamType.UNKNOWN&&a!==e.StreamType.VOD&&a!==e.StreamType.LIVE||(this._streamType=a)});this._duration=-1;r.defGet(this,"duration",function(){return this._duration});r.defSet(this,"duration",function(a){this._duration=O.sanitizeSpecialIntegerValue(a)});this._encodedFrameRate=-1;r.defGet(this,
"encodedFrameRate",function(){return this._encodedFrameRate});r.defSet(this,"encodedFrameRate",function(a){this._encodedFrameRate=O.sanitizeSpecialIntegerValue(a)});(function(){}).apply(this,arguments);this.clone=function(){var a=new e;a.assetName=this.assetName;a.applicationName=this.applicationName;a.streamUrl=this.streamUrl;a.viewerId=this.viewerId;a.defaultBitrateKbps=this.defaultBitrateKbps;a.defaultResource=this.defaultResource;a.streamType=this.streamType;a.duration=this.duration;a.encodedFrameRate=
this.encodedFrameRate;for(var b in this.custom)a.custom[b]=this.custom[b];return a}};e.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var c=(a.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",
ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},a.Events={AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",
AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},a.SystemFactory=function(a,b){var c=this;(function(a,b){if(!(a instanceof C))throw Error("systemInterface parameter should be an instance of SystemInterface.");
this._systemInterface=a;this._timeInterface=this._systemInterface._timeInterface;this._timerInterface=this._systemInterface._timerInterface;this._httpInterface=this._systemInterface._httpInterface;this._storageInterface=this._systemInterface._storageInterface;this._metadataInterface=this._systemInterface._metadataInterface;this._loggingInterface=this._systemInterface._loggingInterface;b instanceof g?this._settings=b.clone():this._settings=new g}).apply(this,arguments);this.configure=function(a,b){this._packageName=
a;this._clientSettings=b};this.release=function(){this._systemInterface.release();this._logBuffer=this._settings=this._packageName=this._systemInterface=null};var d={build:function(){return new T(c._loggingInterface,c._timeInterface,c.getSettings(),c._logBuffer,c._packageName)}};this.buildLogger=function(){return d.build()};this.buildSessionFactory=function(a,b,c){return new G(a,b,c,this)};this.buildPing=function(){return new Z(this.buildLogger(),this.buildHttpClient(),this._clientSettings)};this.buildCallbackWithTimeout=
function(){return new R(this.buildTimer())};this.buildCallbackWithTimeoutNoPing=function(){var a=new y(this.buildLogger(),null,this.getSettings()),a=new aa(this.buildLogger(),this._timerInterface,a);return new R(a)};this.buildHttpClient=function(){return new P(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())};this.buildExceptionCatcher=function(){return new y(this.buildLogger(),this.buildPing(),this.getSettings())};this.buildTime=function(){return new Y(this._timeInterface,
this.buildLogger())};this.buildTimer=function(){return new aa(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())};this.buildStorage=function(){return new S(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())};this.buildConfig=function(){return new L(this.buildLogger(),this.buildStorage(),this.buildJsonInterface())};this.buildSystemMetadata=function(){return new K(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())};
this.buildCwsProtocol=function(){return new h};this.buildGatewayControl=function(a){return new z(a,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())};this.buildCwsSession=function(a,b,c){var d=this.buildGatewayControl(b);return new F(this.buildEventQueue(),a,b,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),d,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),c)};this.buildSession=function(a,b,c,d,e,n){var f=this.buildExceptionCatcher(),g=this.buildLogger();
a=this.buildCwsSession(a,b,c);return new p(d,e,n,c,this.buildSystemMetadata(),a,f,g)};this.buildEventQueue=function(){return new E};this.buildJsonInterface=function(){return new U};this.getLogBuffer=function(){return this._logBuffer};this.getSettings=function(){return this._settings};this._logBuffer=new $}),g=a.SystemSettings=function(){this._logLevel=g.defaultProductionLogLevel;r.defGet(this,"logLevel",function(){return this._logLevel});r.defSet(this,"logLevel",function(a){if("number"==typeof a){var b=
r.NumberToUnsignedInt(a);b===a&&b>=g.LogLevel.DEBUG&&b<=g.LogLevel.ERROR&&(this._logLevel=b)}});this._allowUncaughtExceptions=g.defaultProductionAllowUncaughtExceptions;r.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions});r.defSet(this,"allowUncaughtExceptions",function(a){r.isBoolean(a)&&(this._allowUncaughtExceptions=a)});this._storageTimeout=g.defaultStorageTimeout;r.defGet(this,"storageTimeout",function(){return this._storageTimeout});r.defSet(this,"storageTimeout",
function(a){if("number"==typeof a){var b=r.NumberToUnsignedInt(a);b===a&&(this._storageTimeout=b)}});this._httpTimeout=g.defaultHttpTimeout;r.defGet(this,"httpTimeout",function(){return this._httpTimeout});r.defSet(this,"httpTimeout",function(a){if("number"==typeof a){var b=r.NumberToUnsignedInt(a);b===a&&(this._httpTimeout=b)}});(function(){}).apply(this,arguments);this.equals=function(a){return this.logLevel===a.logLevel&&this.allowUncaughtExceptions===a.allowUncaughtExceptions&&this.storageTimeout===
a.storageTimeout&&this.httpTimeout===a.httpTimeout};this.clone=function(){var a=new g;return a.logLevel=this.logLevel,a.allowUncaughtExceptions=this.allowUncaughtExceptions,a.storageTimeout=this.storageTimeout,a.httpTimeout=this.httpTimeout,a}};g.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};g.defaultDevelopmentLogLevel=g.LogLevel.DEBUG;g.defaultProductionLogLevel=g.LogLevel.ERROR;g.defaultDevelopmentAllowUncaughtExceptions=!0;g.defaultProductionAllowUncaughtExceptions=!1;g.defaultStorageTimeout=
10;g.defaultHttpTimeout=10;var f=a.PlayerStateManager=function(b){var c=this;c._monitorNotifier=null;c._bitrateKbps=-2;c._playerState=f.PlayerState.UNKNOWN;c._currentMetadata={};c._renderedFrameRate=-2;c._encodedFrameRate=-2;c._duration=-2;c._playerVersion=null;c._playerType=null;c._streamUrl=null;c._moduleName=null;c._moduleVersion=null;c._width=-1;c._height=-1;c._connectionType=null;c._linkEncryption=null;c._lastError=null;c._pendingErrors=[];c._released=!1;this.release=function(){c._released||
c._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=c._monitorNotifier&&c._monitorNotifier.onRelease();c.removeMonitoringNotifier();c._systemFactory=null;c._logger=null;c._exceptionCatcher=null;c._released=!0})};this.setPlayheadTime=function(a){};this.setBufferLength=function(a){};this.setRenderedFrameRate=function(a){};this.getEncodedFrameRate=function(){return c._encodedFrameRate};this.setEncodedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",
function(){var b=O.sanitizeSpecialIntegerValue(a);-1<=b&&(c._encodedFrameRate=b,null!=c._monitorNotifier&&c._monitorNotifier.onEncodedFrameRateChange(c._encodedFrameRate))})};this.getDuration=function(){return c._duration};this.setClientMeasureInterface=function(b){r.validateInterface(b,new a.ClientMeasureInterface,"ClientMeasureInterface");this._playerInterface=b};this.getPHT=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getPHT?this._playerInterface.getPHT():-1};
this.getBufferLength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getBufferLength?this._playerInterface.getBufferLength():-1};this.getSignalStrength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getSignalStrength?this._playerInterface.getSignalStrength():f.DEFAULT_SIGNAL_STRENGTH};this.getRenderedFrameRate=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getRenderedFrameRate?this._playerInterface.getRenderedFrameRate():
f.DEFAULT_RENDERED_FRAME_RATE};this.setDuration=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){var b=O.sanitizeSpecialIntegerValue(a);-1<=b&&(c._duration=b,null!=c._monitorNotifier&&c._monitorNotifier.onContentLengthChange(c._duration))})};this.getStreamUrl=function(){return c._streamUrl};this.setStreamUrl=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){null!=a&&(c._streamUrl=a,null!=c._monitorNotifier&&
c._monitorNotifier.onStreamUrlChange(c._streamUrl))})};this.getModuleName=function(){return c._moduleName};this.getModuleVersion=function(){return c._moduleVersion};this.setModuleNameAndVersion=function(a,b){c._moduleName=a;c._moduleVersion=b};this.getPlayerType=function(){return c._playerType};this.setPlayerType=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){c._playerType=a;null!=c._monitorNotifier&&c._monitorNotifier.onPlayerTypeChange(c._playerType)})};
this.getPlayerVersion=function(){return c._playerVersion};this.setPlayerVersion=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){c._playerVersion=a;null!=c._monitorNotifier&&c._monitorNotifier.onPlayerVersionChange(c._playerVersion)})};this.setMonitoringNotifier=function(a,b){return c._released?void 0:null!=c._monitorNotifier?!1:(c._monitorNotifier=a,c._logger.setSessionId(b),!0)};this.removeMonitoringNotifier=function(){c._released||(c._monitorNotifier=
null,c._logger.setSessionId(null))};this.pushCurrentState=function(){c.setPlayerState(c.getPlayerState());c.setBitrateKbps(c.getBitrateKbps());c.setDuration(c.getDuration());c.setEncodedFrameRate(c.getEncodedFrameRate());c.setStreamUrl(c.getStreamUrl());c.setPlayerType(c.getPlayerType());c.setPlayerVersion(c.getPlayerVersion());for(var a=0;a<c._pendingErrors.length;a++)c.setError(c._pendingErrors[a]);c._pendingErrors=[]};this.getPlayerState=function(){return c._playerState};this.setPlayerState=function(a){c._released||
c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){f.isValidPlayerState(a)?(c._playerState=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerStateChange(c._playerState)):c._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+a)})};this.getBitrateKbps=function(){return c._bitrateKbps};this.setBitrateKbps=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var b=O.sanitizeSpecialIntegerValue(a);-1<=
b&&(c._bitrateKbps=b,null!=c._monitorNotifier&&c._monitorNotifier.onBitrateChange(c._bitrateKbps))})};this.setPlayerSeekStart=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekStart()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(f.SEEK_ACTIONS_TYPE.SEEK_START,a)})};this.setPlayerSeekEnd=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekEnd()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(f.SEEK_ACTIONS_TYPE.SEEK_END,
-1)})};this.setUserSeekButtonUp=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(f.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})};this.setUserSeekButtonDown=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(f.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})};this.setVideoResolutionWidth=
function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionWidth()",function(){var b=O.sanitizeSpecialIntegerValue(a);0<=b&&(c._width=b);null!=c._monitorNotifier&&c._monitorNotifier.onStreamResolutionWidthChange(c._width)})};this.setVideoResolutionHeight=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionHeight()",function(){var b=O.sanitizeSpecialIntegerValue(a);0<=b&&(c._height=b);null!=c._monitorNotifier&&c._monitorNotifier.onStreamResolutionHeightChange(c._height)})};
this.setConnectionType=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setConnectionType()",function(){c._connectionType=a;null!=c._monitorNotifier&&c._monitorNotifier.onConnectionTypeChange(c._connectionType)})};this.setLinkEncryption=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setLinkEncryption()",function(){c._linkEncryption=a;null!=c._monitorNotifier&&c._monitorNotifier.onLinkEncryptionChange(c._linkEncryption)})};this.setSignalStrength=
function(a){};this.setError=function(a){if(c._lastError=a,null!=c._monitorNotifier)c._monitorNotifier.onError(a.errorCode,a.severity);else c._pendingErrors.push(a)};this.sendError=function(a,b){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var d=new x.StreamerError(a,b);c.setError(d)})};this.reset=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){c._bitrateKbps=-2;c._playerState=f.PlayerState.UNKNOWN;c._currentMetadata=
{};c._renderedFrameRate=-1;c._encodedFrameRate=-1;c._duration=-1;c._playerVersion=null;c._playerType=null;c._streamUrl=null;c._lastError=null;c._pendingErrors=[]})};this.getError=function(){return c._lastError};(function(a){c._systemFactory=a;c._logger=c._systemFactory.buildLogger();c._logger.setModuleName("PlayerStateManager");c._exceptionCatcher=c._systemFactory.buildExceptionCatcher()}).apply(c,arguments);f.DEFAULT_SIGNAL_STRENGTH=1E3;f.DEFAULT_RENDERED_FRAME_RATE=-1};f.PlayerState={STOPPED:"STOPPED",
PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"};f.isValidPlayerState=function(a){return a===f.PlayerState.STOPPED||a===f.PlayerState.PLAYING||a===f.PlayerState.BUFFERING||a===f.PlayerState.PAUSED||a===f.PlayerState.UNKNOWN||a===f.PlayerState.NOT_MONITORED?!0:!1};f.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var q=(a.ClientMeasureInterface=function(){this.getPHT=function(){};this.getBufferLength=function(){};
this.getSignalStrength=function(){};this.getRenderedFrameRate=function(){}},a.HttpInterface=function(){this.makeRequest=function(a,b,c,d,e,f){};this.release=function(){}}),k=a.LoggingInterface=function(){this.consoleLog=function(a,b){};this.release=function(){}},M=a.MetadataInterface=function(){this.getBrowserName=function(){};this.getBrowserVersion=function(){};this.getDeviceBrand=function(){};this.getDeviceManufacturer=function(){};this.getDeviceModel=function(){};this.getDeviceType=function(){};
this.getDeviceVersion=function(){};this.getFrameworkName=function(){};this.getFrameworkVersion=function(){};this.getOperatingSystemName=function(){};this.getOperatingSystemVersion=function(){};this.release=function(){}},u=a.StorageInterface=function(){this.saveData=function(a,b,c,d){};this.loadData=function(a,b,c){};this.release=function(){}},C=a.SystemInterface=function(a,b,c,d,e,f){(function(a,b,c,d,e,n){r.validateInterface(a,new t,"TimeInterface");r.validateInterface(b,new H,"TimerInterface");
r.validateInterface(c,new q,"HttpInterface");r.validateInterface(d,new u,"StorageInterface");r.validateInterface(e,new M,"MetadataInterface");r.validateInterface(n,new k,"LoggingInterface");this._timeInterface=a;this._timerInterface=b;this._httpInterface=c;this._storageInterface=d;this._metadataInterface=e;this._loggingInterface=n}).apply(this,arguments);this.release=function(){this._timeInterface.release();this._timeInterface=null;this._timerInterface.release();this._timerInterface=null;this._httpInterface.release();
this._httpInterface=null;this._storageInterface.release();this._storageInterface=null;this._metadataInterface.release();this._metadataInterface=null;this._loggingInterface.release();this._loggingInterface=null}},t=a.TimeInterface=function(){this.getEpochTimeMs=function(){};this.release=function(){}},H=a.TimerInterface=function(){this.createTimer=function(a,b,c){};this.release=function(){}},J=x.JSON2={};!function(){function a(b){return 10>b?"0"+b:b}function b(a){return d.lastIndex=0,d.test(a)?'"'+
a.replace(d,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var n,g,k,p,q,t=e,r=d[a];switch(r&&"object"==typeof r&&"function"==typeof r.toJSON&&(r=r.toJSON(a)),"function"==typeof h&&(r=h.call(d,a,r)),typeof r){case "string":return b(r);case "number":return isFinite(r)?String(r):"null";case "boolean":case "null":return String(r);case "object":if(!r)return"null";if(e+=f,q=[],Object.prototype.toString.apply(r)===
Object.prototype.toString.apply([])){p=r.length;for(n=0;p>n;n+=1)q[n]=c(n,r)||"null";return k=0===q.length?"[]":e?"[\n"+e+q.join(",\n"+e)+"\n"+t+"]":"["+q.join(",")+"]",e=t,k}if(h&&"object"==typeof h)for(p=h.length,n=0;p>n;n+=1)"string"==typeof h[n]&&(g=h[n],k=c(g,r),k&&q.push(b(g)+(e?": ":":")+k));else for(g in r)Object.prototype.hasOwnProperty.call(r,g)&&(k=c(g,r),k&&q.push(b(g)+(e?": ":":")+k));return k=0===q.length?"{}":e?"{\n"+e+q.join(",\n"+e)+"\n"+t+"}":"{"+q.join(",")+"}",e=t,k}}"function"!=
typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,f,g,h;"function"!=typeof J.stringify&&(d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},J.stringify=function(a,b,d){var n;if(e="",f="","number"==typeof d)for(n=0;d>n;n+=1)f+=" ";else"string"==typeof d&&(f=d);if(h=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw Error("JSON2.stringify");return c("",{"":a})})}();var D=x.JsonParse=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c};
},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),b=c.charAt(a),a+=1,b},h=function(){var a,c="";for("-"===b&&(c="-",g("-"));"0"<=b&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&"0"<=b&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),"-"!==b&&"+"!==b||(c+=b,g());"0"<=b&&"9">=b;)c+=b,g();return a=+c,isNaN(a)?void f("Bad number"):a},k=function(){var a,c,d,n="";if('"'===b)for(;g();){if('"'===b)return g(),n;if("\\"===b)if(g(),"u"===b){for(c=d=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=
1)d=16*d+a;n+=String.fromCharCode(d)}else{if("string"!=typeof e[b])break;n+=e[b]}else n+=b}f("Bad string")},p=function(){for(;b&&" ">=b;)g()},q=function(){switch(b){case "t":return g("t"),g("r"),g("u"),g("e"),!0;case "f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case "n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")};return d=function(){switch(p(),b){case "{":var a;a:{var c={};if("{"===b){if(g("{"),p(),"}"===b){a=(g("}"),c);break a}for(;b;){if(a=k(),p(),g(":"),Object.hasOwnProperty.call(c,
a)&&f('Duplicate key "'+a+'"'),c[a]=d(),p(),"}"===b){a=(g("}"),c);break a}g(",");p()}}f("Bad object");a=void 0}return a;case "[":a:{a=[];if("["===b){if(g("["),p(),"]"===b){a=(g("]"),a);break a}for(;b;){if(a.push(d()),p(),"]"===b){a=(g("]"),a);break a}g(",");p()}}f("Bad array");a=void 0}return a;case '"':return k();case "-":return h();default:return"0"<=b&&"9">=b?h():q()}},function(e,g){var h;return c=e,a=0,b=" ",h=d(),p(),b&&f("Syntax error"),"function"==typeof g?function da(a,b){var c,d,e=a[b];if(e&&
"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=da(e,c),void 0!==d?e[c]=d:delete e[c]);return g.call(a,b,e)}({"":h},""):h}}(),h=x.CwsProtocol=function(){this.generateEvent=function(a,b,c,d){return d.seq=a,d.st=b,d.t=c,d};this.generateSessionEndEvent=function(a,b){return this.generateEvent(a,b,h.EVENT_TYPE_SESSION_END,{})}};h.version="2.4";h.gatewayPath="/0/wsg";h.DEFAULT_CLIENT_ID="0";h.DEFAULT_MAX_HEARTBEAT_INFOS=0;h.DEFAULT_PLAYHEAD_TIME=-1;h.DEFAULT_BUFFER_LENGTH=-1;h.DEFAULT_SIGNAL_STRENGTH=
1E3;h.SDK_METADATA_SCHEMA="sdk.js.1";h.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent";h.EVENT_TYPE_ERROR="CwsErrorEvent";h.EVENT_TYPE_SESSION_END="CwsSessionEndEvent";h.EVENT_TYPE_CUSTOM="CwsCustomEvent";h.EVENT_TYPE_SEEK="CwsSeekEvent";h.EVENT_TYPE_DATA_SAMPLE="CwsDataSamplesEvent";h.RESPONSE_STATUS_NO_ERRORS="ok";h.RESPONSE_KEY_STATUS="err";h.RESPONSE_KEY_CLIENT_ID="clid";h.RESPONSE_KEY_CONFIG="cfg";h.RESPONSE_KEY_EVENTS="evs";h.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos";h.RESPONSE_CONFIG_KEY_SEND_LOGS=
"slg";h.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi";h.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw";h.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb";h.REQUEST_KEY_MESSAGE_TYPE="t";h.REQUEST_KEY_SESSION_TIME="st";h.REQUEST_KEY_SESSION_START_TIME="sst";h.REQUEST_KEY_IS_LIVE="lv";h.REQUEST_KEY_SEQUENCE_NUMBER="seq";h.REQUEST_KEY_CUSTOMER_KEY="cid";h.REQUEST_KEY_CLIENT_ID="clid";h.REQUEST_KEY_CLIENT_VERSION="clv";h.REQUEST_KEY_PROTOCOL_VERSION="pver";h.REQUEST_KEY_INSTANCE_ID="iid";h.REQUEST_KEY_SESSION_ID="sid";
h.REQUEST_KEY_VIEWER_ID="vid";h.REQUEST_KEY_ASSET_NAME="an";h.REQUEST_KEY_PLAYER_NAME="pn";h.REQUEST_KEY_TAGS="tags";h.REQUEST_KEY_SESSION_FLAGS="sf";h.REQUEST_KEY_EVENTS="evs";h.REQUEST_KEY_LOGS="lg";h.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos";h.REQUEST_KEY_IS_SDK_CLIENT="sdk";h.REQUEST_KEY_PAUSE_JOIN="pj";h.REQUEST_KEY_PLAYER_STATE="ps";h.REQUEST_KEY_BITRATE="br";h.REQUEST_KEY_CONTENT_LENGTH="cl";h.REQUEST_KEY_ENCODED_FRAME_RATE="efps";h.REQUEST_KEY_AVERAGE_FRAME_RATE="afps";h.REQUEST_KEY_RFPS_TOTAL=
"rfpstot";h.REQUEST_KEY_RFPS_COUNT="rfpscnt";h.REQUEST_KEY_RESOURCE="rs";h.REQUEST_KEY_PLAYHEAD_TIME="pht";h.REQUEST_KEY_BUFFER_LENGTH="bl";h.REQUEST_KEY_STREAM_URL="url";h.REQUEST_KEY_CAPABILITIES="caps";h.REQUEST_KEY_PLATFORM_METADATA="pm";h.REQUEST_KEY_VIDEO_WIDTH="w";h.REQUEST_KEY_VIDEO_HEIGHT="h";h.REQUEST_KEY_CONNECTION_TYPE="ct";h.REQUEST_KEY_LINK_ENCRYPTION="le";h.REQUEST_KEY_SIGNAL_STRENGTH="ss";h.REQUEST_KEY_STREAM_METADATA_CHANGE="strmetadata";h.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch";
h.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br";h.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv";h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb";h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma";h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm";h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt";h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv";h.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw";h.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv";h.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION=
"cc";h.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME="mn";h.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION="mv";h.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="pt";h.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="ptv";h.REQUEST_KEY_PROTOCOL_CAPP="caps";h.REQUEST_EVENT_KEY_TYPE="t";h.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq";h.REQUEST_EVENT_KEY_SESSION_TIME="st";h.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act";h.REQUEST_EVENT_KEY_SEEK_TO_POS="skto";h.REQUEST_ERROR_EVENT_KEY_MESSAGE="err";h.REQUEST_ERROR_EVENT_KEY_FATAL=
"ft";h.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new";h.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old";h.REQUEST_CUSTOM_EVENT_KEY_NAME="name";h.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr";h.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq";h.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err";h.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt";h.REQUEST_KEY_IS_AD_SESSION="ad";h.convertPlayerState=function(a){switch(a){case f.PlayerState.STOPPED:return h.eStopped;case f.PlayerState.PLAYING:return h.ePlaying;case f.PlayerState.BUFFERING:return h.eBuffering;
case f.PlayerState.PAUSED:return h.ePaused;case f.PlayerState.NOT_MONITORED:return h.eNotMonitored;default:return h.eUnknown}};h.eStopped=1;h.ePlaying=3;h.eBuffering=6;h.ePaused=12;h.eNotMonitored=98;h.eUnknown=100;h.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4};h.Capabilities={INSIGHTS:0};var U=(x.JSONInterface=function(){this.encode=function(a){};this.decode=function(a){}},x.LibJSONInterface=function(){this.encode=function(a){var b=null;try{b=J.stringify(a)}catch(c){}return b};
this.decode=function(a){var b=null;try{b=D(a)}catch(c){}return r.isObject(b)||(b=null),b}}),Q=x.CwsHeartbeat=function(){this._data={};(function(){}).apply(this,arguments);this.get=function(){return this._data};this.setField=function(a,b){this._data[a]=b};this.setInnerField=function(a,b,c){this._data[a]||(this._data[a]={});this._data[a][b]=c};this.setMessageType=function(a){this.setField(h.REQUEST_KEY_MESSAGE_TYPE,a)};this.setSessionTime=function(a){this.setField(h.REQUEST_KEY_SESSION_TIME,a)};this.setSessionStartTime=
function(a){this.setField(h.REQUEST_KEY_SESSION_START_TIME,a)};this.setIsLive=function(a){this.setField(h.REQUEST_KEY_IS_LIVE,a)};this.setSequenceNumber=function(a){this.setField(h.REQUEST_KEY_SEQUENCE_NUMBER,a)};this.setCustomerKey=function(a){this.setField(h.REQUEST_KEY_CUSTOMER_KEY,a)};this.setClientId=function(a){this.setField(h.REQUEST_KEY_CLIENT_ID,a)};this.setClientVersion=function(a){this.setField(h.REQUEST_KEY_CLIENT_VERSION,a)};this.setProtocolVersion=function(a){this.setField(h.REQUEST_KEY_PROTOCOL_VERSION,
a)};this.setCapfield=function(a){this.setField(h.REQUEST_KEY_PROTOCOL_CAPP,a)};this.setSessionId=function(a){this.setField(h.REQUEST_KEY_SESSION_ID,a)};this.setInstanceId=function(a){this.setField(h.REQUEST_KEY_INSTANCE_ID,a)};this.setViewerId=function(a){this.setField(h.REQUEST_KEY_VIEWER_ID,a)};this.setAssetName=function(a){this.setField(h.REQUEST_KEY_ASSET_NAME,a)};this.setPlayerName=function(a){this.setField(h.REQUEST_KEY_PLAYER_NAME,a)};this.setTags=function(a){this.setField(h.REQUEST_KEY_TAGS,
a)};this.setSessionFlags=function(a){this.setField(h.REQUEST_KEY_SESSION_FLAGS,a)};this.setCapabilities=function(a){this.setField(h.REQUEST_KEY_CAPABILITIES,a)};this.setEvents=function(a){this.setField(h.REQUEST_KEY_EVENTS,a)};this.setIsSdkClient=function(a){this.setField(h.REQUEST_KEY_IS_SDK_CLIENT,a)};this.setLogs=function(a){this.setField(h.REQUEST_KEY_LOGS,a)};this.setHeartbeatInfos=function(a){this.setField(h.REQUEST_KEY_HEARTBEAT_INFOS,a)};this.setPlayerState=function(a){this.setField(h.REQUEST_KEY_PLAYER_STATE,
a)};this.setPauseJoin=function(a){this.setField(h.REQUEST_KEY_PAUSE_JOIN,a)};this.setContentLength=function(a){this.setField(h.REQUEST_KEY_CONTENT_LENGTH,a)};this.setBitrate=function(a){this.setField(h.REQUEST_KEY_BITRATE,a)};this.setResource=function(a){this.setField(h.REQUEST_KEY_RESOURCE,a)};this.setEncodedFrameRate=function(a){this.setField(h.REQUEST_KEY_ENCODED_FRAME_RATE,a)};this.setAverageFrameRate=function(a){this.setField(h.REQUEST_KEY_AVERAGE_FRAME_RATE,a)};this.setRfpsObservationCount=
function(a){this.setField(h.REQUEST_KEY_RFPS_COUNT,a)};this.setRfpsTotal=function(a){this.setField(h.REQUEST_KEY_RFPS_TOTAL,a)};this.setPlatformMetadataSchema=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,a)};this.setBrowserName=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,a)};this.setBrowserVersion=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,
a)};this.setDeviceBrand=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,a)};this.setDeviceManufacturer=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,a)};this.setDeviceModel=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,a)};this.setDeviceType=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,
a)};this.setDeviceVersion=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,a)};this.setFrameworkName=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a);this.setField(h.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a)};this.setFrameworkVersion=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,a);this.setField(h.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,
a)};this.setOperatingSystemName=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,a);this.setField(h.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,a)};this.setOperatingSystemVersion=function(a){this.setInnerField(h.REQUEST_KEY_PLATFORM_METADATA,h.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,a);this.setField(h.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,a)};this.setPlayheadTime=function(a){this.setField(h.REQUEST_KEY_PLAYHEAD_TIME,
a)};this.setBufferLength=function(a){this.setField(h.REQUEST_KEY_BUFFER_LENGTH,a)};this.setStreamUrl=function(a){this.setField(h.REQUEST_KEY_STREAM_URL,a)};this.setStreamWidth=function(a){this.setField(h.REQUEST_KEY_VIDEO_WIDTH,a)};this.setStreamHeight=function(a){this.setField(h.REQUEST_KEY_VIDEO_HEIGHT,a)};this.setConnectionType=function(a){this.setField(h.REQUEST_KEY_CONNECTION_TYPE,a)};this.setLinkEncryption=function(a){this.setField(h.REQUEST_KEY_LINK_ENCRYPTION,a)};this.setIsAdSession=function(){this.setField(h.REQUEST_KEY_IS_AD_SESSION,
!0)};this.setSignalStrength=function(a){this.setField(h.REQUEST_KEY_SIGNAL_STRENGTH,a)};this.setModuleName=function(a){this.setInnerField(h.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,h.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME,a)};this.setModuleVersion=function(a){this.setInnerField(h.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,h.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION,a)}},F=x.CwsSession=function(a,c,d,e,g,k,q,t,u,x,y){var m=this;m._heartbeatTimerCancel=null;m._startTimeMs=0;
m._heartbeatSequenceNumber=0;m._sessionFlags=h.SessionFlags.GLOBAL;m._capabilities=h.Capabilities.INSIGHTS;m._heartbeatInfos=[];m._lastRequestSentMs=-1;m._bitrateKbps=-2;m._resource=null;m._playerState=f.PlayerState.NOT_MONITORED;m._encodedFrameRate=-1;m._contentLengthSec=-1;m._streamUrl=null;m._width=-1;m._height=-1;m._playerStateManager=null;m._assetName=null;m._viewerId=null;m._playerName=null;m._isLive=null;m._tags={};m._browserName=null;m._browserVersion=null;m._deviceBrand=null;m._deviceManufacturer=
null;m._deviceModel=null;m._deviceType=null;m._deviceVersion=null;m._frameworkName=null;m._frameworkVersion=null;m._operatingSystemName=null;m._operatingSystemVersion=null;m._moduleName=null;m._moduleVersion=null;m._connectionType=null;m._linkEncryption=null;m._pauseJoin=!1;m._hasJoined=!1;m._cleanedUp=!1;m._willEndSoon=!1;m._rfpsTimerCancel=null;m._rfpsTimerInterval=1E3;m._playingFpsObservationCount=0;m._playingFpsTotal=0;(function(a,b,c,d,e,f,n,g,h,k,m){this._eventQueue=a;this._client=b;this._clientSettings=
c;this._logger=d;this._logger.setModuleName("CwsSession");this._exceptionCatcher=e;this._timer=f;this._gatewayControl=n;this._cwsProtocol=g;this._time=h;this._logBuffer=k;this._clientConfig=m}).apply(this,arguments);this.cleanup=function(){this._client=this._clientSettings=this._logger=this._exceptionCatcher=this._timer=this._gatewayControl=this._cwsProtocol=this._time=this._systemSettings=this._logBuffer=this._clientConfig=null;this._eventQueue.flush();this._eventQueue=null;this._cleanedUp=!0};this.start=
function(a){this._session=a;this._global=this._session._global;this._logger.setSessionId(this._session._id);this._startTimeMs=this._time.current();(this.isVideoSession()||this.isAdSession())&&(this._sessionFlags+=F.DEFAULT_VIDEO_SESSION_FLAGS)};this.willEndSoon=function(){this._willEndSoon=!0};this.initialize=function(){this._logger.debug("initialize()")};this.end=function(){(this.isVideoSession()||this.isAdSession())&&(this._logger.debug("end(): schedule the last hb before session cleanup"+m.sessionTypeTag()),
this.enqueueSessionEndEvent());this.cancelHeartbeatTimer();this.sendHeartbeat()};this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())};this.setBrowserName=function(a){m._logger.debug("setBrowserName(): "+a);var b=m._browserName;b!==a&&null!=a&&(m._logger.debug("Change browserName from "+b+" to "+a),m._browserName=a)};this.setBrowserVersion=function(a){m._logger.debug("setBrowserVersion(): "+a);var b=m._browserVersion;b!==a&&null!=a&&(m._logger.debug("Change browserVersion from "+
b+" to "+a),m._browserVersion=a)};this.setDeviceBrand=function(a){m._logger.debug("setDeviceBrand(): "+a);var b=m._deviceBrand;b!==a&&null!=a&&(m._logger.debug("Change deviceBrand from "+b+" to "+a),m._deviceBrand=a)};this.setDeviceManufacturer=function(a){m._logger.debug("setDeviceManufacturer(): "+a);var b=m._deviceManufacturer;b!==a&&null!=a&&(m._logger.debug("Change deviceManufacturer from "+b+" to "+a),m._deviceManufacturer=a)};this.setDeviceModel=function(a){m._logger.debug("setDeviceModel(): "+
a);var b=m._deviceModel;b!==a&&null!=a&&(m._logger.debug("Change deviceModel from "+b+" to "+a),m._deviceModel=a)};this.setDeviceType=function(a){m._logger.debug("setDeviceBrand(): "+a);var b=m._deviceType;b!==a&&null!=a&&(m._logger.debug("Change deviceType from "+b+" to "+a),m._deviceType=a)};this.setDeviceVersion=function(a){m._logger.debug("setDeviceVersion(): "+a);var b=m._deviceVersion;b!==a&&null!=a&&(m._logger.debug("Change deviceVersion from "+b+" to "+a),m._deviceVersion=a)};this.setOperatingSystemName=
function(a){m._logger.debug("setOperatingSystemName(): "+a);var b=m._operatingSystemName;b!==a&&null!=a&&(m._logger.debug("Change operatingSystemName from "+b+" to "+a),m._operatingSystemName=a)};this.setOperatingSystemVersion=function(a){m._logger.debug("setOperatingSystemVersion(): "+a);var b=m._operatingSystemVersion;b!==a&&null!=a&&(m._logger.debug("Change operatingSystemVersion from "+b+" to "+a),m._operatingSystemVersion=a)};this.getFrameworkName=function(){return m._frameworkName};this.setFrameworkName=
function(a){m._logger.debug("setFrameworkName(): "+a);var b=m._frameworkName;b!==a&&null!=a&&(m._logger.debug("Change frameworkName from "+b+" to "+a),m._frameworkName=a)};this.getFrameworkVersion=function(){return m._frameworkVersion};this.setFrameworkVersion=function(a){m._logger.debug("setFrameworkVersion(): "+a);var b=m._frameworkVersion;b!==a&&null!=a&&(m._logger.debug("Change frameworkVersion from "+b+" to "+a),m._frameworkVersion=a)};this.setStreamUrl=function(a){m._logger.debug("setStreamUrl(): "+
a);var b=m._streamUrl;b!==a&&null!=a&&(m._logger.debug("Change stream url from "+b+" to "+a),m._streamUrl=a)};this.setBitrateKbps=function(a){m._logger.debug("setBitrateKbps(): "+a);var b=m._bitrateKbps;b!==a&&-1<=a&&(m._logger.info("Change bitrate from "+b+" to "+a),m.enqueueBitrateChangeEvent(b,a),m._bitrateKbps=a)};this.setResource=function(a){m._logger.debug("setResource(): "+a);var b=m._resource;b!==a&&null!=a&&(m._logger.info("Change resource from "+b+" to "+a),m._resource=a)};this.setAssetName=
function(a){m._logger.debug("setAssetName(): "+a);m._assetName!==a&&null!=a&&(m._logger.info("Change assetName from "+m._assetName+" to "+a),m._assetName=a)};this.setIsLive=function(a){m._logger.debug("setIsLive(): "+a);var b=m._isLive;b!==a&&null!=a&&(m._logger.info("Change isLive from "+b+" to "+a),m._isLive=a)};this.setViewerId=function(a){m._logger.debug("setViewerId(): "+a);var b=m._viewerId;b!==a&&null!=a&&(m._logger.info("Change viewerId from "+b+" to "+a),m._viewerId=a)};this.setPlayerName=
function(a){m._logger.debug("setPlayerName(): "+a);var b=m._playerName;b!==a&&null!=a&&(m._logger.info("Change playerName from "+b+" to "+a),m._playerName=a)};this.setTags=function(a){m._logger.debug("setTags()");var b=m._tags;r.ObjectShallowEquals(b,a)||null==a||(m._logger.info("Change tags from "+r.ObjectToString(b)+" to "+r.ObjectToString(a)),m._tags=a)};this.setEncodedFrameRate=function(a){m._logger.debug("setEncodedFrameRate(): "+a);m._encodedFrameRate=a};this.setContentLength=function(a){m._logger.debug("setContentLength(): "+
a);m._contentLengthSec=a};this.setPlayerState=function(a){m._logger.debug("setPlayerState(): "+a);m._hasJoined||a!=f.PlayerState.PLAYING||(m.togglePauseJoin(!1),m._hasJoined=!0);var b=m._playerState;m._logger.info("setPlayerState(): changing player state from "+b+" to "+a);m.enqueuePlayerStateChangeEvent(b,a);m._playerState=a};this.setStreamResolutionWidth=function(a){m._logger.debug("setStreamResolutionWidth(): "+a);var b=m._width;b!==a&&-1<a&&(m._logger.debug("Change stream resolution width from "+
b+" to "+a),m.enqueueResolutionWidthChangeEvent(b,a),m._width=a)};this.setStreamResolutionHeight=function(a){m._logger.debug("setStreamResolutionHeight(): "+a);var b=m._height;b!==a&&-1<a&&(m._logger.debug("Change stream resolution height from "+b+" to "+a),m.enqueueResolutionHeightChangeEvent(b,a),m._height=a)};this.setConnectionType=function(a){m._logger.debug("setConnectionType(): "+a);var b=m._connectionType;b!==a&&null!=a&&(m._logger.debug("Change network connection type from "+b+" to "+a),m.enqueueConnectionTypeChangeEvent(b,
a),m._connectionType=a)};this.setLinkEncryption=function(a){m._logger.debug("setLinkEncryption(): "+a);var b=m._linkEncryption;b!==a&&null!=a&&(m._logger.debug("Change network link encryption from "+b+" to "+a),m.enqueueLinkEncryptionChangeEvent(b,a),m._linkEncryption=a)};this.togglePauseJoin=function(a){if(m._logger.debug("togglePauseJoin()"),m._pauseJoin===a)return void m._logger.debug("togglePauseJoin(): same value, ignoring");m.enqueuePauseJoinChangeEvent(m._pauseJoin,!m._pauseJoin);m._pauseJoin=
!m._pauseJoin};this.sendError=function(a,b){m.enqueueErrorEvent(a,b)};this.enqueueEvent=function(a,b){if(b[h.REQUEST_EVENT_KEY_TYPE]=a,b[h.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),b[h.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._playerStateManager){var c=O.Integer(this._playerStateManager.getPHT(),0,null,-1),d=O.Integer(this._playerStateManager.getBufferLength(),0,null,-1);0<=c&&(b[h.REQUEST_KEY_PLAYHEAD_TIME]=c);0<=d&&(b[h.REQUEST_KEY_BUFFER_LENGTH]=d)}this._eventQueue.enqueue(b)};
this.setPlayerStateManager=function(a){m._playerStateManager=a;null!=m._playerStateManager?m.startRfpsTimer():m.cancelRfpsTimer()};this.enqueueSessionEndEvent=function(){var a=this.getSessionTime(),b=this.getNextEventNumber(),a=this._cwsProtocol.generateSessionEndEvent(b,a);this._eventQueue.enqueue(a)};this.enqueueTagsChangeEvent=function(a,b){var c=null;0<r.dictCount(a)&&(c={},c[h.REQUEST_KEY_TAGS]=a);var d={};d[h.REQUEST_KEY_TAGS]=b;this.declareStateChange(d,c)};this.enqueueAssetNameChangeEvent=
function(a,b){var c={};c[h.REQUEST_KEY_ASSET_NAME]=b;this.declareStateChange(c,null)};this.enqueueErrorEvent=function(a,b){var c={};c[h.REQUEST_ERROR_EVENT_KEY_MESSAGE]=a;c[h.REQUEST_ERROR_EVENT_KEY_FATAL]=b;this.enqueueEvent(h.EVENT_TYPE_ERROR,c)};this.enqueueBitrateChangeEvent=function(a,b){if(!(-1>=a)){var c={},d={};d[h.REQUEST_KEY_BITRATE]=a;c[h.REQUEST_KEY_BITRATE]=b;this.declareStateChange(c,d)}};this.enqueueSeekEvent=function(a,b){var c={};c[h.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=a;0<=b&&(c[h.REQUEST_EVENT_KEY_SEEK_TO_POS]=
b);this.enqueueEvent(h.EVENT_TYPE_SEEK,c)};this.enqueueResourceChangeEvent=function(a,b){var c={},d={};null!==a&&(d[h.REQUEST_KEY_RESOURCE]=a);c[h.REQUEST_KEY_RESOURCE]=b;this.declareStateChange(c,d)};this.enqueueStreamUrlChangeEvent=function(a,b){var c={},d={};null!==a&&(d[h.REQUEST_KEY_STREAM_URL]=a);c[h.REQUEST_KEY_STREAM_URL]=b;this.declareStateChange(c,d)};this.enqueueResolutionWidthChangeEvent=function(a,b){var c={},d={};-1!==a&&(d[h.REQUEST_KEY_VIDEO_WIDTH]=a);c[h.REQUEST_KEY_VIDEO_WIDTH]=
b;this.declareStateChange(c,d)};this.enqueueResolutionHeightChangeEvent=function(a,b){var c={},d={};-1!==a&&(d[h.REQUEST_KEY_VIDEO_HEIGHT]=a);c[h.REQUEST_KEY_VIDEO_HEIGHT]=b;this.declareStateChange(c,d)};this.enqueueConnectionTypeChangeEvent=function(a,b){var c={},d={};null!==a&&(d[h.REQUEST_KEY_CONNECTION_TYPE]=a);c[h.REQUEST_KEY_CONNECTION_TYPE]=b;this.declareStateChange(c,d)};this.enqueueLinkEncryptionChangeEvent=function(a,b){var c={},d={};null!==a&&(d[h.REQUEST_KEY_LINK_ENCRYPTION]=a);c[h.REQUEST_KEY_LINK_ENCRYPTION]=
b;this.declareStateChange(c,d)};this.enqueuePauseJoinChangeEvent=function(a,b){var c={},d={};d[h.REQUEST_KEY_PAUSE_JOIN]=a;c[h.REQUEST_KEY_PAUSE_JOIN]=b;this.declareStateChange(c,d)};this.enqueuePlayerStateChangeEvent=function(a,b){var c={},d={};c[h.REQUEST_KEY_PLAYER_STATE]=h.convertPlayerState(b);d[h.REQUEST_KEY_PLAYER_STATE]=h.convertPlayerState(a);this.declareStateChange(c,d)};this.enqueueDataSamplesEvent=function(){this.enqueueEvent(h.EVENT_TYPE_DATA_SAMPLE,{})};this.declareStateChange=function(a,
b){var c={};c[h.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=a;null!=b&&0<r.dictCount(b)&&(c[h.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=b);this.enqueueEvent(h.EVENT_TYPE_STATE_CHANGE,c)};this.enqueueCustomEvent=function(a,b){var c={};c[h.REQUEST_CUSTOM_EVENT_KEY_NAME]=a;c[h.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=b;this.enqueueEvent(h.EVENT_TYPE_CUSTOM,c)};this.cancelHeartbeatTimer=function(){null!=m._heartbeatTimerCancel&&(m._heartbeatTimerCancel(),m._heartbeatTimerCancel=null)};this.resetHeartbeatTimer=function(){m.cancelHeartbeatTimer();
m._heartbeatTimerCancel=m._timer.create(m.sendHeartbeat,1E3*m._clientSettings.heartbeatInterval,"Session.sendHeartbeat")};this.cancelRfpsTimer=function(){null!=m._rfpsTimerCancel&&(m._rfpsTimerCancel(),m._rfpsTimerCancel=null)};this.startRfpsTimer=function(){m.cancelRfpsTimer();m._rfpsTimerCancel=m._timer.create(m.countRfps,m._rfpsTimerInterval,"Session.startRfpsTimer")};this.createHeartbeatInfo=function(){var a={err:"pending"};a.seq=m._heartbeatSequenceNumber-1;a.sentAt=m.getSessionTime();a.rtt=
-1;m._heartbeatInfos.push(a)};this.updateHeartbeatInfoOnFailure=function(a,b){for(var c=0;c<m._heartbeatInfos.length;c++){var d=m._heartbeatInfos[c];d.seq===a&&(d.rtt=m.getSessionTime()-d.sentAt,d.err=b)}};this.updateHeartbeatInfoOnSuccess=function(a){for(var b=0;b<m._heartbeatInfos.length;b++){var c=m._heartbeatInfos[b];c.seq===a&&(c.rtt=m.getSessionTime()-c.sentAt,c.err="ok")}};this.removeOutdatedHeartbeatInfos=function(){for(var a,b=m._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS),c=[],d=
0;d<m._heartbeatInfos.length;d++)a=m._heartbeatInfos[d],a=a.seq,a<m._heartbeatSequenceNumber-b&&c.push(d);b=[];for(d=0;d<m._heartbeatInfos.length;d++)0>c.indexOf(d)&&b.push(m._heartbeatInfos[d]);m._heartbeatInfos=b};this.compileHeartbeatInfos=function(){m.removeOutdatedHeartbeatInfos();for(var a=[],b=0;b<m._heartbeatInfos.length;b++){var c=m._heartbeatInfos[b],d={};d[h.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=c.seq;d[h.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=c.rtt;d[h.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=
c.err;a.push(d)}return a};this.makeHeartbeat=function(){var a=m._eventQueue.flush();if(m.isGlobalSession()&&0===a.length)return null;var c=new Q;if(c.setMessageType(h.MESSAGE_TYPE_SESSION_HEARTBEAT),c.setCustomerKey(m._clientSettings.customerKey),c.setClientId(m._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)),c.setSessionId(m._session._id),c.setSequenceNumber(m._heartbeatSequenceNumber),c.setProtocolVersion(h.version),c.setClientVersion(b.version),c.setInstanceId(m._client.getId()),c.setCapfield(0),null!=
m._connectionType&&c.setConnectionType(m._connectionType),null!=m._linkEncryption&&c.setLinkEncryption(m._linkEncryption),c.setPlatformMetadataSchema(h.SDK_METADATA_SCHEMA),null!=m._browserName&&c.setBrowserName(m._browserName),null!=m._browserVersion&&c.setBrowserVersion(m._browserVersion),null!=m._deviceBrand&&c.setDeviceBrand(m._deviceBrand),null!=m._deviceManufacturer&&c.setDeviceManufacturer(m._deviceManufacturer),null!=m._deviceModel&&c.setDeviceModel(m._deviceModel),null!=m._deviceType&&c.setDeviceType(m._deviceType),
null!=m._deviceVersion&&c.setDeviceVersion(m._deviceVersion),null!=m._frameworkName&&c.setFrameworkName(m._frameworkName),null!=m._frameworkVersion&&c.setFrameworkVersion(m._frameworkVersion),null!=m._operatingSystemName&&c.setOperatingSystemName(m._operatingSystemName),null!=m._operatingSystemVersion&&c.setOperatingSystemVersion(m._operatingSystemVersion),null!=m._playerStateManager&&(m._moduleName=m._playerStateManager.getModuleName(),null!=m._moduleName&&c.setModuleName(m._moduleName)),null!=m._playerStateManager&&
(m._moduleVersion=m._playerStateManager.getModuleVersion(),null!=m._moduleVersion&&c.setModuleVersion(m._moduleVersion)),null!=m._viewerId&&c.setViewerId(m._viewerId),0<r.dictCount(m._tags)&&c.setTags(m._tags),m.isVideoSession()||m.isAdSession()){m.isAdSession()&&c.setIsAdSession();null!=m._assetName&&c.setAssetName(m._assetName);c.setSessionFlags(m._sessionFlags);var d=h.convertPlayerState(m._playerState);c.setPlayerState(d);c.setPauseJoin(m._pauseJoin);null!=m._playerName&&c.setPlayerName(m._playerName);
null!=m._isLive&&c.setIsLive(m._isLive);0<m._contentLengthSec&&c.setContentLength(m._contentLengthSec);0<m._bitrateKbps&&c.setBitrate(m._bitrateKbps);null!==m._resource&&c.setResource(m._resource);0<m._encodedFrameRate&&c.setEncodedFrameRate(m._encodedFrameRate);var e,f,n;null!=m._playerStateManager&&(e=O.Integer(m._playerStateManager.getPHT(),0,null,-1),f=O.Integer(m._playerStateManager.getBufferLength(),0,null,-1),n=m._playerStateManager.getSignalStrength());0<=e&&c.setPlayheadTime(e);0<=f&&c.setBufferLength(f);
d=m.updateAverageFrameRate();0<=d&&c.setAverageFrameRate(d);0<m._playingFpsTotal&&c.setRfpsTotal(O.Integer(m._playingFpsTotal,0,null,-1));0<m._playingFpsObservationCount&&c.setRfpsObservationCount(O.Integer(m._playingFpsObservationCount,0,null,-1));0>=n&&c.setSignalStrength(n);null!=m._streamUrl&&c.setStreamUrl(m._streamUrl);0<m._width&&c.setStreamWidth(m._width);0<m._height&&c.setStreamHeight(m._height)}else c.setSessionFlags(h.SessionFlags.GLOBAL);if(0<a.length&&c.setEvents(a),c.setCapabilities(m._capabilities),
c.setIsSdkClient(!0),m._clientConfig.get(L.CONFIG_KEY_SEND_LOGS)&&c.setLogs(m._logBuffer.flush()),0<m._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS))a=m.compileHeartbeatInfos(),0<a.length&&c.setHeartbeatInfos(a);return c.setSessionStartTime(m._startTimeMs),c.setSessionTime(m.getSessionTime()),m._heartbeatSequenceNumber++,c.get()};this.sendHeartbeat=function(){if(!m._cleanedUp){var a=m.makeHeartbeat();null!=a&&m.postHeartbeat(a)}};this.countRfps=function(){if(m._playerState===f.PlayerState.PLAYING){var a=
m._playerStateManager.getRenderedFrameRate();0<=a&&(m._playingFpsTotal+=a,m._playingFpsObservationCount++)}};this.updateAverageFrameRate=function(){if(m._playerState===f.PlayerState.PLAYING){var a=m._playerStateManager.getRenderedFrameRate();if(0<=a)return m._playingFpsTotal+=a,m._playingFpsObservationCount++,r.Int32.Cast(1*m._playingFpsTotal/m._playingFpsObservationCount)}return-1};this.postHeartbeat=function(a){m.createHeartbeatInfo();var b=m._heartbeatSequenceNumber-1;m._logger.info("postHeartbeat(): Send HB["+
b+"]"+m.sessionTypeTag());m._gatewayControl.send(a,function(a,c){m.onHeartbeatResponse(a,c,b)})};this.onHeartbeatResponse=function(a,b,c){m._cleanedUp||m._exceptionCatcher.runProtected("onHeartbeatResponse",function(){if(a)if(null!=b){m._logger.debug("onHeartbeatResponse(): received valid response for HB["+c+"]");m.updateHeartbeatInfoOnSuccess(c);var d=b[h.RESPONSE_KEY_CLIENT_ID];null!=d&&d!=m._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)&&(m._logger.debug("onHeartbeatResponse(): setting the client id to "+
d+" (from gateway)"),m._clientConfig.set(L.CONFIG_KEY_CLIENT_ID,d),m._clientConfig.save());d=b[h.RESPONSE_KEY_STATUS];null!=d&&d!=h.RESPONSE_STATUS_NO_ERRORS&&m._logger.error("onHeartbeatResponse(): error from gateway: "+d);d=b[h.RESPONSE_KEY_CONFIG];if("object"==typeof d){var e=d[h.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=e&&m._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==e&&(m._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+e+" (from gateway)"),m._clientConfig.set(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS,
e));e=d[h.RESPONSE_CONFIG_KEY_SEND_LOGS];e=null!=e?r.AsBoolean(e):!1;e!==m._clientConfig.get(L.CONFIG_KEY_SEND_LOGS)&&(m._logger.debug("onHeartbeatResponse(): turning "+(e?"on":"off")+" sending of logs"),m._clientConfig.set(L.CONFIG_KEY_SEND_LOGS,e));e=d[h.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];null!=e&&(e=r.Int32.Cast(e),e!=m._clientSettings.heartbeatInterval&&(m._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+e),m._clientSettings.heartbeatInterval=e,null!=m._heartbeatTimerCancel&&
m.resetHeartbeatTimer()));d=d[h.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=d&&d!=m._clientSettings.gatewayUrl&&(m._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+d),m._clientSettings.gatewayUrl=d)}}else m._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.");else d=b,r.isValidString(d)?r.stringStartsWith(d,"HTTP timeout")?m._logger.warning("onHeartbeatResponse(): "+d):m._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+d):(d=p.DEFAULT_HEARTBEAT_ERROR_MESSAGE,
m._logger.error("onHeartbeatResponse(): "+d)),m.updateHeartbeatInfoOnFailure(c,d)})};this.getSessionTime=function(){return r.Int32.Cast(m._time.current()-m._startTimeMs)};this.getNextEventNumber=function(){return this._eventQueue.getNumber()};this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""};this.isGlobalSession=function(){return this._global==F.SESSION_TYPE.GLOBAL};this.isVideoSession=function(){return this._global==F.SESSION_TYPE.VIDEO};this.isAdSession=function(){return this._global==
F.SESSION_TYPE.AD}};F.DEFAULT_VIDEO_SESSION_FLAGS=h.SessionFlags.VIDEO+h.SessionFlags.QUALITY_METRICS+h.SessionFlags.BITRATE_METRICS;F.SESSION_TYPE={VIDEO:"Video",GLOBAL:"Global",AD:"Ad"};var p=(x.IMonitor=function(){this.onPlayerStateChange=function(a){};this.onBitrateChange=function(a){};this.onSeekEvent=function(a,b){};this.onEncodedFrameRateChange=function(a){};this.onRenderedFrameRateChange=function(a){};this.onContentLengthChange=function(a){};this.onPlayheadTimeChange=function(a){};this.onStreamUrlChange=
function(a){};this.onBufferLengthChange=function(a){};this.onPlayerTypeChange=function(a){};this.onPlayerVersionChange=function(a){};this.onStreamResolutionWidthChange=function(a){};this.onStreamResolutionHeightChange=function(a){};this.onConnectionTypeChange=function(a){};this.onLinkEncryptionChange=function(a){};this.onSignalStrengthChange=function(a){};this.onError=function(a,b){};this.onRelease=function(){}},x.Session=function(){var b=this;b._contentMetadata=null;b._playerStateManager=null;b._id=
0;b._global=F.SESSION_TYPE.VIDEO;b._cleaningUp=!1;b._cleanedUp=!1;b._adPlaying=!1;b._adStream=null;b._adPlayer=null;b._adPosition=null;b._ignorePlayerState=!1;b._pooledPlayerState=f.PlayerState.NOT_MONITORED;b._ignoreBitrateAndResource=!1;b._ignorePlayheadTimeandBufferLength=!1;b._ignoreEncodedFrameRateAndDuration=!1;b._ignoreError=!1;(function(a,b,c,d,e,f,g,h){this._id=a;this._global=b;this._contentMetadata=c;this._clientConfig=d;this._systemMetadata=e;this._cwsSession=f;this._exceptionCatcher=g;
this._logger=h;this._logger.setModuleName("Session");this._logger.setSessionId(r.ToString(this._id))}).apply(b,arguments);this.start=function(){(b.isVideoSession()||b.isAdSession()?b._logger.info("start(): assetName="+b._contentMetadata.assetName):b._logger.info("start()"+b.sessionTypeTag()),b._cwsSession.start(this),b._clientConfig.isReady())?b.initiateSession():b._clientConfig.register(function(){b.initiateSession()})};this.cleanup=function(){(b._logger.info("cleanup()"+b.sessionTypeTag()),b._cleaningUp=
!0,b._cwsSession.willEndSoon(),b._clientConfig.isReady())?b.endCwsSessionAndCleanupAll():b._clientConfig.register(function(){b.endCwsSessionAndCleanupAll()})};this.cleanupAll=function(){b._logger.debug("cleanupAll()"+b.sessionTypeTag());(b.isVideoSession()||b.isAdSession())&&null!=b._playerStateManager&&b.detachPlayer();b._contentMetadata=null;b._logger.setSessionId(null);b._logger=null;b._exceptionCatcher=null;b._client=null;b._clientConfig=null;b._systemMetadata=null;b._cwsSession.cleanup();b._cwsSession=
null;b._cleanedUp=!0};this.endCwsSessionAndCleanupAll=function(){b._cwsSession.end();b.cleanupAll()};this.initiateSession=function(){b._cwsSession.initialize();b.setStatesFromSystemMetadata();(b.isVideoSession()||b.isAdSession())&&(b.setStatesFromContentMetadata(),b.enqueueEventForContentMetadata());b._cwsSession.startSendingHeartbeats()};this.enqueueEventForContentMetadata=function(){var c={};if(null!=b._contentMetadata.assetName?c[h.REQUEST_KEY_ASSET_NAME]=b._contentMetadata.assetName:b._logger.warning("enqueueEventForContentMetadata(): assetName was not set."),
null!=b._contentMetadata.applicationName?("undefined"==typeof c[h.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(c[h.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),c[h.REQUEST_KEY_STREAM_METADATA_CHANGE][h.REQUEST_KEY_PLAYER_NAME]=b._contentMetadata.applicationName):b._logger.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=b._contentMetadata.streamUrl?c[h.REQUEST_KEY_STREAM_URL]=b._contentMetadata.streamUrl:b._logger.warning("enqueueEventForContentMetadata(): streamUrl was not set."),
null!=b._contentMetadata.viewerId?("undefined"==typeof c[h.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(c[h.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),c[h.REQUEST_KEY_STREAM_METADATA_CHANGE][h.REQUEST_KEY_VIEWER_ID]=b._contentMetadata.viewerId):b._logger.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=b._contentMetadata.defaultResource?c[h.REQUEST_KEY_RESOURCE]=b._contentMetadata.defaultResource:b._logger.warning("enqueueEventForContentMetadata(): defaultResource was not set."),-1<
b._contentMetadata.duration?c[h.REQUEST_KEY_CONTENT_LENGTH]=b._cwsSession._contentLengthSec:b._logger.warning("enqueueEventForContentMetadata(): duration was not set."),-1<b._contentMetadata.encodedFrameRate?c[h.REQUEST_KEY_ENCODED_FRAME_RATE]=b._contentMetadata.encodedFrameRate:b._logger.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),0<b._contentMetadata.defaultBitrateKbps?c[h.REQUEST_KEY_BITRATE]=b._contentMetadata.defaultBitrateKbps:b._logger.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),
b._contentMetadata.streamType!=e.StreamType.UNKNOWN?b._contentMetadata.streamType==a.ContentMetadata.StreamType.LIVE?c[h.REQUEST_KEY_IS_LIVE]=!0:c[h.REQUEST_KEY_IS_LIVE]=!1:b._logger.warning("enqueueEventForContentMetadata(): streamType was not set."),0<r.dictCount(b._contentMetadata.custom)){c[h.REQUEST_KEY_TAGS]={};for(var d in b._contentMetadata.custom)c[h.REQUEST_KEY_TAGS][d]=b._contentMetadata.custom[d]}else b._logger.warning("enqueueEventForContentMetadata(): custom tags were not set.");0<r.dictCount(c)&&
b._cwsSession.declareStateChange(c,null)};this.setStatesFromSystemMetadata=function(){b._logger.debug("setStatesFromSystemMetadata()");var a=b._systemMetadata.get(),c=a[K.BROWSER_NAME];null!=c&&b._cwsSession.setBrowserName(c);c=a[K.BROWSER_VERSION];null!=c&&b._cwsSession.setBrowserVersion(c);c=a[K.DEVICE_BRAND];null!=c&&b._cwsSession.setDeviceBrand(c);c=a[K.DEVICE_MANUFACTURER];null!=c&&b._cwsSession.setDeviceManufacturer(c);c=a[K.DEVICE_MODEL];null!=c&&b._cwsSession.setDeviceModel(c);c=a[K.DEVICE_TYPE];
null!=c&&b._cwsSession.setDeviceType(c);c=a[K.DEVICE_VERSION];null!=c&&b._cwsSession.setDeviceVersion(c);c=a[K.FRAMEWORK_NAME];null!=c&&b._cwsSession.setFrameworkName(c);c=a[K.FRAMEWORK_VERSION];null!=c&&b._cwsSession.setFrameworkVersion(c);c=a[K.OPERATING_SYSTEM_NAME];null!=c&&b._cwsSession.setOperatingSystemName(c);a=a[K.OPERATING_SYSTEM_VERSION];null!=a&&b._cwsSession.setOperatingSystemVersion(a)};this.setStatesFromContentMetadata=function(){(b._logger.debug("setStatesFromContentMetadata()"),null!=
b._contentMetadata.defaultResource&&b._cwsSession.setResource(b._contentMetadata.defaultResource),null!=b._contentMetadata.streamUrl&&b._cwsSession.setStreamUrl(b._contentMetadata.streamUrl),0<b._contentMetadata.duration&&b._cwsSession.setContentLength(b._contentMetadata.duration),0<b._contentMetadata.encodedFrameRate&&b._cwsSession.setEncodedFrameRate(b._contentMetadata.encodedFrameRate),b._contentMetadata.streamType!==e.StreamType.UNKNOWN)&&b._cwsSession.setIsLive(b._contentMetadata.streamType===
e.StreamType.LIVE);null!=b._contentMetadata.assetName&&b._cwsSession.setAssetName(b._contentMetadata.assetName);null!=b._contentMetadata.viewerId&&b._cwsSession.setViewerId(b._contentMetadata.viewerId);null!=b._contentMetadata.applicationName&&b._cwsSession.setPlayerName(b._contentMetadata.applicationName);0<r.dictCount(b._contentMetadata.custom)&&b._cwsSession.setTags(b._contentMetadata.custom)};this.onPlayerStateChange=function(a){return b._logger.debug("onPlayerStateChange(): "+a),b._cwsSession._playerState!=
a?(b._cwsSession._playerState==f.PlayerState.NOT_MONITORED&&a!=f.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=a),b._ignorePlayerState?void b._logger.debug("onPlayerStateChange(): "+a+" (pooled, "+(b._adPlaying?"ad playing":"preloading")+")"):void b._cwsSession.setPlayerState(a)):void 0};this.onBitrateChange=function(a){return b._logger.debug("onBitrateChange(): "+a),b._ignoreBitrateAndResource?void b._logger.info("onBitrateChange(): ignored"):void b._cwsSession.setBitrateKbps(a)};this.onSeekEvent=
function(a,c){null==c||r.isInteger(c)||(b._logger.error("onSeekEvent(): Ignored non-integer seekToPosition data: "+c),c=-1);b._cwsSession.enqueueSeekEvent(a,c)};this.onEncodedFrameRateChange=function(a){b._logger.debug("onEncodedFrameRateChange(): "+a);0<b._contentMetadata.encodedFrameRate||(0<a?b._ignoreEncodedFrameRateAndDuration?b._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+a+" (ads)"):(b._cwsSession.setEncodedFrameRate(a),b._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+
a)):b._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+a))};this.onContentLengthChange=function(a){b._logger.debug("onContentLengthChange(): "+a);0<b._contentMetadata.duration||(0<a?b._ignoreEncodedFrameRateAndDuration?b._logger.info("setContentLength(): Ignored content length data: "+a+" (ads)"):(b._cwsSession.setContentLength(a),b._logger.info("setContentLength(): Received content length data: "+a)):b._logger.warning("setContentLength(): Ignored invalid content length data: "+
a))};this.onStreamUrlChange=function(a){b._logger.debug("onStreamUrlChange(): "+a);null==b._contentMetadata.streamUrl&&b._cwsSession.setStreamUrl(a)};this.onStreamResolutionWidthChange=function(a){b._logger.debug("onStreamResolutionWidthChange(): "+a);b._cwsSession.setStreamResolutionWidth(a)};this.onStreamResolutionHeightChange=function(a){b._logger.debug("onStreamResolutionHeightChange(): "+a);b._cwsSession.setStreamResolutionHeight(a)};this.onConnectionTypeChange=function(a){b._logger.debug("onConnectionTypeChange(): "+
a);b._cwsSession.setConnectionType(a)};this.onLinkEncryptionChange=function(a){b._logger.debug("onLinkEncryptionChange(): "+a);b._cwsSession.setLinkEncryption(a)};this.onPlayerTypeChange=function(a){b._logger.debug("onPlayerTypeChange(): "+a);null==b._cwsSession.getFrameworkName()&&b._cwsSession.setFrameworkName(a)};this.onPlayerVersionChange=function(a){b._logger.debug("onPlayerVersionChange(): "+a);null==b._cwsSession.getFrameworkVersion()&&b._cwsSession.setFrameworkVersion(a)};this.onError=function(a,
c){b._logger.debug("onError(): "+a+" ("+c+")");b.reportError(a,c)};this.onRelease=function(){b._logger.debug("onRelease()");b.detachPlayer()};this.adStart=function(c,d,e){return b._logger.debug("adStart(): adStream="+c+" adPlayer="+d+" adPosition="+e),b._adPlaying?void b._logger.warning("adStart(): multiple adStart calls, ignoring"):(b._adPlaying=!0,b._adStream=c,b._adPlayer=d,b._adPosition=e,b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!0),void(b._adStream==a.Client.AdStream.CONTENT||
b._adPlayer==a.Client.AdPlayer.SEPARATE?(b._cwsSession._playerState!==f.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),b._cwsSession.setPlayerState(f.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0):b._adStream==a.Client.AdStream.SEPARATE&&b._adPlayer==a.Client.AdPlayer.CONTENT&&(b._cwsSession._playerState!==f.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),b._cwsSession.setPlayerState(f.PlayerState.NOT_MONITORED),b._ignorePlayerState=
!0,b._ignoreBitrateAndResource=!0,b._ignoreEncodedFrameRateAndDuration=!0,b._ignorePlayheadTimeandBufferLength=!0,b._ignoreError=!0)))};this.adEnd=function(){return b._logger.debug("adEnd()"),b._adPlaying?(b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!1),b._adStream==a.Client.AdStream.CONTENT||b._adPlayer==a.Client.AdPlayer.SEPARATE?b._preloading||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState)):b._adStream==a.Client.AdStream.SEPARATE&&b._adPlayer==a.Client.AdPlayer.CONTENT&&
(b._ignoreBitrateAndResource=!1,b._ignoreEncodedFrameRateAndDuration=!1,b._ignorePlayheadTimeandBufferLength=!1,b._ignoreError=!1,b._preloading||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState))),b._adPlaying=!1,void(b._adStream=b._adPlayer=b._adPosition=null)):void b._logger.debug("adEnd(): called before adStart, ignoring")};this.detachPlayer=function(){b._logger.debug("detachPlayer()");null!==b._playerStateManager&&(b._exceptionCatcher.runProtected("Session.detachPlayer",
function(){b._playerStateManager.removeMonitoringNotifier()}),b._playerStateManager=null,b._cwsSession.setPlayerStateManager(null),b._cwsSession.setPlayerState(f.PlayerState.NOT_MONITORED))};this.attachPlayer=function(a){return b._logger.debug("attachPlayer()"),null!=b._playerStateManager?void b._logger.error("attachPlayer(): detach current PlayerStateManager first"):void b._exceptionCatcher.runProtected("Session.attachPlayer()",function(){a.setMonitoringNotifier(b,b._id)?(a.pushCurrentState(),b._playerStateManager=
a,b._cwsSession.setPlayerStateManager(b._playerStateManager)):b._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})};this.getPlayerStateManager=function(){return b._logger.debug("getPlayerStateManager()"),b._playerStateManager};this.contentPreload=function(){return b._logger.debug("contentPreload()"),b._preloading?void b._logger.debug("contentPreload(): called twice, ignoring"):(b._preloading=!0,void(b._ignorePlayerState=!0))};this.contentStart=function(){return b._logger.debug("contentStart()"),
b._preloading?(b._preloading=!1,void(b._adPlaying||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState)))):void b._logger.warning("contentStart(): called without contentPreload, ignoring")};this.reportError=function(c,d){if(b._logger.info("reportError(): "+c),!r.isValidString(c))return void b._logger.error("reportError(): invalid error message string: "+c);if(d!==a.Client.ErrorSeverity.FATAL&&d!==a.Client.ErrorSeverity.WARNING)return void b._logger.error("reportError(): invalid error severity: "+
d);if(b._ignoreError)return void b._logger.debug("reportError(): ignored");b._cwsSession.sendError(c,d===a.Client.ErrorSeverity.FATAL)};this.updateContentMetadata=function(a){b._logger.debug("updateContentMetadata(): enter");b._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){b.mergeContentMetadata(a);b.setStatesFromContentMetadata()})};this.sendCustomEvent=function(a,c){b._logger.info("sendEvent(): eventName="+a+b.sessionTypeTag());b._cwsSession.enqueueCustomEvent(a,c)};this.mergeContentMetadata=
function(c){var d={},f={};if(r.isValidString(c.assetName)&&(b._contentMetadata.assetName!=c.assetName?(null!=b._contentMetadata.assetName&&(d[h.REQUEST_KEY_ASSET_NAME]=b._contentMetadata.assetName),f[h.REQUEST_KEY_ASSET_NAME]=c.assetName,b._contentMetadata.assetName=c.assetName):b._logger.warning("mergeContentMetadata(): assetName was not changed.")),r.isValidString(c.applicationName)&&(b._contentMetadata.applicationName!=c.applicationName?(null!=b._contentMetadata.applicationName&&("undefined"==
typeof d[h.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(d[h.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),d[h.REQUEST_KEY_STREAM_METADATA_CHANGE][h.REQUEST_KEY_PLAYER_NAME]=b._contentMetadata.applicationName),"undefined"==typeof f[h.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(f[h.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),f[h.REQUEST_KEY_STREAM_METADATA_CHANGE][h.REQUEST_KEY_PLAYER_NAME]=c.applicationName,b._contentMetadata.applicationName=c.applicationName):b._logger.warning("mergeContentMetadata(): applicationName was not changed.")),
r.isValidString(c.streamUrl)&&(b._contentMetadata.streamUrl!=c.streamUrl?(null!=b._contentMetadata.streamUrl&&(d[h.REQUEST_KEY_STREAM_URL]=b._contentMetadata.streamUrl),f[h.REQUEST_KEY_STREAM_URL]=c.streamUrl,b._contentMetadata.streamUrl=c.streamUrl):b._logger.warning("mergeContentMetadata(): streamUrl was not changed.")),r.isValidString(c.viewerId)&&(b._contentMetadata.viewerId!=c.viewerId?(null!=b._contentMetadata.viewerId&&("undefined"==typeof d[h.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(d[h.REQUEST_KEY_STREAM_METADATA_CHANGE]=
{}),d[h.REQUEST_KEY_STREAM_METADATA_CHANGE][h.REQUEST_KEY_VIEWER_ID]=b._contentMetadata.viewerId),"undefined"==typeof f[h.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(f[h.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),f[h.REQUEST_KEY_STREAM_METADATA_CHANGE][h.REQUEST_KEY_VIEWER_ID]=c.viewerId,b._contentMetadata.viewerId=c.viewerId):b._logger.warning("mergeContentMetadata(): viewerId was not changed.")),r.isValidString(c.defaultResource)&&(b._contentMetadata.defaultResource!=c.defaultResource?(null!=b._contentMetadata.defaultResource&&
(d[h.REQUEST_KEY_RESOURCE]=b._contentMetadata.defaultResource),f[h.REQUEST_KEY_RESOURCE]=c.defaultResource,b._contentMetadata.defaultResource=c.defaultResource):b._logger.warning("mergeContentMetadata(): defaultResource was not changed.")),r.isInteger(c.duration)&&0<c.duration&&(b._contentMetadata.duration!=c.duration?(0<b._cwsSession._contentLengthSec&&(d[h.REQUEST_KEY_CONTENT_LENGTH]=b._cwsSession._contentLengthSec),f[h.REQUEST_KEY_CONTENT_LENGTH]=c.duration,b._contentMetadata.duration=c.duration):
b._logger.warning("mergeContentMetadata(): duration was not changed.")),r.isInteger(c.encodedFrameRate)&&0<c.encodedFrameRate&&(b._contentMetadata.encodedFrameRate!=c.encodedFrameRate?(-1<b._contentMetadata.encodedFrameRate&&(d[h.REQUEST_KEY_ENCODED_FRAME_RATE]=b._contentMetadata.encodedFrameRate),f[h.REQUEST_KEY_ENCODED_FRAME_RATE]=c.encodedFrameRate,b._contentMetadata.encodedFrameRate=c.encodedFrameRate):b._logger.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),c.streamType!=
e.StreamType.UNKNOWN&&(b._contentMetadata.streamType!=c.streamType?(b._contentMetadata.streamType!=e.StreamType.UNKNOWN&&(b._contentMetadata.streamType==a.ContentMetadata.StreamType.LIVE?d[h.REQUEST_KEY_IS_LIVE]=!0:d[h.REQUEST_KEY_IS_LIVE]=!1),c.streamType==a.ContentMetadata.StreamType.LIVE?f[h.REQUEST_KEY_IS_LIVE]=!0:f[h.REQUEST_KEY_IS_LIVE]=!1,b._contentMetadata.streamType=c.streamType):b._logger.warning("mergeContentMetadata(): streamType was not changed.")),0<r.dictCount(c.custom)){var g={},k=
{},p;for(p in c.custom)b._contentMetadata.custom[p]!=c.custom[p]?(g[p]=c.custom[p],b._contentMetadata.custom[p]&&(k[p]=b._contentMetadata.custom[p]),b._contentMetadata.custom[p]=c.custom[p]):b._logger.info("mergeContentMetadata(): custom."+p+" was not changed.");0<r.dictCount(g)?(0<r.dictCount(k)&&(d[h.REQUEST_KEY_TAGS]=k),f[h.REQUEST_KEY_TAGS]=g):b._logger.warning("mergeContentMetadata(): custom was not changed.")}0<r.dictCount(f)&&b._cwsSession.declareStateChange(f,d)};this.isGlobalSession=function(){return b._global==
F.SESSION_TYPE.GLOBAL};this.isVideoSession=function(){return b._global==F.SESSION_TYPE.VIDEO};this.isAdSession=function(){return b._global==F.SESSION_TYPE.AD};this.sessionTypeTag=function(){return b.isGlobalSession()?" (global session)":""}});p.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var G=x.SessionFactory=function(){var a=this;a._logger=null;a._logBuffer=null;a._nextSessionKey=0;a._sessionsByKey=null;(function(b,c,d,e){a._client=b;a._clientSettings=
c;a._clientConfig=d;a._systemFactory=e;a._logger=a._systemFactory.buildLogger();a._logger.setModuleName("SessionFactory");a._nextSessionKey=0;a._sessionsByKey={}}).apply(a,arguments);this.cleanup=function(){a._logger=null;a._logBuffer=null;for(var b in a._sessionsByKey)a._sessionsByKey[b].cleanup();a._sessionsByKey=null;a._nextSessionKey=0};this.newSessionKey=function(){var b=a._nextSessionKey;return a._nextSessionKey++,b};this.makeVideoSession=function(b,c){return null==b&&(b=new e),a.makeSession(b,
c)};this.makeGlobalSession=function(b){return a.makeSession(b,F.SESSION_TYPE.GLOBAL)};this.generateSessionId=function(){return V.integer32()};this.makeSession=function(b,c){var d=b.clone(),e=a.generateSessionId(),d=a._systemFactory.buildSession(a._client,a._clientSettings,a._clientConfig,e,c,d),e=a.newSessionKey();return a.addSession(e,d),d.start(),e};this.getSession=function(b){b=a._sessionsByKey[b];return null==b&&a._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),
b};this.getVideoSession=function(b){b=this.getSession(b);return null!=b&&(b.isVideoSession()||b.isAdSession()||(a._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),b=null)),b};this.addSession=function(b,c){a._sessionsByKey[b]=c};this.removeSession=function(b){delete a._sessionsByKey[b]};this.cleanupSession=function(b){var c=a.getSession(b);a.removeSession(b);c.cleanup()}},R=x.CallbackWithTimeout=function(a){this._timer=a;this.getWrapperCallback=function(a,b,c){var d=
!1;this._timer.createOnce(function(){d||(d=!0,a(!1,c+" ("+b+" ms)"))},b,"CallbackWithTimeout.wrap");return function(b,c){d||(d=!0,a(b,c))}}},L=x.Config=function(a,b,c){var d=this;this._logger=a;this._logger.setModuleName("Config");this._storage=b;this._jsonInterface=c;this._defaultConfig={clientId:h.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:h.DEFAULT_MAX_HEARTBEAT_INFOS};this._config=r.ObjectShallowCopy(this._defaultConfig);this._loadedEmpty=this._loaded=!1;this._waitingConsumers=[];this.isReady=function(){return this._loaded};
this.load=function(){this._storage.load(L.STORAGE_KEY,function(a,b){a?(d._parse(b),d._logger.debug("load(): configuration successfully loaded from local storage"+(d._loadedEmpty?" (was empty)":"")+".")):d._logger.error("load(): error loading configuration from local storage: "+b);d._loaded=!0;d._notify()})};this._parse=function(a){a=this._jsonInterface.decode(a);if(null==a)return void(this._loadedEmpty=!0);a=a[L.CONFIG_STORAGE_KEY_CLIENT_ID];null!=a&&a!=h.DEFAULT_CLIENT_ID&&""!=a&&"null"!=a&&(this._config[L.CONFIG_KEY_CLIENT_ID]=
a,this._logger.debug("parse(): loaded clientId="+a+" (from local storage)"))};this._marshall=function(){var a={};return a[L.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(a)};this.save=function(){this._storage.save(L.STORAGE_KEY,this._marshall(),function(a,b){a?d._logger.debug("save(): configuration successfully saved to local storage."):d._logger.error("save(): error saving configuration to local storage: "+
b)})};this.register=function(a){return this.isReady()?void a():void this._waitingConsumers.push(a)};this.get=function(a){return this._loaded?this._config[a]:null};this.set=function(a,b){this._loaded&&(this._config[a]=b)};this._notify=function(){for(var a;null!=(a=this._waitingConsumers.shift());)a()}};L.STORAGE_KEY="sdkConfig";L.CONFIG_STORAGE_KEY_CLIENT_ID="clId";L.CONFIG_KEY_CLIENT_ID="clientId";L.CONFIG_KEY_SEND_LOGS="sendLogs";L.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var E=x.EventQueue=function(){this._events=
[];this._nextEventNumber=0;this.enqueue=function(a){this._events.push(a)};this.getNumber=function(){var a=this._nextEventNumber;return this._nextEventNumber++,a};this.flush=function(){var a=this._events;return this._events=[],a}},y=x.ExceptionCatcher=function(a,b,c){this._logger=a;this._logger.setModuleName("ExceptionCatcher");this._ping=b;this._systemSettings=c;this.runProtected=function(a,b,c){try{b()}catch(d){if(null!=c)c(d);else{if(this._systemSettings.allowUncaughtExceptions)throw d;this.onUncaughtException(a,
d)}}};this.onUncaughtException=function(a,b){var c="Uncaught exception: "+a+": "+b.toString();if(null!=this._ping)try{this._ping.send(c)}catch(d){this._logger.error("Caught exception while sending ping: "+d.toString())}this._logger.error(c)}},z=x.GatewayControl=function(a,b,c,d){var e=this;this._clientSettings=a;this._logger=b;this._logger.setModuleName("GatewayControl");this._httpClient=c;this._jsonInterface=d;this.send=function(a,b){var c=this._jsonInterface.encode(a);this._httpClient.request("POST",
this._clientSettings.gatewayUrl+h.gatewayPath,c,"application/json",function(a,c){if(a){var d=e._jsonInterface.decode(c);b(a,d)}else b(a,c)})}},r=x.Lang={};r.isMeaningfulString=function(a){return r.isValidString(a)&&null!=a&&"undefined"!=a&&"null"!=a};r.sanitizeStringToStringObject=function(a){var b={},c;for(c in a)if(r.isMeaningfulString(c)){var d=a[c];r.isMeaningfulString(d)&&(b[c]=d)}return b};r.validateInterface=function(a,b,c){if(null==a)throw Error("Expected "+c+" implementation is null.");for(var d in b)if("function"!=
typeof a[d])throw Error("Expected method "+d+" in "+c+" implementation.");};r.dictCount=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c};r.ToString=function(a){return""+a};r.NumberToInt=function(a){return Math.floor(a)};r.NumberToUnsignedInt=function(a){return Math.abs(r.NumberToInt(a))};r.AsBoolean=function(a){return Boolean(a)};r.isValidString=function(a){return"string"==typeof a&&""!==a};r.stringStartsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b?!1:"function"==
typeof a.indexOf?0===a.indexOf(b):!1};r.isBoolean=function(a){return"boolean"==typeof a};r.UrlEncodeString=function(a){return escape(a)};r.isObject=function(a){return"object"==typeof a};r.ObjectToString=function(a){var b="",c;for(c in a)b+=c+"="+a[c];return"Object{"+b+"}"};r.ObjectShallowCopyOmitNull=function(a){a=r.ObjectShallowCopy(a);for(var b in a)null==a[b]&&delete a[b];return a};r.ObjectShallowCopy=function(a){var b={},c;for(c in a)b[c]=a[c];return b};r.ObjectShallowEquals=function(a,b){if(typeof a!=
typeof b)return!1;if(a instanceof Object&&b instanceof Object){if(r.dictCount(a)!==r.dictCount(b))return!1;var c=!0,d;for(d in a)if(c=a[d]===b[d],!c)return!1;return!0}return a===b};r.isInteger=function(a){return"number"!=typeof a?!1:Math.round(a)===a};r.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};r.ArrayEquals=function(a,b){if(a===b)return!0;if(null==a||null==b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(r.isArray(a[c])&&r.isArray(b[c])){if(!r.ArrayEquals(a[c],
b[c]))return!1}else if(a[c]!==b[c])return!1;return!0};r.isObjectDefinePropertyPresent=function(){var a;if(a="undefined"!=typeof Object.defineProperty)try{a=(Object.defineProperty({},"x",{}),!0)}catch(b){a=!1}return a};r.defGet=function(a,b,c){if(r.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c});else{if("undefined"==typeof a.__defineGetter__)throw Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");a.__defineGetter__(b,
c)}};r.defSet=function(a,b,c){if(r.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,set:c});else{if("undefined"==typeof a.__defineSetter__)throw Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");a.__defineSetter__(b,c)}};(function(){var a={two32:4294967296};a.MaxValue=a.two32-1;a.MinValue=0;r.UInt32=a;r.UInt32.Cast=function(b){b=parseInt(b,10);return b>a.MaxValue?b%=a.two32:b<a.MinValue&&(b=-b%a.two32,b=a.two32-b),b};r.UInt32.InRange=
function(b){b=parseInt(b,10);return b<=a.MaxValue&&b>=a.MinValue};var b={MaxValue:2147483647,MinValue:-2147483648};r.Int32=b;r.Int32.Cast=function(a){a=parseInt(a,10);return a>b.MaxValue?a%=b.MaxValue:a<b.MinValue&&(a=-a%b.MaxValue,a=b.MaxValue-a),a};r.Int32.InRange=function(a){a=parseInt(a,10);return a<=b.MaxValue&&a>=b.MinValue}})();var $=x.LogBuffer=function(){this._buffer=[];this.add=function(a){32<=this._buffer.length&&this._buffer.shift();this._buffer.push(a)};this.flush=function(){var a=this._buffer;
return this._buffer=[],a}},Z=x.Ping=function(a,c,d){this._isSendingPing=!1;this._cachedBasePingUrl=null;this._logger=a;this._logger.setModuleName("Ping");this._httpClient=c;this._clientSettings=d;this.send=function(a){this._isSendingPing||(this._isSendingPing=!0,a=this.getBasePingUrl()+"&d="+r.UrlEncodeString(a.toString()),this._logger.error("send(): "+a),this._httpClient.request("GET",a,null,null,null),this._isSendingPing=!1)};this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var a=Z.SERVICE_URL+
"?comp="+Z.COMPONENT_NAME+"&clv="+b.version;if(this._clientSettings&&(a+="&cid="+this._clientSettings.customerKey),a+="&sch="+h.SDK_METADATA_SCHEMA,!this._clientSettings)return a;this._cachedBasePingUrl=a}return this._cachedBasePingUrl}};Z.COMPONENT_NAME="sdkjs";Z.SERVICE_URL="https://pings.conviva.com/ping.ping";var V=x.Random={};V.maxUInt32=4294967295;V.maxInt32=2147483647;V.minInt32=-2147483648;V.integer32=function(){return Math.floor(Math.random()*V.maxUInt32)+V.minInt32};V.uinteger32=function(){return Math.floor(Math.random()*
V.maxUInt32)};var O=x.Sanitize={};O.Integer=function(a,b,c,d){if(isNaN(a)||"number"!=typeof a||a==d)return d;a=r.NumberToInt(a);return O.EnforceBoundaries(a,b,c)};O.EnforceBoundaries=function(a,b,c){return null!=c&&a>c?a=c:null!=b&&b>a&&(a=b),a};O.sanitizeSpecialIntegerValue=function(a){return-1==a||-2==a?a:O.Integer(a,0,null,-1)};var P=(x.StreamerError=function(){var a=this;a.errorCode=null;a.severity=b.ErrorSeverity.FATAL;(function(b,c){a.errorCode=b;a.severity=c}).apply(a,arguments)},x.HttpClient=
function(a,b,c,d){this._logger=a;this._logger.setModuleName("HttpClient");this._httpInterface=b;this._callbackWithTimeout=c;this._systemSettings=d;this.request=function(a,b,c,d,e){var f=1E3*this._systemSettings.httpTimeout;e=this._callbackWithTimeout.getWrapperCallback(e,f,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest");this._httpInterface.makeRequest(a,b,c,d,f,e)}}),T=x.Logger=function(a,b,c,d,e){this._loggingInterface=a;this._timeInterface=b;this._settings=c;this._logBuffer=
d;this._packageName=e;this.debug=function(a){this.log(a,g.LogLevel.DEBUG)};this.info=function(a){this.log(a,g.LogLevel.INFO)};this.warning=function(a){this.log(a,g.LogLevel.WARNING)};this.error=function(a){this.log(a,g.LogLevel.ERROR)};this.log=function(a,b){var c=this.formatMessage(a,b);this._logBuffer.add(c);this._settings.logLevel<=b&&this._loggingInterface.consoleLog(c,b)};this.prependModuleName=function(a){return"["+this._moduleName+"] "+a};this.prependPackageName=function(a){return"["+this._packageName+
"] "+a};this.prependConvivaNamespace=function(a){return"[Conviva] "+a};this.prependTime=function(a){return"["+(this._timeInterface.getEpochTimeMs()/1E3).toFixed(3).toString()+"] "+a};this.prependLogLevel=function(a,b){return"["+T.getLogLevelString(b)+"] "+a};this.prependSessionId=function(a){return null!=this._sessionId&&(a="sid="+this._sessionId+" "+a),a};this.setSessionId=function(a){this._sessionId=a};this.setModuleName=function(a){this._moduleName=a};this.formatMessage=function(a,b){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(a))),
b)))}};T.getLogLevelString=function(a){var b;switch(a){case g.LogLevel.ERROR:b="ERROR";break;case g.LogLevel.WARNING:b="WARNING";break;case g.LogLevel.INFO:b="INFO";break;case g.LogLevel.DEBUG:b="DEBUG"}return b};var S=x.Storage=function(a,b,c,d){this._logger=a;this._logger.setModuleName("Storage");this._storageInterface=b;this._callbackWithTimeout=c;this._systemSettings=d;this.load=function(a,b){var c=this._callbackWithTimeout.getWrapperCallback(b,1E3*this._systemSettings.storageTimeout,"storage load timeout");
this._logger.debug("load(): calling StorageInterface.loadData");this._storageInterface.loadData(S.STORAGE_SPACE,a,c)};this.save=function(a,b,c){c=this._callbackWithTimeout.getWrapperCallback(c,1E3*this._systemSettings.storageTimeout,"storage save timeout");this._logger.debug("save(): calling StorageInterface.saveData");this._storageInterface.saveData(S.STORAGE_SPACE,a,b,c)}};S.STORAGE_SPACE="Conviva";var K=x.SystemMetadata=function(a,c,d){this._logger=a;this._logger.setModuleName("SystemMetadata");
this._metadataInterface=c;this._exceptionCatcher=d;this._cachedMetadata=null;this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata};this.retrieve=function(){function a(b,c){d._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+b,function(){c[b]=c[b].call(d._metadataInterface)})}var c={};c[K.BROWSER_NAME]=this._metadataInterface.getBrowserName;c[K.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion;c[K.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand;
c[K.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer;c[K.DEVICE_MODEL]=this._metadataInterface.getDeviceModel;c[K.DEVICE_TYPE]=this._metadataInterface.getDeviceType;c[K.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion;c[K.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName;c[K.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion;c[K.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName;c[K.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion;
var d=this;this._logger.debug("retrieve(): calling MetadataInterface methods");for(var e in c)a(e,c),r.isValidString(c[e])||delete c[e];c[K.DEVICE_TYPE]!==b.DeviceType.DESKTOP&&c[K.DEVICE_TYPE]!==b.DeviceType.CONSOLE&&c[K.DEVICE_TYPE]!==b.DeviceType.SETTOP&&c[K.DEVICE_TYPE]!==b.DeviceType.MOBILE&&c[K.DEVICE_TYPE]!==b.DeviceType.TABLET&&c[K.DEVICE_TYPE]!==b.DeviceType.SMARTTV&&delete c[K.DEVICE_TYPE];this._cachedMetadata=r.ObjectShallowCopyOmitNull(c)}};K.BROWSER_NAME="browserName";K.BROWSER_VERSION=
"browserVersion";K.DEVICE_BRAND="deviceBrand";K.DEVICE_MANUFACTURER="deviceManufacturer";K.DEVICE_MODEL="deviceModel";K.DEVICE_TYPE="deviceType";K.DEVICE_VERSION="deviceVersion";K.FRAMEWORK_NAME="frameworkName";K.FRAMEWORK_VERSION="frameworkVersion";K.OPERATING_SYSTEM_NAME="operatingSystemName";K.OPERATING_SYSTEM_VERSION="operatingSystemVersion";var Y=x.Time=function(a,b){this._timeInterface=a;this._logger=b;this._logger.setModuleName("Time");this.current=function(){var a=this._timeInterface.getEpochTimeMs();
return r.isInteger(a)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+a+")"),a}},aa=x.Timer=function(a,b,c){var d=this;this._logger=a;this._logger.setModuleName("Timer");this._timerInterface=b;this._exceptionCatcher=c;this.create=function(a,b,c){return this.createTimer(function(){d._exceptionCatcher.runProtected(c,function(){a()})},b,c)};this.createOnce=function(a,b,c){var e={cancel:null};b=this.createTimer(function(){d._exceptionCatcher.runProtected(c,
function(){e&&"function"==typeof e.cancel&&(e.cancel(),e.cancel=null,e=null);a()})},b,c);return e.cancel=b,b};this.createTimer=function(a,b,c){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(a,b,c)}}}()}(),a});
var WSJVideoConviva={Html5Time:function(){(function(){}).apply(this,arguments);this.getEpochTimeMs=function(){return(new Date).getTime()};this.release=function(){}},Html5Http:function(){(function(){}).apply(this,arguments);this.makeRequest=function(a,x,b,d,e,c){return this.makeRequestStandard.apply(this,arguments)};this.makeRequestStandard=function(a,x,b,d,e,c){var g=new XMLHttpRequest;g.open(a,x,!0);d&&g.overrideMimeType&&(g.overrideMimeType=d);d&&g.setRequestHeader&&g.setRequestHeader("Content-Type",
d);0<e&&(g.timeout=e,g.ontimeout=function(){g.ontimeout=g.onreadystatechange=null;c&&c(!1,"timeout after "+e+" ms")});g.onreadystatechange=function(){4===g.readyState&&(g.ontimeout=g.onreadystatechange=null,200==g.status?c&&c(!0,g.responseText):c&&c(!1,"http status "+g.status))};g.send(b);return null};this.release=function(){}},Html5Timer:function(){(function(){}).apply(this,arguments);this.createTimer=function(a,x,b){var d=setInterval(a,x);return function(){-1!==d&&(clearInterval(d),d=-1)}};this.release=
function(){}},Html5Storage:function(){(function(){}).apply(this,arguments);this.saveData=function(a,x,b,d){try{localStorage.setItem(a+"."+x,b),d(!0,null)}catch(e){d(!1,e.toString())}};this.loadData=function(a,x,b){try{var d=localStorage.getItem(a+"."+x);b(!0,d)}catch(e){b(!1,e.toString())}};this.release=function(){}},Html5Metadata:function(){(function(){}).apply(this,arguments);this.getBrowserName=function(){return null};this.getBrowserVersion=function(){return null};this.getDeviceBrand=function(){return null};
this.getDeviceManufacturer=function(){return null};this.getDeviceModel=function(){return null};this.getDeviceType=function(){return null};this.getDeviceVersion=function(){return null};this.getFrameworkName=function(){return"HTML5"};this.getFrameworkVersion=function(){return null};this.getOperatingSystemName=function(){return null};this.getOperatingSystemVersion=function(){return null};this.release=function(){}},Html5Logging:function(){(function(){}).apply(this,arguments);this.consoleLog=function(a,
x){"undefined"!==typeof console&&(console.log&&x===Conviva.SystemSettings.LogLevel.DEBUG||x===Conviva.SystemSettings.LogLevel.INFO?console.log(a):console.warn&&x===Conviva.SystemSettings.LogLevel.WARNING?console.warn(a):console.error&&x===Conviva.SystemSettings.LogLevel.ERROR&&console.error(a))};this.release=function(){}},Html5PlayerInterface:function(a,x){var b=this;b._timeupdate=0;b._lastTimeupdate=0;b._currentTimeIsInvalid=!1;b._width=-1;b._height=-1;this._timerInterface=new WSJVideoConviva.Html5Timer;
this._loggingInterface=new WSJVideoConviva.Html5Logging;this._addEventListener=function(a,e,c){"undefined"===typeof c&&(c=b._videoElement);b._eventListeners.push([a,e,c]);window.addEventListener?c.addEventListener(a,e,!1):c.attachEvent("on"+a,e)};this._removeEventListener=function(a,e,c){"undefined"===typeof c&&(c=b._videoElement);window.removeEventListener?c.removeEventListener(a,e,!1):c.detachEvent("on"+a,e)};this._registerVideoEventListeners=function(){b._addEventListener("ended",function(){b._receivedHtml5Event("ended")});
b._addEventListener("pause",function(){b._receivedHtml5Event("pause")});b._addEventListener("playing",function(){0==b._videoElement.currentTime?b._currentTimeIsInvalid=!0:b._videoElement.seeking||b._receivedHtml5Event("playing")});b._addEventListener("waiting",function(){b._receivedHtml5Event("waiting")});b._addEventListener("timeupdate",function(){b._currentTimeIsInvalid&&(b._timeupdate++,b._playerStateManager.getPlayerState()===Conviva.PlayerStateManager.PlayerState.PLAYING||b._videoElement.seeking||
b._receivedHtml5Event("playing"))});b._addEventListener("error",function(){b._videoElement.error&&b._reportHtml5Error(b._videoElement.error.code)});b._addEventListener("loadedmetadata",b._loadedMetadata);b._addEventListener("seeking",function(){b.isSeekStarted||(b.isSeekStarted=!0,b._playerStateManager.setPlayerSeekStart(-1));b._currentTimeIsInvalid&&b._playerStateManager.getPlayerState()!==Conviva.PlayerStateManager.PlayerState.BUFFERING&&(b._log("Adjusting Conviva player state to: BUFFERING"),b._receivedHtml5Event("waiting"))});
b._addEventListener("seeked",function(){b.isSeekStarted=!1;b._playerStateManager.setPlayerSeekEnd()});b._monitorErrorsFromSourceElements()};this.getPHT=function(){return 1E3*b._videoElement.currentTime};this.getBufferLength=function(){var a=b._videoElement.buffered;if(void 0!==a){for(var e=0,c=0;c<a.length;c++){var g=a.start(c),f=a.end(c);g<=b._videoElement.currentTime&&b._videoElement.currentTime<f&&(e+=f-b._videoElement.currentTime)}b._currentBufferLength=e;return 1E3*b._currentBufferLength}};this.getSignalStrength=
function(){return Conviva.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH};this.getRenderedFrameRate=function(){return Conviva.PlayerStateManager.DEFAULT_RENDERED_FRAME_RATE};this._monitorErrorsFromSourceElements=function(){if("undefined"!==typeof b._videoElement.children){var a=function(){b._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN");b._reportHtml5Error(0)};b._videoElement._sources=b._videoElement.children;for(var e=0;e<b._videoElement._sources.length;e++){var c=
b._videoElement._sources[e];"SOURCE"==c.tagName&&b._addEventListener("error",a,c)}}};this._removeVideoEventHandlers=function(){for(var a=0;a<b._eventListeners.length;a++){var e=b._eventListeners[a];b._removeEventListener(e[0],e[1],e[2])}b._eventListeners=[]};this._findCurrentState=function(){b._prevReadyState=b._videoElement.readyState;0===b._videoElement.readyState?b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):b._videoElement.ended?b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):
(b._videoElement.paused||b._videoElement.seeking)&&b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);b._videoElement.readyState>=b._videoElement.HAVE_METADATA&&b._loadedMetadata()};this._receivedHtml5Event=function(a){var e=b._convertHtml5EventToConvivaPlayerState(a);b._log("Received HTML5 event: "+a+". Mapped to Conviva player state: "+e);b._updateConvivaPlayerState(e)};this._updateConvivaPlayerState=function(a){b._playerStateManager.getPlayerState()!==a&&(b._log("Changing Conviva player state to: "+
a),b._playerStateManager.setPlayerState(a),b._playerStateRecentlyChanged=!0)};this._convertHtml5EventToConvivaPlayerState=function(a){switch(a){case "playing":return Conviva.PlayerStateManager.PlayerState.PLAYING;case "waiting":return Conviva.PlayerStateManager.PlayerState.BUFFERING;case "ended":case "stopped":return Conviva.PlayerStateManager.PlayerState.STOPPED;case "pause":return Conviva.PlayerStateManager.PlayerState.PAUSED;default:return Conviva.PlayerStateManager.PlayerState.UNKNOWN}};this._reportHtml5Error=
function(a){var e;switch(a){case 1:e="MEDIA_ERR_ABORTED";break;case 2:e="MEDIA_ERR_NETWORK";break;case 3:e="MEDIA_ERR_DECODE";break;case 4:e="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:e="MEDIA_ERR_UNKNOWN"}b._log("Reporting error: code="+a+" message="+e);b._playerStateManager.sendError(e,Conviva.Client.ErrorSeverity.FATAL)};this._loadedMetadata=function(){var a=b._videoElement.duration;isNaN(a)||Infinity==a||b._playerStateManager.setDuration(a);a=b._videoElement.videoWidth;!isNaN(a)&&0<=a&&b._playerStateManager.setVideoResolutionWidth(a);
a=b._videoElement.videoHeight;!isNaN(a)&&0<=a&&b._playerStateManager.setVideoResolutionHeight(a);b._playerStateManager.setConnectionType("Wi-fi");b._playerStateManager.setLinkEncryption("YES")};this._startPolling=function(){this._currentBufferLength=this._currentPosition=this._previousPosition=0;this._pollingTimerCancel=this._timerInterface.createTimer(this._poll,500,"Html5PlayerInterface._poll()")};this._poll=function(){b._pollStreamerResolution();b._inferPlayerStateFromPosition()};this._pollStreamerResolution=
function(){var a=b._videoElement.videoWidth;!isNaN(a)&&0<=a&&a!=b._width&&(b._playerStateManager.setVideoResolutionWidth(a),b._width=a);a=b._videoElement.videoHeight;!isNaN(a)&&0<=a&&a!=b._height&&(b._playerStateManager.setVideoResolutionHeight(a),b._height=a)};this._inferPlayerStateFromPosition=function(){b._previousPosition=b._currentPosition;b._currentPosition=b._videoElement.currentTime;b._positionDelta=Math.abs(b._previousPosition-b._currentPosition);if(!(1<b._positionDelta))if(b._playerStateRecentlyChanged)b._playerStateRecentlyChanged=
!1;else{var a=0!==b._positionDelta,e=b._playerStateManager.getPlayerState();a&&e!==Conviva.PlayerStateManager.PlayerState.PLAYING?(b._log("Adjusting Conviva player state to: PLAYING"),b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING)):a||e!==Conviva.PlayerStateManager.PlayerState.PLAYING||(b._videoElement.paused?e!=Conviva.PlayerStateManager.PlayerState.PAUSED&&(b._log("Adjusting Conviva player state to: PAUSED"),b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)):
b._videoElement.seeking||(b._log("Adjusting Conviva player state to: BUFFERING"),b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)));b._currentTimeIsInvalid&&(b._videoElement.paused?(e!=Conviva.PlayerStateManager.PlayerState.PAUSED&&(b._log("Adjusting Conviva player state to: PAUSED"),b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)),b._timeupdate=b._lastTimeupdate):b._videoElement.seeking||(1<b._timeupdate&&b._timeupdate==b._lastTimeupdate&&(b._log("Adjusting Conviva player state to: BUFFERING"),
b._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)),b._lastTimeupdate=b._timeupdate))}};this._stopPolling=function(){this._pollingTimerCancel()};this._log=function(a){this._loggingInterface.consoleLog("[Html5PlayerInterface] "+a,Conviva.SystemSettings.LogLevel.DEBUG)};(function(a,b){this._log("Html5PlayerInterface._constr()");if(!a)throw Error("Html5PlayerInterface: playerStateManager argument cannot be null.");if(!b)throw Error("Html5PlayerInterface: videoElement argument cannot be null.");
this._playerStateManager=a;this._videoElement=b;this._eventListeners=[];this._registerVideoEventListeners();this._startPolling();this._findCurrentState();this._playerStateManager.setClientMeasureInterface(this)}).apply(this,arguments);this.cleanup=function(){this._log("Html5PlayerInterface.cleanup()");this._stopPolling();this._removeVideoEventHandlers();this._playerStateManager=this._videoElement=null}}};
